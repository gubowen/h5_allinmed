webpackJsonp([2],{10:function(e,t,a){function s(e){a(24)}var n=a(2)(a(25),a(26),s,null,null);e.exports=n.exports},114:function(e,t,a){"use strict";function s(){var e=i.a.getCookie("env"),t=window.location.host,a="";return"m9.allinmed.cn"===t&&"online"===e?new o.a(function(e,t){Object(r.a)({url:c,method:"POST",data:{firstResult:0,maxResult:1},done:function(t){t.responseObject.responseStatus&&(a=t.responseObject.responseData.accessKey,e(a))}})}):new o.a(function(e,t){e("50c93d2ab7e207fd83231a245c07bfbc")})}t.a=s;var n=a(15),o=a.n(n),i=a(3),r=a(6),c="/mcall/im/interact/v1/getToken/"},115:function(e,t,a){function s(e){a(116)}var n=a(2)(a(117),a(123),s,null,null);e.exports=n.exports},116:function(e,t){},117:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(17),n=a(150),o=a.n(n),i=a(77),r=(a.n(i),a(122));a.n(r);s.a.use(o.a),t.default={name:"carrousel",data:function(){return{imageListBox:[],swiperOption:{notNextTick:!0,autoplay:3e3,direction:"horizontal",grabCursor:!0,setWrapperSize:!0,zoom:!1,autoHeight:!0,pagination:".swiper-pagination",paginationType:"fraction",paginationClickable:!0,mousewheelControl:!0,observeParents:!0,debugger:!0,onTransitionStart:function(e){}}}},computed:{swiper:function(){return this.$refs.mySwiper.swiper}},mounted:function(){this.imageListBox=this.$route.params.imgBlob;var e=this.$route.params.indexNum;this.swiper.slideTo(e,0,!1)},activated:function(){},methods:{imageClickFn:function(){this.$router.go(-1)}}}},118:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="undefined"!=typeof window;s&&(window.Swiper=a(77)),t.default={name:"swiper",props:{options:{type:Object,default:function(){return{autoplay:3500}}},notNextTick:{type:Boolean,default:function(){return!1}}},data:function(){return{defaultSwiperClasses:{wrapperClass:"swiper-wrapper"}}},ready:function(){!this.swiper&&s&&(this.swiper=new Swiper(this.$el,this.options))},mounted:function(){var e=this,t=function(){if(!e.swiper&&s){delete e.options.notNextTick;var t=!1;for(var a in e.defaultSwiperClasses)e.defaultSwiperClasses.hasOwnProperty(a)&&e.options[a]&&(t=!0,e.defaultSwiperClasses[a]=e.options[a]);var n=function(){e.swiper=new Swiper(e.$el,e.options)};t?e.$nextTick(n):n()}}(this.options.notNextTick||this.notNextTick)?t():this.$nextTick(t)},updated:function(){this.swiper&&this.swiper.update()},beforeDestroy:function(){this.swiper&&(this.swiper.destroy(),delete this.swiper)}}},119:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"swiper-container"},[e._t("parallax-bg"),e._v(" "),a("div",{class:e.defaultSwiperClasses.wrapperClass},[e._t("default")],2),e._v(" "),e._t("pagination"),e._v(" "),e._t("button-prev"),e._v(" "),e._t("button-next"),e._v(" "),e._t("scrollbar")],2)},staticRenderFns:[]}},12:function(e,t){!function(e,t){function a(){var t=o.getBoundingClientRect().width;t/c>540&&(t=540*c);var a=t/10;o.style.fontSize=a+"px",u.rem=e.rem=a}var s,n=e.document,o=n.documentElement,i=n.querySelector('meta[name="viewport"]'),r=n.querySelector('meta[name="flexible"]'),c=0,l=0,u=t.flexible||(t.flexible={});if(i){console.warn("将根据已有的meta标签来设置缩放比例");var d=i.getAttribute("content").match(/initial\-scale=([\d\.]+)/);d&&(l=parseFloat(d[1]),c=parseInt(1/l))}else if(r){var p=r.getAttribute("content");if(p){var m=p.match(/initial\-dpr=([\d\.]+)/),g=p.match(/maximum\-dpr=([\d\.]+)/);m&&(c=parseFloat(m[1]),l=parseFloat((1/c).toFixed(2))),g&&(c=parseFloat(g[1]),l=parseFloat((1/c).toFixed(2)))}}if(!c&&!l){var f=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi)),h=e.devicePixelRatio;c=f?h>=3&&(!c||c>=3)?3:h>=2&&(!c||c>=2)?2:1:1,l=1/c}if(o.setAttribute("data-dpr",c),!i)if(i=n.createElement("meta"),i.setAttribute("name","viewport"),i.setAttribute("content","initial-scale="+l+", maximum-scale="+l+", minimum-scale="+l+", user-scalable=no"),o.firstElementChild)o.firstElementChild.appendChild(i);else{var v=n.createElement("div");v.appendChild(i),n.write(v.innerHTML)}e.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(a,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(s),s=setTimeout(a,300))},!1),"complete"===n.readyState?n.body.style.fontSize=12*c+"px":n.addEventListener("DOMContentLoaded",function(e){n.body.style.fontSize=12*c+"px"},!1),a(),u.dpr=e.dpr=c,u.refreshRem=a,u.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},u.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}))},120:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"swiper-slide",data:function(){return{slideClass:"swiper-slide"}},ready:function(){this.update()},mounted:function(){this.update(),this.$parent.options.slideClass&&(this.slideClass=this.$parent.options.slideClass)},updated:function(){this.update()},attached:function(){this.update()},methods:{update:function(){this.$parent&&this.$parent.swiper&&this.$parent.swiper.update&&(this.$parent.swiper.update(!0),this.$parent.options.loop&&this.$parent.swiper.reLoop())}}}},121:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.slideClass},[e._t("default")],2)},staticRenderFns:[]}},122:function(e,t){},123:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"ev-showBigImg",on:{click:e.imageClickFn}},[a("swiper",{ref:"mySwiper",attrs:{options:e.swiperOption}},[e._l(e.imageListBox,function(e,t){return a("swiper-slide",{key:e.imgId},[a("div",{staticClass:"swiper-zoom-container"},[a("img",{attrs:{src:e.blob,alt:""}})])])}),e._v(" "),a("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2)],1)},staticRenderFns:[]}},1231:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),n=a.n(s),o=a(1),i=a.n(o),r=a(17),c=a(1232),l=a.n(c),u=a(52),d=a(90),p=(a.n(d),a(44),a(38)),m=(a.n(p),a(21)),g=(a.n(m),a(1236)),f=a.n(g),h=a(115),v=a.n(h),y=a(1297),I=a.n(y),w=a(1301),S=a.n(w),b=a(1307),C=a.n(b),T=a(1311),x=a.n(T),k=a(137),O=a(1315),P=a(8),L=(a.n(P),function(){function e(){n()(this,e),this.init()}return i()(e,[{key:"init",value:function(){r.a.use(u.a),r.a.use(O.a),this.routerStart(),this.registerRouter();new r.a({store:k.a,router:this.router,render:function(e){return e(l.a)}}).$mount("#imScene")}},{key:"registerRouter",value:function(){this.router=new u.a({routes:this.routes})}},{key:"routerStart",value:function(){this.routes=[{path:"/",redirect:"/BaseIm"},{path:"/BaseIm",name:"BaseIm",meta:{keepAlive:!0},component:f.a},{path:"/ShowBigImg",name:"showBigImg",meta:{keepAlive:!1},component:v.a},{path:"/MedicalReportDetail",name:"MedicalReportDetail",meta:{keepAlive:!0},component:I.a},{path:"/UploadList",name:"UploadList",meta:{keepAlive:!0},component:S.a},{path:"/TriageDetail",name:"TriageDetail",meta:{keepAlive:!0},component:C.a},{path:"/knowledgeDetail",name:"knowledgeDetail",meta:{keepAlive:!0},component:x.a}]}}]),e}());new L},1232:function(e,t,a){function s(e){a(1233)}var n=a(2)(a(1234),a(1235),s,"data-v-77d4ff92",null);e.exports=n.exports},1233:function(e,t){},1234:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(12);a.n(s);t.default={data:function(){return{}},components:{}}},1235:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%",height:"100%"}},[a("keep-alive",[e.$route.meta.keepAlive?a("router-view",{staticStyle:{"min-height":"100%"}}):e._e()],1),e._v(" "),e.$route.meta.keepAlive?e._e():a("router-view",{staticStyle:{"min-height":"100%"}})],1)},staticRenderFns:[]}},1236:function(e,t,a){function s(e){a(1237)}var n=a(2)(a(1239),a(1296),s,null,null);e.exports=n.exports},1237:function(e,t){},1239:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n,o=a(73),i=a.n(o),r=a(7),c=a.n(r),l=a(3),u=a(88),d=a.n(u),p=a(137),m=a(5),g=a(153),f=a.n(g),h=a(10),v=a.n(h),y=a(20),I=a.n(y),w=(a(9),a(13)),S=a.n(w),b=a(1240),C=a.n(b),T=a(1244),x=a.n(T),k=a(1248),O=a.n(k),P=a(1252),L=a.n(P),D=a(1256),_=a.n(D),A=a(1260),M=a.n(A),j=a(1264),R=a.n(j),N=a(1268),E=a.n(N),U=a(1272),B=a.n(U),F=a(39),q=a(114),z=a(234),J=a(312),V=a.n(J),W=a(15),X=a.n(W),Z=a(313),G=a.n(Z),Q=a(0),H=a.n(Q),Y=a(1),K=a.n(Y),ee=a(314),te=a.n(ee),ae=a(316),se=a.n(ae),ne=(a(8),function e(t){H()(this,e),this.nimObj=t}),oe=a(89),ie=(s=function(e){function t(e,a){H()(this,t);var s=te()(this,(t.__proto__||G()(t)).call(this,e));return s.msg=a,s}return se()(t,e),K()(t,[{key:"deleteMessage",value:function(){var e=this;return new X.a(function(t,a){console.log(e.nimObj),console.log("正在撤回消息",e.msg),e.nimObj.deleteMsg({msg:e.msg,done:function(s){s?(console.log("撤回失败....."),a(s,e.msg)):(console.log("撤回消息成功....."),t(e.msg))}})})}}]),t}(ne),function(e,t,a,s,n){var o={};return Object.keys(s).forEach(function(e){o[e]=s[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce(function(a,s){return s(e,t,a)||a},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(s.prototype,"deleteMessage",[oe.a],V()(s.prototype,"deleteMessage"),s.prototype),n=function(e){function t(e,a,s){H()(this,t);var n=te()(this,(t.__proto__||G()(t)).call(this,e));return n.targetAccount=a,n.customParam=s,n}return se()(t,e),K()(t,[{key:"sendDeleteTips",value:function(){var e=this;return new X.a(function(t,a){e.nimObj.sendCustomMsg({scene:"p2p",to:e.targetAccount,custom:c()(e.customParam)||c()({}),content:c()({type:"deleteMsgTips",data:{from:e.customParam.patientName||"患者",deleteMsg:e.customParam.deleteMsg||{}}}),done:function(e,s){e?a(e,s):(console.log(e,s),t(s))}})})}}]),t}(ne),function(e,t,a,s,n){var o={};return Object.keys(s).forEach(function(e){o[e]=s[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce(function(a,s){return s(e,t,a)||a},o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}(n.prototype,"sendDeleteTips",[oe.a],V()(n.prototype,"sendDeleteTips"),n.prototype),{getToken:"/mcall/im/interact/v1/refreshToken/",getMedicalList:"/mcall/customer/patient/case/v1/getMapById/",updateMedicalList:"/mcall/customer/patient/case/v1/update/",triageAssign:"/mcall/customer/case/consultation/v1/create/",getTriageId:"/mcall/customer/case/consultation/v1/getMapById/",time:"/mcall/customer/case/consultation/v1/getConsultationFrequency/",refresh:"/mcall/customer/case/consultation/v1/update/",updateCount:"/mcall/customer/case/consultation/v1/updateFrequency/",getPrice:"/mcall/customer/traige/v1/getMapById/",updateShunt:"/mcall/customer/case/consultation/v1/createConsultation/"}),re=m.a.browser().ios,ce=m.a.browser().android;t.default={data:function(){return{isIos:navigator.userAgent.toLowerCase().includes("iphone"),nim:{},imageProgress:{uploading:!1,progress:"0%",index:0},imageLastIndex:0,noWXPayShow:!1,onFocus:!1,inputFlag:!0,imageList:[],consultationId:"",timeStampShowList:[],orderSourceId:"",beginTimestamp:0,finish:!0,lastTimeShow:!1,inputBoxShow:!1,consultTipsShow:!1,msgList:[],userData:{account:"",token:""},payPopupShow:!1,isClick:!1,targetData:{account:"1_doctor00001"},sendTextContent:"",cId:"0",footerPosition:"main-input-box",bfscrolltop:document.body.scrollTop,toastTips:"",toastShow:!1,deleteMsgIndex:-1}},methods:{setFooterPosition:function(){re?this.footerPosition="main-input-box relative":ce&&(this.footerPosition="main-input-box absolute")},focusFn:function(){navigator.userAgent.toLowerCase().includes("11")?this.scrollToBottom():this.interval=setInterval(function(){document.body.scrollTop=document.body.scrollHeight},100),setTimeout(function(){$(".main-message-time").css({top:document.body.scrollTop})},500),this.onFocus=!0,this.autoSizeTextarea()},blurFn:function(){var e=this;navigator.userAgent.toLowerCase().includes("11")?this.scrollToBottom():setTimeout(function(){clearInterval(e.interval),document.body.scrollTop=e.bfscrolltop},20),$(".main-message-time").css({top:0}),this.onFocus=!1,this.autoSizeTextarea()},connectToNim:function(){var e=this,t=this;Object(q.a)().then(function(a){e.nim=NIM.getInstance({appKey:a,account:e.userData.account,token:e.userData.token,onconnect:function(e){console.log("连接成功")},onmyinfo:function(e){t.getMessageList()},onwillreconnect:function(e){console.log("已重连"+e.retryCount+"次，"+e.duration+"后将重连...")},ondisconnect:function(){console.log("链接已中断...")},onerror:e.onError,onroamingmsgs:function(e){console.log("漫游消息..."),console.log(e),e.msgs.forEach(function(e,a){t.msgList.push(a)})},onofflinemsgs:function(e){console.log("离线消息..."),e.msgs.forEach(function(e,a){t.msgList.push(a)})},onmsg:function(e){e.from===t.targetData.account&&(console.log("收到回复消息："+c()(e)),t.pauseTime(e),t.msgList.push(e),t.$nextTick(function(){t.scrollToBottom()}),t.getCId(e))}})})},getCId:function(e){var t=this;console.log(!!e.custom),e.custom&&(t.cId=JSON.parse(e.custom).cId)},pauseTime:function(e){var t=this;"custom"===e.type&&"checkSuggestion"===JSON.parse(e.content).type&&(t.lastTimeShow=!1,p.a.commit("stopLastTimeCount"))},getImageList:function(){var e=this;this.$refs.bigImg&&this.$refs.bigImg.forEach(function(t,a){e.imageList.push(t.imageMessage.file.url)})},getUserBaseData:function(){var e=this;l.a.ajax({url:ie.getToken,method:"POST",data:{accid:"0_"+l.a.getPara().caseId,patientName:l.a.getPara().patientId},beforeSend:function(){this.finish=!1},done:function(t){t.responseObject.responseStatus&&(e.userData={account:"0_"+l.a.getPara().caseId,token:t.responseObject.responseData.token}),e.finish=!0,d()(e.$refs.inputTextarea),e.connectToNim()},fail:function(e){console.log(e.message)}})},getMessageList:function(){var e=this;document.body.scrollTop=0,this.nim.getHistoryMsgs({scene:"p2p",to:this.targetData.account,done:function(t,a){e.msgList=a.msgs.reverse(),console.log("dom更新前"),console.log(a),e.getTimeStampShowList(),e.sendSuggestDoctor(),e.$nextTick(function(){e.loopMessage(),e.getImageList()})},limit:100})},sendSuggestDoctor:function(){var e=this,t=sessionStorage.getItem("doctor");t&&e.nim.sendText({scene:"p2p",to:e.targetData.account,text:t+"拒绝了我的咨询，请重新为我匹配对症医生",custom:c()({cType:"0",cId:e.cId,mType:"0",conId:e.orderSourceId}),done:function(t,a){console.log(a),e.sendMessageSuccess(t,a),sessionStorage.removeItem("doctor")}})},hasMiddleTips:function(){var e=this,t=e.msgList[e.msgList.length-1];if(t){if("custom"===t.type&&"notification"===JSON.parse(t.content).type&&5===JSON.parse(t.content).data.actionType||!e.consultTipsShow)return!0;e.sendConsultState(5)}},loopMessage:function(){for(var e=this,t=!0,a=0;a<e.msgList.length;a++)"custom"===e.msgList[a].type&&"medicalReport"===JSON.parse(e.msgList[a].content).type&&(t=!1),"custom"===e.msgList[a].type&&"previewSuggestion"===JSON.parse(e.msgList[a].content).type&&p.a.commit("addPreviewSuggestionNum");e.$store.state.previewSuggestionNum||e.scrollToBottom(),t?e.getMedicalMessage():e.hasMiddleTips()},getMedicalMessage:function(){var e=this;l.a.ajax({url:ie.getMedicalList,method:"POST",data:{caseId:l.a.getPara().caseId,attUseFlag:1,isOrder:0},beforeSend:function(e){},done:function(t){if(t.responseObject&&t.responseObject.responseData){var a=t.responseObject.responseData.dataList;a&&0!==a.length&&(e.sendMedicalReport({data:{caseId:l.a.getPara().caseId,patientName:a[0].patientCasemap.patientName,sexName:a[0].patientCasemap.sexName,age:a[0].patientCasemap.age,createDate:(new Date).getTime(),diagnoseConTent:"",isAttachment:a[0].patientCasemap.isAttachment,time:a[0].patientCasemap.caseTime},type:"medicalReport"}),e.hasMiddleTips())}}})},sendMedicalReport:function(e){var t=this;this.nim.sendCustomMsg({scene:"p2p",custom:c()({cType:"0",cId:t.cId,mType:"27",conId:t.orderSourceId}),to:this.targetData.account,content:c()(e),done:function(a,s){t.sendMessageSuccess(a,s),t.tipNewPatient(e)}})},tipNewPatient:function(e){var t=this;this.nim.sendCustomMsg({scene:"p2p",custom:c()({cType:"0",cId:t.cId,mType:"32",conId:t.orderSourceId}),to:this.targetData.account,content:c()({type:"new-health",data:i()({},e.data,{patientId:l.a.getPara().patientId,consultationid:this.orderSourceId})}),done:function(e,a){t.sendMessageSuccess(e,a),console.log("新用户提醒发送...")}})},triageDoctorAssign:function(){var e=this;l.a.ajax({url:ie.getTriageId,method:"POST",data:{caseId:l.a.getPara().caseId,consultationType:0,sortType:1,firstResult:0,maxResult:9999},done:function(t){if("NO DATA"===t.responseObject.responseMessage)e.createTriageMessage();else{var a=t.responseObject.responseData.dataList;e.orderSourceId=a[a.length-1].consultationId,e.getLastTime()}}})},createTriageMessage:function(){var e=this;l.a.ajax({url:ie.triageAssign,method:"POST",data:{caseId:l.a.getPara().caseId,customerId:0,patientCustomerId:l.a.getPara().patientCustomerId,patientId:l.a.getPara().patientId,consultationType:0,consultationState:4,siteId:17,caseType:0},done:function(t){t.responseObject.responseStatus&&(console.log("用户已分流..."),e.orderSourceId=t.responseObject.responsePk,e.getLastTime())}})},refreshState:function(){var e=this;l.a.ajax({url:ie.refresh,method:"POST",data:{consultationId:e.orderSourceId,consultationState:1},done:function(e){e.responseObject.responseStatus?console.log("状态更新成功"):console.log("状态更新失败"+e)}})},showFlagDeleteTips:function(e){var t=this,a=!1;if("custom"===e.type&&"deleteMsgTips"===JSON.parse(e.content).type){a=!0;var s=JSON.parse(e.content).data.deleteMsg.idClient;this.msgList.forEach(function(e,a){if(e.idClient===s)return void t.msgList.removeByValue(e)})}return a},deleteMsgEvent:function(e){var t=this;this.nim.deleteMsg({msg:e,done:function(a){console.log(a),a?508===parseInt(a.code)&&(t.toastTips="您只能撤回2分钟内的消息",t.toastShow=!0,setTimeout(function(){t.toastShow=!1},2e3)):setTimeout(function(){t.nim.sendCustomMsg({scene:"p2p",to:t.targetData.account,custom:c()({cType:"0",cId:t.cId,mType:"36",conId:t.orderSourceId,patientName:t.$store.state.patientName,idClient:e.idClient}),content:c()({type:"deleteMsgTips",data:{from:t.$store.state.patientName||"患者",deleteMsg:e||{}}}),done:function(e,a){console.log("发送撤回消息完成"),console.log(e),console.log(a),e||(console.log(e,a),console.log("撤回消息提示--发送成功"),t.sendMessageSuccess(e,a))}})},20)}})},getLastTime:function(){var e=this;l.a.ajax({url:ie.time,method:"POST",data:{caseId:l.a.getPara().caseId,isValid:1,consultationType:0,firstResult:0,maxResult:9999},done:function(t){if(e.inputBoxShow=!0,console.log(t),t.responseObject.responseStatus){var a=t.responseObject.responseData.dataList;e.cId=a.customerId;var s=parseInt(a.remainingTime);p.a.commit("setConsultation",a.consultationId),s=s>864e5?864e5:s,-2===a.consultationState?(e.lastTimeShow=!1,e.inputBoxShow=!0,e.consultTipsShow=!1):s>0?(p.a.commit("setLastTime",s),p.a.commit("lastTimeCount"),e.lastTimeShow=!0,e.inputBoxShow=!0,e.consultTipsShow=!1):(e.lastTimeShow=!1,e.inputBoxShow=!1,e.consultTipsShow=!0),e.$nextTick(function(){e.inputBoxShow&&d()(e.$refs.inputTextarea)}),(0==a.consultationState||4==a.consultationState||5==a.consultationState)&&s<=0&&e.refreshState()}},fail:function(e){console.log(e.message)}})},autoSizeTextarea:function(){var e=this;return e.sendTextContent=e.textLength,d.a.update(e.$refs.inputTextarea),!1},sendMessage:function(){var e=this;if(e.sendTextContent=e.textLength,""===e.sendTextContent)return d.a.destroy(e.$refs.inputTextarea),d()(e.$refs.inputTextarea),!1;var t=this.sendTextContent;this.sendTextContent="",d.a.destroy(e.$refs.inputTextarea),this.nim.sendText({scene:"p2p",to:this.targetData.account,text:t,custom:c()({cType:"0",cId:e.cId,mType:"0",conId:e.orderSourceId}),done:function(t,a){console.log(a),e.sendMessageSuccess(t,a),d()(e.$refs.inputTextarea)}}),$(".main-input-box-textarea").focus()},sendMessageSuccess:function(e,t){var a=this,s=this;console.log("发送"+t.scene+t.type+"消息"+(e?"失败":"成功")+"id="+t.idClient),this.sendTextContent="",(t.time-this.beginTimestamp)/3e5>1?(this.beginTimestamp=t.time,this.timeStampShowList.push(1)):this.timeStampShowList.push(0),e?s.sendErrorTips(t):(this.msgList.push(t),setTimeout(function(){a.scrollToBottom()},1e3))},transformTimeStamp:function(e){var t=function(e){return e>9?e:"0"+e},a=function(e){var a=new Date(e);return{y:a.getFullYear(),m:a.getMonth()+1,dd:a.getDate(),h:a.getHours(),mm:t(a.getMinutes())}},s="",n=(new Date).getTime();return a(e).y+"-"+a(e).m+"-"+a(e).dd==a(n).y+"-"+a(n).m+"-"+a(n).dd?s=a(e).h+":"+a(e).mm:a(e).y===a(n).y?s=a(e).m+"月"+a(e).dd+"日  "+a(e).h+":"+a(e).mm:a(e).y!==a(n).y&&(s=a(e).y+"年"+a(e).m+"月"+a(e).dd+"日  "+a(e).h+":"+a(e).mm),s},getTimeStampShowList:function(){var e=this;this.msgList.forEach(function(t,a){(t.time-e.beginTimestamp)/3e5>1?(e.beginTimestamp=t.time,e.timeStampShowList.push(1)):e.timeStampShowList.push(0)})},getTimeStampShowFlag:function(e,t){if("custom"===e.type){if(JSON.parse(e.content).type.includes("new-")||"payFinishTips"===JSON.parse(e.content).type||"triagePatientTips"===JSON.parse(e.content).type||"reTriageTip"===JSON.parse(e.content).type)return!1;if(1==this.timeStampShowList[t])return!0}else if(1==this.timeStampShowList[t])return!0},sendFile:function(e){var t=this;t.inputFlag=!1,this.msgList.push({file:{url:window.URL.createObjectURL(e.target.files[0])},type:"image"}),t.imageLastIndex=t.msgList.length-1,console.log(window.URL.createObjectURL(e.target.files[0])),this.nim.previewFile({type:"image",fileInput:this.$refs.imageSender,uploadprogress:function(e){t.scrollToBottom(),t.imageProgress={uploading:!0,progress:e.percentageText,index:t.imageLastIndex},console.log("文件总大小: "+e.total+"bytes"),console.log("已经上传的大小: "+e.loaded+"bytes"),console.log("上传进度: "+e.percentage),console.log("上传进度文本: "+e.percentageText)},done:function(e,a){if(console.log("上传image"+(e?"失败":"成功")),!e){t.nim.sendFile({scene:"p2p",to:t.targetData.account,custom:c()({cType:"0",cId:t.cId,mType:"1",conId:t.orderSourceId}),file:a,done:function(e,a){t.msgList[t.imageLastIndex]=a,t.imageList.push(t.$refs.bigImg[t.$refs.bigImg.length-1].imageMessage.file.url),t.imageProgress={uploading:!1,progress:"0%",index:0}}})}}})},scrollToBottom:function(e){this.$nextTick(function(){$(".main-message").animate({scrollTop:$(".main-message>section").height()+1e3},300)})},scrollElement:function(e){console.log("position"+e),$(".main-message").animate({scrollTop:e},300)},inputLimit:function(){this.scrollToBottom();var e=this.sendTextContent;l.a.getByteLen(e)>1e3&&(this.sendTextContent=l.a.getStrByteLen(e,1e3))},getConsultPrice:function(){var e=this;if(e.isClick)return!1;e.isClick=!0,e.finish=!1,console.log("获取价格"),l.a.ajax({url:ie.getPrice,method:"POST",data:{visitSiteId:17,maxResult:999,id:0},done:function(t){if(t.responseObject.responseStatus&&t.responseObject.responseData){var a=t.responseObject.responseData.dataList.adviceAmount;console.log("获取分诊医生价格成功"+a),e.buyTime(a)}else console.log("获取分诊医生价格失败")}})},buyTime:function(e){var t=this,a=void 0;a="0"===e?"false":"true",console.log("走支付方法");var s={patientCustomerId:l.a.getPara().patientCustomerId,patientId:l.a.getPara().patientId,doctorId:0,orderType:"1",orderSourceId:this.orderSourceId,orderSourceType:"1",orderAmount:e,status:"1",body:"咨询",isCharge:a,caseId:l.a.getPara().caseId};F.a.wxCreateOrder({data:s,backCreateSuccess:function(e){console.log("创建订单成功 "),t.refreashOrderTime("free")},backCreateError:function(e){},wxPaySuccess:function(e){console.log("支付成功"),t.refreashOrderTime("pay")},wxPayError:function(e){t.isClick=!1}})},isShowPaySuccess:function(){localStorage.removeItem("payCaseId"),localStorage.removeItem("payPatientId"),1==localStorage.getItem("payOk")?localStorage.getItem("mOrder")?this.payPopupShow=!0:this.noWXPayShow=!0:(this.payPopupShow=!1,this.noWXPayShow=!1)},viewPayResult:function(){var e=this;F.a.PayResult({outTradeNo:localStorage.getItem("orderNumber")}).then(function(t){console.log("查看回调",t),"SUCCESS"==t.resultCode?(e.noWXPayShow=!1,localStorage.removeItem("payOk"),e.refreashOrderTime("pay")):(e.isClick=!1,console.log("未支付成功"))}).catch(function(e){console.log(e)})},againShunt:function(){var e=this;console.log("分流参数："+e.orderSourceId),l.a.ajax({url:ie.updateShunt,method:"POST",data:{caseId:l.a.getPara().caseId,patientId:l.a.getPara().patientId,patientCustomerId:l.a.getPara().patientCustomerId,isShunt:1},done:function(t){t.responseObject.responseStatus?(console.log("分流成功"),e.isClick=!1,e.finish=!0):console.log("分流失败")}})},refreashOrderTime:function(e){var t=this,a=e?"2":"6";console.log("更新时间");var s={consultationId:this.orderSourceId,frequency:"0",frequencyType:a};!!e&&i()(s,{customerId:"0",consultationState:"4",consultationLevel:"1"}),l.a.ajax({url:ie.updateCount,method:"POST",data:s,done:function(a){a.responseObject.responseData&&a.responseObject.responseStatus?(e&&"pay"===e&&t.sendPayFinish(),t.getLastTime()):console.log("重置时间失败")}})},updateMedical:function(){var e=this;l.a.ajax({url:ie.updateMedicalList,method:"POST",data:{caseId:l.a.getPara().caseId,state:1},done:function(t){t.responseObject.responseStatus&&e.refreashOrderTime()}})},toUpLoadTimes:function(e){var t=this;l.a.ajax({url:ie.updateCount,method:"POST",data:{consultationId:sessionStorage.getItem("orderSourceId"),frequency:e.orderFrequency,frequencyType:2,consultationState:-1,consultationLevel:e.orderType},done:function(a){a.responseObject.responseStatus&&(localStorage.setItem("sendTips",c()(e)),t.payPopupShow=!1,window.location.href="/dist/imSceneDoctor.html?from=im&caseId="+l.a.getPara().caseId+"&doctorCustomerId="+(t.$store.state.targetDoctor.customerId||JSON.parse(localStorage.getItem("mPayDoctorDetails")).customerId)+"&patientCustomerId="+l.a.getPara().patientCustomerId+"&patientId="+l.a.getPara().patientId)}})},sendPayFinish:function(){var e=this;this.nim.sendCustomMsg({scene:"p2p",to:e.targetData.account,custom:c()({cType:"0",cId:e.cId,mType:"32",conId:e.orderSourceId}),content:c()({type:"payFinishTips"}),done:function(t,a){t||e.sendMessageSuccess(t,a)}})},sendConsultState:function(e){var t=this;this.nim.sendCustomMsg({scene:"p2p",to:t.targetData.account,custom:c()({cType:"0",cId:t.cId,mType:"24",conId:t.orderSourceId}),content:c()({type:"notification",data:{actionType:e}}),type:"custom",done:function(e,a){e||t.sendMessageSuccess(e,a)}})},forceRefresh:function(){navigator.userAgent.indexOf("iPhone")>-1&&(window.onload=function(){setTimeout(function(){window.addEventListener("popstate",function(e){self.location=document.referrer})},500)})},initScroll:function(){this.$refs.wrapper&&(this.scroll=new z.a(this.$refs.wrapper,{probeType:3,click:!0,momentum:!0,deceleration:.01}))},refreshScroll:function(){this.scroll&&this.scroll.refresh()}},computed:{progess:function(){return this.imageProgress.progress},lastTime:function(){return this.$store.state.lastTime},lastTimeText:function(){return l.a.MillisecondToDateNew(this.$store.state.lastTime)},logoUrl:function(){return this.$store.state.logoUrl},payPopupDate:function(){return{docName:this.$store.state.targetDoctor.nick||JSON.parse(localStorage.getItem("mPayDoctorDetails")).nick,docId:this.$store.state.targetDoctor.customerId||JSON.parse(localStorage.getItem("mPayDoctorDetails")).customerId,caseId:l.a.getPara().caseId,patientId:l.a.getPara().patientId,patientCustomerId:l.a.getPara().patientCustomerId,from:"checkSuggest",payType:this.$store.state.targetDoctor.payType||JSON.parse(localStorage.getItem("mPayDoctorDetails")).payType}},textLength:function(){return this.sendTextContent.replace(/(^(\r|\n|\s)*)|((\r|\n|\s)*$)/g,"")}},beforeCreate:function(){},mounted:function(){var e=this;l.a.checkOpenId()||l.a.wxGetOpenId(1),l.a.forbidShare(),e.getUserBaseData(),e.triageDoctorAssign(),localStorage.setItem("PCIMLinks",location.href),this.setFooterPosition(),setTimeout(function(){},20),e.isShowPaySuccess()},beforeUpdate:function(){},updated:function(){},beforeRouteLeave:function(e,t,a){"showBigImg"===e.name&&(console.log($(".main-message").scrollTop()),sessionStorage.setItem("imagePosition",$(".main-message").scrollTop())),a(!0)},activated:function(){var e=this;l.a.forbidShare(),sessionStorage.getItem("imagePosition")&&($(".main-message").scrollTop(sessionStorage.getItem("imagePosition")),sessionStorage.removeItem("imagePosition")),"triage"===e.$route.query.queryType?e.nim.sendCustomMsg({scene:"p2p",to:e.targetData.account,custom:c()({cType:"0",cId:e.cId,mType:"34",conId:e.orderSourceId}),content:c()({type:"triageSendTips",data:{actionType:e.$route.query.triageType}}),type:"custom",done:function(t,a){t||e.sendMessageSuccess(t,a)}}):e.$route.query&&"checkSuggest"===e.$route.query.queryType&&(e.updateMedical(),e.nim.sendCustomMsg({scene:"p2p",to:e.targetData.account,custom:c()({cType:"0",cId:e.cId,mType:"0",conId:e.orderSourceId}),content:c()({type:"checkSuggestSendTips",data:{actionType:e.$route.query.queryType}}),type:"custom",done:function(t,a){t||e.sendMessageSuccess(t,a)}})),e.$router.replace({query:{}})},watch:{msgList:{handler:function(e,t){var a=this;setTimeout(function(){a.refreshScroll()},20)},deep:!0},progess:function(e,t){"0%"!=e&&"100%"!=e||(this.inputFlag=!0)},lastTime:function(e){e<=0?(this.inputBoxShow&&(this.sendConsultState(5),this.refreshState()),this.lastTimeShow=!1,this.inputBoxShow=!1,this.consultTipsShow=!0):(this.lastTimeShow=!0,this.inputBoxShow=!0,this.consultTipsShow=!1)}},components:{MedicalReport:C.a,ContentText:x.a,ImageContent:O.a,TimeStamp:L.a,PreviewSuggestion:_.a,CheckSuggest:M.a,Triage:R.a,PayFinishTips:B.a,MiddleTips:E.a,payPopup:f.a,loading:v.a,confirm:I.a,Toast:S.a}}},1240:function(e,t,a){function s(e){a(1241)}var n=a(2)(a(1242),a(1243),s,"data-v-170c92ab",null);e.exports=n.exports},1241:function(e,t){},1242:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(137),n=a(3),o={caseMain:"/mcall/customer/patient/case/v1/getMainMapById/"};t.default={data:function(){return{mainCase:"",timeSlot:!0}},mounted:function(){this.getCaseMain(),this.getTimeSlot(),s.a.commit("setLogoUrl",this.medicalReportMessage.data),s.a.commit("setPatientName",this.medicalReportMessage.data.patientName)},methods:{getCaseMain:function(){var e=this;n.a.ajax({url:o.caseMain,method:"POST",data:{caseId:n.a.getPara().caseId,patientId:n.a.getPara().patientId},beforeSend:function(){},done:function(t){t.responseObject.responseStatus&&(e.mainCase=t.responseObject.responseData.dataList[0].caseMain.caseMain)},fail:function(e){console.log("请求失败")}})},getTimeSlot:function(){var e=parseInt(this.medicalReportMessage.data.time.split(" ")[1].split(":")[0]);this.timeSlot=!(e<9||e>21)},goToDetail:function(){this.$router.push({name:"MedicalReportDetail"})}},filters:{ellipsis:function(e,t){if(!e)return"";for(var a="",s=0,n=0;n<e.length&&(e.charCodeAt(n)>128?s+=2:s++,s<=t);n++)a=a.concat(e[n]);return s>t&&(a+="..."),a}},computed:{logoUrl:function(){return this.$store.state.logoUrl}},props:{medicalReportMessage:{type:Object}}}},1243:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"medical-report-box",attrs:{"data-clientid":""},on:{click:e.goToDetail}},[a("header",{staticClass:"medical-report-title"},[e._v("问诊单")]),e._v(" "),a("section",{staticClass:"medical-report-content"},[a("p",{staticClass:"patient-info"},[a("span",[e._v("患者：")]),a("span",{staticClass:"patient-name"},[e._v(e._s(e._f("ellipsis")(e.medicalReportMessage.data.patientName,8))+" ")]),a("span",{staticClass:"patient-age"},[e._v(e._s(e.medicalReportMessage.data.sexName)+" "+e._s(e.medicalReportMessage.data.age)+"岁")])]),e._v(" "),a("p",{staticClass:"case-describe"},[a("span",[e._v("主诉：")]),a("span",{staticClass:"case-describe-main"},[e._v(e._s(e.mainCase))])])]),e._v(" "),a("footer",{staticClass:"medical-report-footer"},[e._v("查看已提交信息")])])]),e._v(" "),a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"main-message-box-item others-message"},[e._m(0,!1,!1),e._v(" "),a("figcaption",{staticClass:"main-message-content"},[e.timeSlot?a("p",[e._v("您好！分诊医生正在详细阅读您提交的资料，将尽快给您答复，并根据情况为您推荐对症专家。")]):e.timeSlot?e._e():a("p",[e._v("您好！分诊服务时间为09：00-22：00，如有问题请留言，分诊医生上班后会为您答复。")])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("figure",{staticClass:"main-message-img"},[s("img",{attrs:{src:a(233),alt:""}})])}]}},1244:function(e,t,a){function s(e){a(1245)}var n=a(2)(a(1246),a(1247),s,null,null);e.exports=n.exports},1245:function(e,t){},1246:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{showDeleteMsg:!1}},mounted:function(){},computed:{logoUrl:function(){return this.$store.state.logoUrl}},methods:{longTouchHandler:function(){this.showDeleteMsg=!0,this.$emit("longTouchEmitHandler")},deleteMsgEvent:function(){this.showDeleteMsg=!1,this.$emit("deleteMsgEvent")}},props:{contentMessage:{type:Object},targetData:{type:Object},userData:{type:Object},currentIndex:{type:Number},deleteMsgIndex:{type:Number}}}},1247:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{directives:[{name:"touch",rawName:"v-touch:long",value:e.longTouchHandler,expression:"longTouchHandler",arg:"long"}],staticClass:"main-message-box"},[s("article",{staticClass:"main-message-box-item",class:{"my-message":e.contentMessage.from===e.userData.account,"others-message":e.contentMessage.from===e.targetData.account},attrs:{"data-clientid":e.contentMessage.idClient}},[e.contentMessage.from===e.targetData.account?s("figure",{staticClass:"main-message-img"},[s("img",{attrs:{src:a(233),alt:""}})]):e._e(),e._v(" "),e._m(0,!1,!1),e._v(" "),s("figcaption",{staticClass:"main-message-content"},[s("transition",{attrs:{name:"fade"}},[e.currentIndex===e.deleteMsgIndex&&e.showDeleteMsg&&e.contentMessage.from===e.userData.account?s("span",{staticClass:"delete-msg-btn",on:{click:function(t){t.stopPropagation(),e.deleteMsgEvent(t)}}},[e._v("撤回")]):e._e()]),e._v(" "),s("p",[e._v(e._s(e.contentMessage.text))])],1),e._v(" "),e.contentMessage.from===e.userData.account?s("figure",{staticClass:"main-message-img"},[s("img",{attrs:{src:e.logoUrl,alt:""}})]):e._e()])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i",{staticClass:"fail-button",staticStyle:{display:"none"}},[a("img",{attrs:{src:"/image/imScene/error_tips.png",alt:""}})])}]}},1248:function(e,t,a){function s(e){a(1249)}var n=a(2)(a(1250),a(1251),s,null,null);e.exports=n.exports},1249:function(e,t){},1250:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(73),n=a.n(s);t.default={data:function(){return{imageNum:"",showDeleteMsg:!1}},computed:{logoUrl:function(){return this.$store.state.logoUrl},progress:function(){if(this.currentIndex===this.imageProgress.index){if(this.imageProgress.progress.includes(".")){return n()(this.imageProgress,{progress:this.imageProgress.progress.split(".")[0]+"%"})}return this.imageProgress}return{uploading:!1,progress:"0",index:0}}},mounted:function(){if(!this.imageMessage.file.url.includes("blob:")){var e=this.nim.viewImageQuality({url:this.imageMessage.file.url,quality:40});this.imageMessage.file.url=e}this.imageNum=this.imageMessage.file.url},methods:{showBigImg:function(e,t){var a=this;this.showDeleteMsg=!1;var s={imgBlob:function(){var e=[];return a.imageList.forEach(function(t,a){e.push({blob:t})}),e}(),indexNum:this.imageList.indexOf(this.imageNum)};this.$router.push({name:"showBigImg",params:s})},longTouchHandler:function(){this.showDeleteMsg=!0,this.$emit("longTouchEmitHandler")},deleteMsgEvent:function(){this.showDeleteMsg=!1,console.log("image组件里的我要删除"),this.$emit("deleteMsgEvent")}},props:{imageMessage:{type:Object},nim:{type:Object},imageList:{type:Array},imageProgress:{type:Object},currentIndex:{type:Number},deleteMsgIndex:{type:Number},targetData:{type:Object},userData:{type:Object}}}},1251:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{directives:[{name:"touch",rawName:"v-touch:long.stop",value:e.longTouchHandler,expression:"longTouchHandler",arg:"long",modifiers:{stop:!0}}],staticClass:"main-message-box"},[s("article",{staticClass:"main-message-box-item",class:{"my-message":e.imageMessage.from===e.userData.account,"others-message":e.imageMessage.from===e.targetData.account},attrs:{"data-clientid":e.imageMessage.idClient}},[e.imageMessage.from===e.targetData.account?s("figure",{staticClass:"main-message-img"},[s("img",{attrs:{src:a(233),alt:""}})]):e._e(),e._v(" "),e._m(0,!1,!1),e._v(" "),s("figcaption",{staticClass:"main-message-content image-message"},[s("transition",{attrs:{name:"fade"}},[e._v("===userData.account>撤回")]),e._v(" "),e.progress.uploading?s("section",{staticClass:"middle-tip-box"},[s("figure",{staticClass:"middle-tip-box-text"},[s("img",{staticClass:"notShow",attrs:{src:"//m.allinmed.cn/image/img00/patientConsult/symptom_photo_loading@2x.png",alt:"loading..."}}),e._v(" "),s("figcaption",{staticClass:"progress"},[s("p",[e._v(e._s(e.progress.progress))])])])]):e._e(),e._v(" "),s("img",{directives:[{name:"touch",rawName:"v-touch:tap.stop.prevent",value:e.showBigImg,expression:"showBigImg",arg:"tap",modifiers:{stop:!0,prevent:!0}}],staticClass:"im-image",staticStyle:{"border-radius":"0.28rem"},attrs:{src:e.imageMessage.file.url,alt:""}})],1),e._v(" "),e.imageMessage.from===e.userData.account?s("figure",{staticClass:"main-message-img"},[s("img",{attrs:{src:e.logoUrl,alt:""}})]):e._e()])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("i",{staticClass:"fail-button",staticStyle:{display:"none"}},[a("img",{attrs:{src:"/image/imScene/error_tips.png",alt:""}})])}]}},1252:function(e,t,a){function s(e){a(1253)}var n=a(2)(a(1254),a(1255),s,null,null);e.exports=n.exports},1253:function(e,t){},1254:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mounted:function(){},methods:{transformTimeStamp:function(e){var t=function(e){return e>9?e:"0"+e},a=function(e){var a=new Date(e);return{y:a.getFullYear(),m:a.getMonth()+1,dd:a.getDate(),h:a.getHours(),mm:t(a.getMinutes())}},s="",n=(new Date).getTime();return a(e).y+"-"+a(e).m+"-"+a(e).dd==a(n).y+"-"+a(n).m+"-"+a(n).dd?s=a(e).h+":"+a(e).mm:a(e).y===a(n).y?s=a(e).m+"月"+a(e).dd+"日  "+a(e).h+":"+a(e).mm:a(e).y!==a(n).y&&(s=a(e).y+"年"+a(e).m+"月"+a(e).dd+"日  "+a(e).h+":"+a(e).mm),s}},props:{msg:{type:Object},beginTimestamp:{type:Number}}}},1255:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return"custom"===e.msg.type&&JSON.parse(e.msg.content).type.includes("new-")?e._e():a("p",{staticClass:"time-stamp"},[e._v(e._s(e.transformTimeStamp(e.msg.time)))])},staticRenderFns:[]}},1256:function(e,t,a){function s(e){a(1257)}var n=a(2)(a(1258),a(1259),s,"data-v-4c8774f2",null);e.exports=n.exports},1257:function(e,t){},1258:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(7),n=a.n(s),o=a(3),i=a(137),r=a(9),c={getCheckSuggestion:"/mcall/patient/case/diagnosis/v1/getMapList/",getRecommedDoctor:"/mcall/patient/recommend/v1/getMapList/",getToken:"/mcall/im/interact/v1/refreshToken/",getCurrentByCustomerId:"/mcall/customer/advice/setting/v1/getCurrentByCustomerId/"};t.default={data:function(){return{message:{},suggestResponse:!1,doctorResponse:!1,checkSuggestObj:{allData:[],moreBoxShow:!1,moreData:!1,tempData:[],lessData:[],initNum:5,pageNum:5,position:0,hasPosition:!1},treatmentObj:{allData:[],moreBoxShow:!1,moreData:!1,tempData:[],lessData:[],initNum:5,pageNum:5,position:0,hasPosition:!1},knowledgeObj:{allData:[],moreBoxShow:!1,moreData:!1,tempData:[],lessData:[],initNum:5,pageNum:5,position:0,hasPosition:!1},doctorObj:{allData:[],moreBoxShow:!1,moreData:!1,tempData:[],lessData:[],initNum:3,pageNum:5,position:0,hasPosition:!1}}},mounted:function(){this.message=this.previewSuggestionMessage.data.length?this.previewSuggestionMessage.data[0]:this.previewSuggestionMessage.data,this.initData()},methods:{getSpsData:function(e){return"push_massage_id:"+e.customerId+";keyword:"+e.fullName},goToHref:function(){window.location.href="/pages/myServices/check_suggestion.html?caseId="+this.message.caseId+"&diagnosisId="+this.message.diagnosisId+"&patientCustomerId="+o.a.getPara().patientCustomerId+"&patientId="+o.a.getPara().patientId+"&caseType=0&shuntCustomerId="+o.a.getPara().shuntCustomerId},goKnowledgeDetail:function(e){this.$router.push({name:"knowledgeDetail",params:this.knowledgeObj.allData[e]})},initData:function(){var e=this;e.uploadVideo=!0,o.a.ajax({url:c.getCheckSuggestion,method:"POST",data:{caseId:e.message.caseId,diagnosisId:e.message.diagnosisId,diagnosisType:1,isValid:1,firstResult:0,maxResult:1,sortType:1},beforeSend:function(){},done:function(t){if(t.responseObject.responseData.dataList){var a=t.responseObject.responseData.dataList[0];(a.checkList&&a.checkList.length>0||a.inspectionList&&a.inspectionList.length>0)&&(a.checkList.length>0&&(e.checkSuggestObj.allData=e.checkSuggestObj.allData.concat(a.checkList)),a.inspectionList.length>0&&(e.checkSuggestObj.allData=e.checkSuggestObj.allData.concat(a.inspectionList)),e.checkSuggestObj.allData.map(function(e,t){e.adviceId=e.checkId||e.inspectionId,e.adviceName=e.checkName||e.inspectionName,e.adviceTypeisAttachment=e.isAttachment,e.adviceType="3"}),e.checkSuggestData("checkSuggestObj")),a.knowledgeList&&a.knowledgeList.length>0&&(e.knowledgeObj.allData=a.knowledgeList,e.checkSuggestData("knowledgeObj")),a.treatmentList&&a.treatmentList.length>0&&(e.treatmentObj.allData=a.treatmentList,e.checkSuggestData("treatmentObj"))}e.suggestResponse=!0,e.checkResponse()},fail:function(){e.suggestResponse=!0,e.checkResponse()}}),o.a.ajax({url:c.getRecommedDoctor,method:"POST",data:{diagnosisId:e.message.diagnosisId,caseId:o.a.getPara().caseId,patientId:o.a.getPara().patientId,isValid:1,firstResult:0,maxResult:9999,sortType:1,logoUseFlag:3},beforeSend:function(){},done:function(t){t.responseObject.responseData.dataList&&(e.doctorObj.allData=t.responseObject.responseData.dataList,console.log(t.responseObject.responseData.dataList),e.checkSuggestData("doctorObj")),e.doctorResponse=!0,e.$nextTick(function(){e.checkResponse()})},fail:function(){e.doctorResponse=!0,e.$nextTick(function(){e.checkResponse()})}})},checkResponse:function(){var e=this;e.suggestResponse&&e.doctorResponse&&i.a.commit("addRenderSuggestionNum"),e.$store.state.previewSuggestionNum<=e.$store.state.renderSuggestionNum&&e.$nextTick(function(){if(o.a.getPara().suggest){var t=$(e.$el.querySelectorAll(".doctor-box")[e.$el.querySelectorAll(".doctor-box").length-1]);e.scrollElement(t.closest(".main-message-wrapper")[0].offsetTop+t.closest(".main-message-box")[0].offsetTop)}else console.log("医生数据完成"),e.scrollToBottom()})},checkSuggestData:function(e){var t=this;t[e].allData.length>t[e].initNum?(t[e].moreBoxShow=!0,t[e].lessData=t[e].allData.slice(0,t[e].initNum),t[e].tempData=t[e].lessData,t[e].moreData=!0):(t[e].moreBoxShow=!1,t[e].tempData=t[e].allData)},moreDataShow:function(e,t){var a=this;console.log(t),a[e].allData.length-a[e].tempData.length>a[e].pageNum?a[e].tempData=a[e].allData.slice(0,a[e].pageNum+a[e].tempData.length):(a[e].moreData=!1,a[e].tempData=a[e].allData)},goDoctorHome:function(e){var t=this;window.location.href="/dist/doctorHome.html?doctorCustomerId="+t.doctorObj.allData[e].customerId+"&patientId="+o.a.getPara().patientId+"&caseId="+o.a.getPara().caseId+"&patientCustomerId="+o.a.getPara().patientCustomerId},goConsult:function(e,t){var a=this;a.$emit("update:payPopupShow",!0),r.a.weChatJudge(function(){console.log("这是微信")},function(){localStorage.setItem("mPayDoctorDetails",n()({customerId:a.doctorObj.allData[e].customerId,nick:a.doctorObj.allData[e].fullName,payType:t}))}),i.a.commit("setTargetMsg",{customerId:a.doctorObj.allData[e].customerId}),i.a.commit("setTargetMsg",{nick:a.doctorObj.allData[e].fullName}),i.a.commit("setTargetMsg",{payType:t})},lessDataShow:function(e,t){var a=this;a[e].moreData=!0,a[e].hasPosition=!1,a[e].tempData=a[e].lessData,a.$nextTick(function(){a.scrollElement($(t.srcElement).closest(".main-message-wrapper")[0].offsetTop+$(t.srcElement).closest(".main-message-box")[0].offsetTop)})},goToUpload:function(){localStorage.removeItem("upload"),this.$router.push({name:"UploadList",params:this.checkSuggestObj.allData})}},filters:{ellipsis:function(e,t){if(!e)return"";for(var a="",s=0,n=0;n<e.length&&(e.charCodeAt(n)>128?s+=2:s++,s<=t);n++)a=a.concat(e[n]);return s>t&&(a+="..."),a}},props:{previewSuggestionMessage:{type:Object},payPopupShow:{type:Boolean},scrollToBottom:{type:Function,default:null},scrollElement:{type:Function,default:null},refreshScroll:{type:Function,default:null}}}},1259:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[e.doctorObj.allData.length?a("section",{staticClass:"main-message-box",attrs:{"data-alcode-mod":"716"}},[a("article",{staticClass:"doctor-box"},[e._m(0,!1,!1),e._v(" "),a("section",{staticClass:"doctor-content"},[a("section",{staticClass:"doctor-list"},e._l(e.doctorObj.tempData,function(t,s){return a("section",{staticClass:"doctor-item"},[a("section",{staticClass:"doctor-item-top",on:{click:function(t){e.goDoctorHome(s)}}},[a("figure",{staticClass:"doctor-item-img"},[a("img",{attrs:{src:t.logoUrl,alt:""}})]),e._v(" "),a("figcaption",{staticClass:"doctor-item-info"},[a("p",{staticClass:"doctor-base-info"},[a("span",{staticClass:"doctor-name"},[e._v(e._s(e._f("ellipsis")(t.fullName,8)))]),e._v(" "),a("span",{staticClass:"doctor-post"},[e._v(e._s(t.medicalTitle))])]),e._v(" "),a("p",{staticClass:"doctor-hospital"},[e._v(e._s(t.hospitalName))]),e._v(" "),a("p",{staticClass:"doctor-good"},[e._v("擅长： "+e._s(t.illnessNameList))])])]),e._v(" "),t.isFreeTimes?a("section",{staticClass:"doctor-item-bottom"},["1"===t.adviceStatus&&t.adviceNum&&!t.isRefuse?a("span",{staticClass:"go-consult",attrs:{"data-alcode":"e132","sps-data":e.getSpsData(t)},on:{click:function(t){e.goConsult(s,"free")}}},[e._v("免费问诊")]):e._e(),e._v(" "),a("span",{staticClass:"free-consult"},[e._v("免费问诊")]),e._v(" "),a("span",{staticClass:"free-price"},[e._v(e._s(t.generalPrice)+"元")])]):t.isFreeTimes?e._e():a("section",{staticClass:"doctor-item-bottom"},["1"===t.adviceStatus&&t.adviceNum&&!t.isRefuse?a("span",{staticClass:"go-consult",attrs:{"data-alcode":"e132","sps-data":e.getSpsData(t)},on:{click:function(t){e.goConsult(s,"pay")}}},[e._v("去问诊")]):e._e(),e._v(" "),a("span",{staticClass:"general-money"},[e._v(e._s(t.generalPrice)+"元")])])])})),e._v(" "),e.doctorObj.moreBoxShow?a("section",{staticClass:"more-box doctor-more-box"},[e.doctorObj.moreData?a("span",{staticClass:"more-box-btn more-btn",on:{click:function(t){e.moreDataShow("doctorObj",t)}}},[e._v("查看更多")]):e._e(),e._v(" "),e.doctorObj.moreData?e._e():a("span",{staticClass:"more-box-btn less-btn",on:{click:function(t){e.lessDataShow("doctorObj",t)}}},[e._v("收起")])]):e._e()])])]):e._e(),e._v(" "),e.knowledgeObj.allData.length?a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"knowledge-box"},[a("header",{staticClass:"knowledge-title"},[e._v("以下骨科知识有助于您早日康复，点击查看详情")]),e._v(" "),a("section",{staticClass:"knowledge-bg"}),e._v(" "),a("section",{staticClass:"knowledge-content"},[a("ul",{staticClass:"knowledge-list"},e._l(e.knowledgeObj.tempData,function(t,s){return a("li",{staticClass:"knowledge-item",on:{click:function(t){e.goKnowledgeDetail(s)}}},[a("span",{staticClass:"knowledge-name"},[e._v(e._s(t.knowledgeName))]),e._v(" "),a("span",{staticClass:"knowledge-detail"},[e._v("详情")])])})),e._v(" "),e.knowledgeObj.moreBoxShow?a("section",{staticClass:"more-box"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.knowledgeObj.moreData,expression:"knowledgeObj.moreData"}],staticClass:"more-box-btn more-btn",on:{click:function(t){t.stopPropagation(),e.moreDataShow("knowledgeObj",t)}}},[e._v("查看更多")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.knowledgeObj.moreData,expression:"!knowledgeObj.moreData"}],staticClass:"more-box-btn less-btn",on:{click:function(t){t.stopPropagation(),e.lessDataShow("knowledgeObj",t)}}},[e._v("收起")])]):e._e()])])]):e._e(),e._v(" "),e.treatmentObj.allData.length?a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"check-suggest-box"},[a("header",{staticClass:"check-suggest-title"},[e._v("根据您的情况，为您推荐以下康复方式，请务必在医生的指导下进行")]),e._v(" "),a("section",{staticClass:"check-suggest-bg"}),e._v(" "),a("section",{staticClass:"check-suggest-content"},[a("ul",{staticClass:"check-suggest-list"},e._l(e.treatmentObj.tempData,function(t){return a("li",{staticClass:"check-suggest-item"},[a("span",[e._v(e._s(t.treatmentName))])])})),e._v(" "),e.treatmentObj.moreBoxShow?a("section",{staticClass:"more-box"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.treatmentObj.moreData,expression:"treatmentObj.moreData"}],staticClass:"more-box-btn more-btn",on:{click:function(t){t.stopPropagation(),e.moreDataShow("treatmentObj",t)}}},[e._v("查看更多")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.treatmentObj.moreData,expression:"!treatmentObj.moreData"}],staticClass:"more-box-btn less-btn",on:{click:function(t){t.stopPropagation(),e.lessDataShow("treatmentObj",t)}}},[e._v("收起")])]):e._e()])])]):e._e(),e._v(" "),e.checkSuggestObj.allData.length?a("section",{staticClass:"main-message-box",attrs:{"data-alcode-mod":"715"}},[a("article",{staticClass:"check-suggest-box"},[a("header",{staticClass:"check-suggest-title"},[e._v("为确保分诊准确和专家问诊的效率，建议您进行以下检查并上传检查资料，分诊计时已停止，有关检查疑问您可继续向分诊医生询问，资料上传后分诊医生将继续为您服务。")]),e._v(" "),a("section",{staticClass:"check-suggest-bg"}),e._v(" "),a("section",{staticClass:"check-suggest-content"},[a("ul",{staticClass:"check-suggest-list"},e._l(e.checkSuggestObj.tempData,function(t){return a("li",{staticClass:"check-suggest-item",attrs:{"data-adviceid":t.adviceId,"data-advicetype":t.adviceType}},[a("span",[e._v(e._s(t.adviceName))])])})),e._v(" "),e.checkSuggestObj.moreBoxShow?a("section",{staticClass:"more-box"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.checkSuggestObj.moreData,expression:"checkSuggestObj.moreData"}],staticClass:"more-box-btn more-btn",on:{click:function(t){t.stopPropagation(),e.moreDataShow("checkSuggestObj",t)}}},[e._v("查看更多")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.checkSuggestObj.moreData,expression:"!checkSuggestObj.moreData"}],staticClass:"more-box-btn less-btn",on:{click:function(t){t.stopPropagation(),e.lessDataShow("checkSuggestObj",t)}}},[e._v("收起")])]):e._e(),e._v(" "),a("section",{staticClass:"check-suggest-btn",attrs:{"data-alcode":"e129","data-role":"videoTriage"},on:{click:e.goToUpload}},[e._v("\n          上传检查资料\n        ")])])])]):e._e()])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"doctor-header"},[a("h3",{staticClass:"doctor-title"},[e._v("匹配医生")]),e._v(" "),a("p",{staticClass:"doctor-introduce"},[a("span",[e._v("直达三甲名医")]),a("span",[e._v("超时未回复全额退款")])])])}]}},126:function(e,t){e.exports="data:image/png;base64,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"},1260:function(e,t,a){function s(e){a(1261)}var n=a(2)(a(1262),a(1263),s,"data-v-4e2c58c6",null);e.exports=n.exports},1261:function(e,t){},1262:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(73),n=a.n(s),o=a(3);t.default={data:function(){return{moreBoxShow:!1,moreData:!1,tempSuggest:[],moreSuggest:[],lessSuggest:[],position:0,hasPosition:!1,paramsData:[]}},mounted:function(){console.log(this.checkSuggestMessage),this.initData()},methods:{initData:function(){var e=this;e.paramsData=e.checkSuggestMessage.data,e.paramsData.map(function(e,t){n()(e,{adviceType:3})}),e.checkSuggestMessage.data.length>5?(e.moreBoxShow=!0,e.moreSuggest=e.checkSuggestMessage.data,e.lessSuggest=e.checkSuggestMessage.data.slice(0,5),e.tempSuggest=e.lessSuggest,e.moreData=!0):(e.moreBoxShow=!1,e.tempSuggest=e.checkSuggestMessage.data),e.$nextTick(function(){o.a.getPara().suggest})},moreDataShow:function(e){var t=this;t.moreData=!1,t.tempSuggest=t.moreSuggest,t.$nextTick(function(){t.refreshScroll()})},lessDataShow:function(e){var t=this;t.moreData=!0,t.tempSuggest=t.lessSuggest,t.$nextTick(function(){t.scrollElement(e.srcElement.parentElement.parentElement.parentElement)})},goToUpload:function(){localStorage.removeItem("upload"),this.$router.push({name:"UploadList",params:this.paramsData})}},props:{checkSuggestMessage:{type:Object},scrollToBottom:{type:Function,default:null},scrollElement:{type:Function,default:null},refreshScroll:{type:Function,default:null}}}},1263:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-alcode-mod":"715"}},[a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"check-suggest-box"},[a("header",{staticClass:"check-suggest-title"},[e._v("为确保分诊准确和专家问诊的效率，建议您进行以下检查并上传检查资料，分诊计时已停止，有关检查疑问您可继续向分诊医生询问，资料上传后分诊医生将继续为您服务。")]),e._v(" "),a("section",{staticClass:"check-suggest-bg"}),e._v(" "),a("section",{staticClass:"check-suggest-content"},[a("ul",{staticClass:"check-suggest-list"},e._l(e.tempSuggest,function(t,s){return a("li",{key:s,staticClass:"check-suggest-item",attrs:{"data-adviceid":t.adviceId,"data-advicetype":t.adviceType,scrollToBottom:e.scrollToBottom,scrollElement:e.scrollElement,refreshScroll:e.refreshScroll}},[a("span",[e._v(e._s(t.adviceName))])])})),e._v(" "),e.moreBoxShow?a("section",{staticClass:"more-box"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.moreData,expression:"moreData"}],staticClass:"more-box-btn more-btn",on:{click:function(t){e.moreDataShow(t)}}},[e._v("查看更多")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!e.moreData,expression:"!moreData"}],staticClass:"more-box-btn less-btn",on:{click:function(t){e.lessDataShow(t)}}},[e._v("收起")])]):e._e(),e._v(" "),a("section",{staticClass:"check-suggest-btn",attrs:{"data-alcode":"e129","data-role":"videoTriage"},on:{click:e.goToUpload}},[e._v("\n        上传检查资料\n      ")])])])])])},staticRenderFns:[]}},1264:function(e,t,a){function s(e){a(1265)}var n=a(2)(a(1266),a(1267),s,"data-v-a8a30744",null);e.exports=n.exports},1265:function(e,t){},1266:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){console.log(this.triageMessage)},methods:{goToUpload:function(e){sessionStorage.removeItem("triageRoute"),this.$router.push({name:"TriageDetail",params:this.triageMessage.data})}},props:{triageMessage:{type:Object}}}},1267:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"video-triage-box"},[a("figure",{staticClass:"video-triage-content"},[a("span",[e._v(e._s(e.triageMessage.data.content))])]),e._v(" "),a("figcaption",{staticClass:"video-triage-btn",attrs:{"data-role":"videoTriage"},on:{click:function(t){e.goToUpload(e.triageMessage.data.type)}}},[e._v("\n              上传"+e._s(1==e.triageMessage.data.type?"视频":"照片")+"\n    ")])])])},staticRenderFns:[]}},1268:function(e,t,a){function s(e){a(1269)}var n=a(2)(a(1270),a(1271),s,null,null);e.exports=n.exports},1269:function(e,t){},127:function(e,t){e.exports="data:image/png;base64,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"},1270:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{tipsContent:""}},mounted:function(){switch(this.tipsType){case 4:this.tipsContent="您已重新购买分诊医生的问诊，可重新提问";break;case 5:this.tipsContent="分诊医生的职责是为您完善就诊病历信息，诊疗意见请在分诊后与主诊专家详细沟通。"}},methods:{},props:{tipsType:{type:Number}}}},1271:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"main-message-box grey-tips"},[a("figcaption",{staticClass:"first-message"},[a("p",[e._v(e._s(e.tipsContent))])])]),e._v(" "),5==e.tipsType?a("p",{staticClass:"receive-treatment"},[a("span",[e._v("问诊已结束")])]):e._e()])},staticRenderFns:[]}},1272:function(e,t,a){function s(e){a(1273)}var n=a(2)(a(1274),a(1275),s,null,null);e.exports=n.exports},1273:function(e,t){},1274:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},1275:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0,!1,!1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("section",{staticClass:"main-message-box grey-tips"},[a("figcaption",{staticClass:"first-message"},[a("p",[e._v("您已重新购买分诊服务，请您继续提问")])])])])}]}},128:function(e,t){e.exports="data:image/png;base64,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"},129:function(e,t){e.exports="data:image/png;base64,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"},1296:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"main-inner ev-fileUpHide",staticStyle:{overflow:"auto"}},[a("transition",{attrs:{name:"fadeDown"}},[e.lastTimeShow?a("article",{staticClass:"main-message-time"},[a("p",{staticClass:"residue-time"},[e._v("24小时内免费，剩余时间"),a("span",[e._v(e._s(e.lastTimeText))])]),e._v(" "),a("p",{staticClass:"service-time"},[a("span",{staticClass:"service-time-top"},[e._v("服务时间")]),e._v(" "),a("span",{staticClass:"service-time-bottom"},[e._v("09: 00-22: 00")])])]):e._e()]),e._v(" "),a("section",{ref:"wrapper",staticClass:"main-message",class:{"padding-top":e.lastTimeShow,"padding-bottom":e.inputBoxShow}},[a("transition-group",{staticStyle:{"z-index":"0"},attrs:{name:"fadeDown",tag:"section"}},[e._l(e.msgList,function(t,s){return a("section",{key:s,staticClass:"main-message-wrapper"},[e.getTimeStampShowFlag(t,s)?a("p",{staticClass:"time-stamp"},[e._v("\n          "+e._s(e.transformTimeStamp(t.time)))]):e._e(),e._v(" "),"custom"===t.type&&"medicalReport"===JSON.parse(t.content).type?a("MedicalReport",{ref:"medicalReport",refInFor:!0,attrs:{medicalReportMessage:JSON.parse(t.content)}}):e._e(),e._v(" "),"custom"===t.type&&"videoTriage"===JSON.parse(t.content).type?a("Triage",{attrs:{triageMessage:JSON.parse(t.content)}}):e._e(),e._v(" "),"custom"===t.type&&"previewSuggestion"===JSON.parse(t.content).type?a("PreviewSuggestion",{attrs:{previewSuggestionMessage:JSON.parse(t.content),payPopupShow:e.payPopupShow,scrollToBottom:e.scrollToBottom,scrollElement:e.scrollElement,refreshScroll:e.refreshScroll},on:{"update:payPopupShow":function(t){e.payPopupShow=t}}}):e._e(),e._v(" "),"custom"===t.type&&"payFinishTips"===JSON.parse(t.content).type?a("PayFinishTips"):e._e(),e._v(" "),"custom"===t.type&&"checkSuggestion"===JSON.parse(t.content).type?a("CheckSuggest",{attrs:{checkSuggestMessage:JSON.parse(t.content),scrollToBottom:e.scrollToBottom,scrollElement:e.scrollElement,refreshScroll:e.refreshScroll}}):e._e(),e._v(" "),"text"===t.type&&t.text?a("ContentText",{attrs:{contentMessage:t,userData:e.userData,targetData:e.targetData,currentIndex:s,deleteMsgIndex:e.deleteMsgIndex},on:{deleteMsgEvent:function(a){e.deleteMsgEvent(t)},longTouchEmitHandler:function(t){e.deleteMsgIndex=s}}}):e._e(),e._v(" "),"file"!==t.type&&"image"!==t.type||!t.file?e._e():a("ImageContent",{ref:"bigImg",refInFor:!0,attrs:{imageMessage:t,nim:e.nim,userData:e.userData,targetData:e.targetData,imageList:e.imageList,imageProgress:e.imageProgress,currentIndex:s,deleteMsgIndex:e.deleteMsgIndex},on:{deleteMsgEvent:function(a){e.deleteMsgEvent(t)},longTouchEmitHandler:function(t){e.deleteMsgIndex=s}}}),e._v(" "),"custom"===t.type&&"triageSendTips"===JSON.parse(t.content).type?a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"main-message-box-item my-message",attrs:{"data-clientid":t.idClient}},[a("i",{staticClass:"fail-button",staticStyle:{display:"none"}},[a("img",{attrs:{src:"/image/imScene/error_tips.png",alt:""}})]),e._v(" "),a("figcaption",{staticClass:"main-message-content"},[a("p",[e._v("患者已上传视诊资料")])]),e._v(" "),t.from===e.userData.account?a("figure",{staticClass:"main-message-img"},[a("img",{attrs:{src:e.logoUrl,alt:""}})]):e._e()])]):e._e(),e._v(" "),"custom"===t.type&&"checkSuggestSendTips"===JSON.parse(t.content).type?a("section",{staticClass:"main-message-box"},[a("article",{staticClass:"main-message-box-item my-message",attrs:{"data-clientid":t.idClient}},[a("i",{staticClass:"fail-button",staticStyle:{display:"none"}},[a("img",{attrs:{src:"/image/imScene/error_tips.png",alt:""}})]),e._v(" "),a("figcaption",{staticClass:"main-message-content"},[a("p",[e._v("患者已上传检查资料")])]),e._v(" "),t.from===e.userData.account?a("figure",{staticClass:"main-message-img"},[a("img",{attrs:{src:e.logoUrl,alt:""}})]):e._e()])]):e._e(),e._v(" "),"custom"===t.type&&"notification"===JSON.parse(t.content).type&&4==JSON.parse(t.content).data.actionType?a("MiddleTips",{attrs:{tipsType:4}}):e._e(),e._v(" "),"custom"===t.type&&"notification"===JSON.parse(t.content).type&&5==JSON.parse(t.content).data.actionType?a("MiddleTips",{attrs:{tipsType:5}}):e._e(),e._v(" "),a("div",{key:0,attrs:{"data-alcode-mod":"717"}},[e.showFlagDeleteTips(t)?a("section",{key:0,staticClass:"main-message-box grey-tips"},[a("figcaption",{staticClass:"first-message"},[a("p",[e._v(e._s("1_doctor00001"===t.from?"分诊医生":"您")+"撤回了一条消息")])])]):e._e()])],1)}),e._v(" "),a("div",{key:0,attrs:{"data-alcode-mod":"717"}},[e.consultTipsShow?a("section",{key:0,staticClass:"main-message-box grey-tips"},[a("figcaption",{staticClass:"first-message",attrs:{"data-alcode":"e130"},on:{click:function(t){e.getConsultPrice()}}},[a("p",[e._v("分诊服务已结束，如需帮助，请选择")]),e._v(" "),a("p",{staticClass:"go-consult"},[a("span",[e._v("继续问诊")])])])]):e._e()])],2)],1),e._v(" "),e.payPopupShow?a("payPopup",{attrs:{payPopupShow:e.payPopupShow,payPopupParams:e.payPopupDate},on:{paySuccess:e.toUpLoadTimes,"update:payPopupShow":function(t){e.payPopupShow=t}}}):e._e(),e._v(" "),a("transition",{attrs:{name:"fadeUp"}},[e.inputBoxShow?a("footer",{class:e.footerPosition},[a("section",{staticClass:"main-input-box-plus"},[a("i",{staticClass:"icon-im-plus"}),e._v(" "),e.isIos&&e.inputFlag?a("input",{ref:"imageSender",attrs:{type:"file",multiple:"",id:"ev-file-send"},on:{change:function(t){e.sendFile(t)}}}):e._e(),e._v(" "),!e.isIos&&e.inputFlag?a("input",{ref:"imageSender",attrs:{type:"file",multiple:"",id:"ev-file-send",capture:"camera",accept:"image/*"},on:{change:function(t){e.sendFile(t)}}}):e._e()]),e._v(" "),a("figure",{staticClass:"main-input-box-textarea-inner"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.sendTextContent,expression:"sendTextContent"}],staticClass:"main-input-box-textarea",attrs:{rows:"1"},domProps:{value:e.sendTextContent},on:{focus:function(t){e.focusFn()},blur:function(t){e.blurFn()},click:e.scrollToBottom,input:[function(t){t.target.composing||(e.sendTextContent=t.target.value)},e.inputLimit],keypress:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;t.stopPropagation(),e.autoSizeTextarea()}}}),e._v(" "),a("p",{staticClass:"main-input-box-send",class:{on:e.textLength.length},on:{click:e.sendMessage}},[e._v("发送")])])]):e._e()]),e._v(" "),e.noWXPayShow?a("confirm",{attrs:{confirmParams:{ensure:"支付成功",cancel:"支付失败",title:"请确认微信支付是否已经完成"}},on:{cancelClickEvent:function(t){e.noWXPayShow=!1,e.isClick=!1,e.localStorage.removeItem("payOk")},ensureClickEvent:function(t){e.viewPayResult()}}}):e._e(),e._v(" "),a("loading",{attrs:{show:e.finish}}),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.toastShow?a("Toast",{attrs:{content:e.toastTips}}):e._e()],1)],1)},staticRenderFns:[]}},1297:function(e,t,a){function s(e){a(1298)}var n=a(2)(a(1299),a(1300),s,null,null);e.exports=n.exports},1298:function(e,t){},1299:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),n={getInquiryPage:"/mcall/customer/patient/case/v1/getMapById/"};t.default={data:function(){return{finish:!1,patientCasemap:{patientName:"",caseMain:"",attachmentList:""},partName:"",logoUrl:"",remarkContent:"",illnessTime:"",caseTime:"",heavyTime:"",treatmentName:"",illnessName:"",takeMedicine:"",complication:"",resultMainList:[],imageList1:[],imageList2:[],symptomDescription:"",acheType:"",VASGrade:""}},activated:function(){window.scroll(0,0)},mounted:function(){this.getMedicalReport(),s.a.forbidShare()},computed:{},methods:{getMedicalReport:function(){var e=this;s.a.ajax({url:n.getInquiryPage,method:"POST",data:{caseId:s.a.getPara().caseId,attUseFlag:1,isOrder:0},beforeSend:function(t){e.finish=!0},done:function(t){if(t.responseObject&&t.responseObject.responseData){t.responseObject.responseData.dataList[0];e.patientCasemap=t.responseObject.responseData.dataList[0].patientCasemap,e.resultMainList=t.responseObject.responseData.dataList[0].resultMainList,e.resultMainList[0].symptomOptions.forEach(function(t){t.optionDesc.length>0?e.symptomDescription+=t.optionDesc+"、":e.symptomDescription+=t.optionName+"、"}),e.symptomDescription=e.symptomDescription.substring(0,e.symptomDescription.length-1),e.resultMainList[0].symptomOptions[0].refQuestionList.length&&(e.acheType=e.resultMainList[0].symptomOptions[0].refQuestionList[0].symptomOptions[0].optionName,e.VASGrade=e.resultMainList[0].symptomOptions[0].refQuestionList[1].symptomOptions[0].optionName+e.resultMainList[0].symptomOptions[0].refQuestionList[1].symptomOptions[0].optionDesc);var a=e.patientCasemap.caseTime.split(" ")[0];e.caseTime=a.split("-")[0]+"年"+a.split("-")[1]+"月"+a.split("-")[2]+"日",e.illnessTime=(e.resultMainList[1].symptomOptions[0].optionDesc&&e.resultMainList[1].symptomOptions[0].optionDesc.length>0?e.resultMainList[1].symptomOptions[0].optionDesc:e.resultMainList[1].symptomOptions[0].optionName)||"未填写",e.heavyTime=(e.resultMainList[2].symptomOptions[0].optionDesc&&e.resultMainList[2].symptomOptions[0].optionDesc.length>0?e.resultMainList[2].symptomOptions[0].optionDesc:e.resultMainList[2].symptomOptions[0].optionName)||"未填写",e.partName=e.resultMainList[0].partName,e.complication=e.patientCasemap.caseMain.caseAlong||"未填写",e.treatmentName=e.patientCasemap.treatmentName||"未填写",e.illnessName=e.patientCasemap.illnessName||"未填写",e.takeMedicine=e.patientCasemap.takeMedicine||"未填写",e.patientCasemap.attachmentList.forEach(function(t,a){0==t.caseAttSource?e.imageList1.push(t.caseAttUrl):e.imageList2.push(t.caseAttUrl)}),e.getLogoUrl()}e.finish=!1}})},showBigImg:function(e,t,a){var s=this,n={imgBlob:function(){var e=[];return s["imageList"+a].forEach(function(t,a){e.push({blob:t})}),e}(),indexNum:t};this.$router.push({name:"showBigImg",params:n})},getLogoUrl:function(){var e=this.patientCasemap.sexName,t=parseInt(this.patientCasemap.age),s="";t<=12?s=a(126):t>12&&t<=59?s=a("男"===e?127:128):t>=60&&(s=a("男"===e?129:130)),this.logoUrl=s}},props:{}}},13:function(e,t,a){function s(e){a(34)}var n=a(2)(a(35),a(36),s,null,null);e.exports=n.exports},130:function(e,t){e.exports="data:image/png;base64,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"},1300:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"medical-report-detail"},[a("section",{staticClass:"tc-caseContentBox"},[a("section",{staticClass:"tc-baseInfo"},[a("ul",{staticClass:"tc-baseInfoList"},[a("li",{staticClass:"tc-baseInfoItem"},[a("div",{staticClass:"tc-baseInfoItemLeft"},[a("img",{attrs:{src:e.logoUrl,alt:""}})]),e._v(" "),a("div",{staticClass:"tc-baseInfoItemRight"},[a("span",{staticClass:"tc-baseInfoName"},[e._v(e._s(e.patientCasemap.patientName.length>5?e.patientCasemap.patientName.substring(0,5)+"...":e.patientCasemap.patientName))]),e._v(" "),a("span",{staticClass:"tc-baseInfoSex"},[e._v(" "+e._s(e.patientCasemap.sexName))]),e._v(" "),a("span",{staticClass:"tc-baseInfoAge"},[e._v(e._s(e.patientCasemap.age)+"  岁")])])]),e._v(" "),a("li",{staticClass:"tc-baseInfoItem"},[a("div",{staticClass:"tc-baseInfoItemLeft"},[e._v("问诊日期")]),e._v(" "),a("div",{staticClass:"tc-baseInfoItemRight"},[e._v(e._s(e.caseTime))])])]),e._v(" "),a("section",{staticClass:"tc-baseInfoItem"},[a("div",{staticClass:"tc-baseInfoItemLeft"},[e._v("主诉")]),e._v(" "),a("div",{staticClass:"tc-baseInfoItemRight tc-recommendUserMain"},[e._v(e._s(e.patientCasemap.caseMain.caseMain))])])]),e._v(" "),a("section",{staticClass:"tc-caseDescribe tc-module"},[e._m(0,!1,!1),e._v(" "),a("ul",{staticClass:"tc-caseDescribeList"},[a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("不适部位")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.partName))])]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("症状描述")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.symptomDescription))])]),e._v(" "),e.acheType.length?a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("疼痛性质")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.acheType))])]):e._e(),e._v(" "),e.VASGrade.length?a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("VAS评分")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.VASGrade))])]):e._e(),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("持续时间")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.illnessTime))])]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("加重时间")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.heavyTime))])]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("其他症状")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.complication))])])])]),e._v(" "),a("section",{staticClass:"tc-caseDescribe tc-module"},[e._m(1,!1,!1),e._v(" "),a("ul",{staticClass:"tc-caseDescribeList"},[a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("曾就诊医院")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.treatmentName))])]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("确诊疾病")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.illnessName))])]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("检查资料")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(0===e.imageList1.length?"未填写":"  "))]),e._v(" "),0!==e.imageList1.length?a("ul",{staticClass:"uploadListsBox"},e._l(e.imageList1,function(t,s){return a("li",{on:{click:function(a){e.showBigImg(t,s,1)}}},[a("img",{attrs:{src:t}})])})):e._e()]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("患处照片")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(0===e.imageList2.length?"未填写":"  "))]),e._v(" "),0!==e.imageList2.length?a("ul",{staticClass:"uploadListsBox"},e._l(e.imageList2,function(t,s){return a("li",{on:{click:function(a){e.showBigImg(t,s,2)}}},[a("img",{attrs:{src:t}})])})):e._e()]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("服用药物")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.takeMedicine))])])])]),e._v(" "),a("section",{staticClass:"tc-caseDescribe tc-module"},[e._m(2,!1,!1),e._v(" "),a("ul",{staticClass:"tc-caseDescribeList"},[a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("患者所在地")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.patientCasemap.provinceName+" "+e.patientCasemap.cityName+" "+e.patientCasemap.districtName))])]),e._v(" "),a("li",{staticClass:"tc-caseDescribeItem"},[a("span",{staticClass:"tc-caseDescribeItemLeft"},[e._v("手机号码")]),e._v(" "),a("span",{staticClass:"tc-caseDescribeItemRight tc-noRevice"},[e._v(e._s(e.patientCasemap.mobile))])])])])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"tc-caseDescribeTitle title"},[a("h3",[e._v("症状描述")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"tc-caseDescribeTitle title"},[a("h3",[e._v("诊治情况")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"tc-caseDescribeTitle title"},[a("h3",[e._v("基本信息")])])}]}},1301:function(e,t,a){function s(e){a(1302)}var n=a(2)(a(1303),a(1306),s,"data-v-69e11ca9",null);e.exports=n.exports},1302:function(e,t){},1303:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(317),n=a.n(s),o=a(7),i=a.n(o),r=a(18),c=(a.n(r),a(3)),l=(a(137),a(20)),u=a.n(l),d=a(10),p=a.n(d),m=a(13),g=a.n(m),f=a(136),h="";h=navigator.userAgent.toLowerCase().includes("iphone")?"":"camera";var v={imgCreate:"/mcall/customer/patient/case/attachment/v1/create/",imgDelete:"/mcall/customer/patient/case/attachment/v1/update/",resetTime:"/mcall/customer/case/consultation/v1/updateFrequency/",updateCase:"/mcall/customer/patient/case/v1/update/",saveImage:"/mcall/customer/patient/case/attachment/v1/update/"},y=!0;t.default={data:function(){return{cameraType:h,isIos:navigator.userAgent.toLowerCase().includes("iphone"),leaveConfirm:!1,leaveConfirmParams:{},pageLeaveEnsure:!1,uploadList:[],imageListLength:!1,imageList:{},filesObj:[],base64Arr:[],uploadIndex:"",toClick:!1,errorShow:!1,errorMsg:"",loading:!1,deletePic:{},deletePicTip:!1}},computed:{submitFlag:function(){var e=!1,t=!1,a=!1;this.imageListLength=!1,this.toClick=!1;for(var s in this.imageList)if(0!==this.imageList[s].length){t=!0,this.imageListLength=!0;for(var n in this.imageList[s])this.imageList[s][n].uploading&&(a=!0,this.toClick=!1)}return t&&!a&&(e=!0,this.toClick=!0),e}},beforeRouteEnter:function(e,t,a){y="showBigImg"!==t.name,a(!0)},beforeRouteLeave:function(e,t,a){var s=this;if("showBigImg"===e.name)return void a(!0);s.imageListLength||s.toClick?(console.log("confirm框"),s.imageListLength&&s.toClick?s.leaveConfirmParams={ensure:"现在提交",cancel:"暂不提交",title:"要提交上传的图片么？"}:s.leaveConfirmParams={ensure:"取消",cancel:"离开",title:"努力上传中",content:"现在离开，下次还要重新上传哦"},s.leaveConfirm=!0,a(s.pageLeaveEnsure),s.pageLeaveEnsure&&(s.leaveConfirm=!1,s.imageList={}),s.pageLeaveEnsure=!1):(console.log("没有上传图片"),s.imageList={},s.leaveConfirm=!1,a(!0))},mounted:function(){c.a.forbidShare()},activated:function(){this.leaveConfirm=!1,y&&this.getUploadList(),c.a.forbidShare()},methods:{getUploadList:function(){var e=this;localStorage.getItem("upload")||localStorage.setItem("upload",i()(this.$route.params)),this.uploadList=JSON.parse(localStorage.getItem("upload")),this.uploadList.forEach(function(t,a){e.$set(e.imageList,t.adviceId,[])})},upLoadPic:function(e,t,a,s){var n=this;void 0!==a?n.imageList[t.adviceId][a]={blob:s,imgId:"",uploading:!0,fail:!1}:n.imageList[t.adviceId].push({blob:s,imgId:"",uploading:!0,fail:!1}),c.a.ajax({url:v.imgCreate,method:"POST",data:{fileContent:s.split(",")[1].replace(/\+/g,"%2B").replace(/\n/g,""),fileName:e.name,extName:e.name.split(".")[1],caseId:"",imageType:t.adviceType,caseCategoryId:""},timeout:3e5,done:function(e){if(e.responseObject.responseStatus){var s=a||n.imageList[t.adviceId].length-1;n.$set(n.imageList[t.adviceId],s,{blob:e.responseObject.responseData.logoUrl,imgId:e.responseObject.responsePk,uploading:!1,fail:!1}),n.uploadIndex=parseInt(n.uploadIndex)+1;var o=n.imageList[t.adviceId].length;n.filesObj[n.uploadIndex]&&n.uploadIndex<n.filesObj.length&&o<9?n.upLoadPic(n.filesObj[n.uploadIndex],t,a,n.base64Arr[n.uploadIndex]):(n.loading=!1,n.filesObj[n.uploadIndex]&&(n.errorShow=!0,n.errorMsg="图片最多上传9张！",setTimeout(function(){n.errorShow=!1,n.errorMsg=""},3e3)))}else{var i=a||n.imageList[t.adviceId].length-1;n.imageList[t.adviceId][i].uploading=!1,n.imageList[t.adviceId][i].fail=!0,n.imageList[t.adviceId][i].finish=!0,n.loading=!1}},fail:function(e){var s=a||n.imageList[t.adviceId].length-1;n.imageList[t.adviceId][s].uploading=!1,n.imageList[t.adviceId][s].fail=!0,n.imageList[t.adviceId][s].finish=!0,n.loading=!1}})},imgDelete:function(e,t,a){this.deletePicTip=!0,this.deletePic.type=a,this.deletePic.index=t},cancelDeletePic:function(){this.deletePic.type="",this.deletePic.index="",this.deletePicTip=!1},ensureDeletePic:function(){var e=this.deletePic;this.imageList[e.type].splice(e.index,1),this.deletePicTip=!1},showBigImg:function(e,t,a){var s={imgBlob:this.imageList[a],indexNum:t};this.$router.push({name:"showBigImg",params:s})},onFileChange:function(e,t,a){var s=this,n=e.target.files||e.dataTransfer.files,o=this;a||o.imageList[t.adviceId].length;if(o.filesObj=[],o.base64Arr=[],o.uploadIndex=0,n.length){this.loading=!0;for(var i=0;i<n.length;i++)!function(e){if(n[e].size>10485760)s.errorShow=!0,s.errorMsg="图片不能超过10M",setTimeout(function(){s.errorMsg="",s.errorShow=!1,e==n.length-1&&(s.loading=!1)},3e3);else{o.filesObj.push(n[e]);var i=new FileReader;i.readAsDataURL(n[e]),i.onload=function(i){Object(f.a)({imgSrc:i.target.result,quality:.8,file:n[e]},function(i){o.base64Arr.push(i),e==n.length-1&&s.upLoadPic(o.filesObj[o.uploadIndex],t,a,o.base64Arr[o.uploadIndex])})}}}(i)}},backToImPage:function(){var e=this,t="";this.leaveConfirm=!1;var a=!0,s=!1,o=void 0;try{for(var i,r=n()(e.uploadList);!(a=(i=r.next()).done);a=!0){var l=i.value,u=!0,d=!1,p=void 0;try{for(var m,g=n()(e.imageList[l.adviceId]);!(u=(m=g.next()).done);u=!0){t+=m.value.imgId+","}}catch(e){d=!0,p=e}finally{try{!u&&g.return&&g.return()}finally{if(d)throw p}}}}catch(e){s=!0,o=e}finally{try{!a&&r.return&&r.return()}finally{if(s)throw o}}c.a.ajax({url:v.saveImage,method:"POST",data:{caseId:c.a.getPara().caseId,idList:t.substring(0,t.length-1)},done:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&(e.pageLeaveEnsure=!0,e.$router.push({path:"/BaseIm",query:{success:1,queryType:"checkSuggest"}}))}})},cancelEvent:function(){var e=this;e.leaveConfirm=!1,e.pageLeaveEnsure=!0,e.$router.go(-1),console.log("取消")},ensureEvent:function(){var e=this;console.log("离开"),e.toClick?e.backToImPage():(this.leaveConfirm=!1,this.pageLeaveEnsure=!1)}},components:{Toast:g.a,Loading:p.a,confirm:u.a}}},1306:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"upload-wrapper"},[e._m(0,!1,!1),e._v(" "),a("section",{staticClass:"tc-upLoadFile ev-delete"},[e._l(e.uploadList,function(t,s){return a("section",{staticClass:"tc-upLoadBox"},[a("figure",{staticClass:"tc-upLoadTitle ev-upLoadList"},[a("span",{staticClass:"tc-upLoadTitleName",attrs:{"data-treatmentid":t.adviceId,"data-advicetype":t.adviceType}},[e._v(e._s(t.adviceName))]),e._v(" "),a("span",{staticClass:"tc-upLoadRightIcon"}),e._v(" "),a("span",{staticClass:"tc-upLoadRightCover"}),e._v(" "),e.isIos&&0===e.imageList[t.adviceId].length&&!e.loading?a("input",{staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:""},on:{change:function(a){e.onFileChange(a,t)}}}):e._e(),e._v(" "),e.isIos||0!==e.imageList[t.adviceId].length||e.loading?e._e():a("input",{staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:"",capture:"camera"},on:{change:function(a){e.onFileChange(a,t)}}})]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.imageList[t.adviceId].length>0,expression:"imageList[item.adviceId].length>0"}],staticClass:"tc-upLoadItemBox docInt"},[e._l(e.imageList[t.adviceId],function(s,n){return a("li",{staticClass:"tc-upLoadItemList ev-imgList success"},[a("img",{attrs:{alt:"",src:s.blob},on:{click:function(a){e.showBigImg(s,n,t.adviceId)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:0==s.uploading&&!s.fail,expression:"img.uploading==false&&!img.fail"}],staticClass:"tc-upLoadDel",staticStyle:{cursor:"pointer"},on:{click:function(a){e.imgDelete(s,n,t.adviceId)}}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:s.uploading,expression:"img.uploading"}]},[a("span",{staticClass:"tc-upLoadCover"}),e._v(" "),a("span",{staticClass:"tc-upLoading"}),e._v(" "),a("span",{staticClass:"tc-upLoadAfreshText"},[e._v("等待上传")])]),e._v(" "),s.fail?a("figure",{staticClass:"upload-fail"},[a("p",[e._v("重新上传")]),e._v(" "),e.isIos?a("input",{directives:[{name:"show",rawName:"v-show",value:e.imageList[t.adviceId]&&e.imageList[t.adviceId].length>0&&s.finish,expression:"imageList[item.adviceId]&&imageList[item.adviceId].length>0 && img.finish"}],staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:""},on:{change:function(a){e.onFileChange(a,t,n)}}}):e._e(),e._v(" "),e.isIos?e._e():a("input",{directives:[{name:"show",rawName:"v-show",value:e.imageList[t.adviceId]&&e.imageList[t.adviceId].length>0&&s.finish,expression:"imageList[item.adviceId]&&imageList[item.adviceId].length>0 && img.finish"}],staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:"",capture:"camera"},on:{change:function(a){e.onFileChange(a,t,n)}}})]):e._e()])}),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:e.imageList[t.adviceId]&&e.imageList[t.adviceId].length>0&&e.imageList[t.adviceId].length<9,expression:"imageList[item.adviceId]&&imageList[item.adviceId].length>0&&imageList[item.adviceId].length<9"}],staticClass:"tc-upLoadAdd",staticStyle:{display:"list-item"}},[a("a",{attrs:{href:"javascript:;"}},[a("span",{staticClass:"tc-upLoadAddMore"},[e.isIos&&e.imageList[t.adviceId].length>0&&!e.loading&&e.imageList[t.adviceId].length<9?a("input",{staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:""},on:{change:function(a){e.onFileChange(a,t)}}}):e._e(),e._v(" "),!e.isIos&&e.imageList[t.adviceId].length>0&&!e.loading&&e.imageList[t.adviceId].length<9?a("input",{staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:"",capture:"camera"},on:{change:function(a){e.onFileChange(a,t)}}}):e._e()])])])],2)])}),e._v(" "),a("div",{attrs:{"data-alcode-mod":"718"}},[a("footer",{staticClass:"tc-upLoadSubmit"},[e.submitFlag?a("button",{staticClass:"tc-submitBtn",attrs:{"data-alcode":"e131"},on:{click:e.backToImPage}},[e._v("提交")]):e._e(),e._v(" "),e.submitFlag?e._e():a("button",{staticClass:"tc-submitDisabled"},[e._v("提交")])])])],2),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.errorShow?a("Toast",{attrs:{content:e.errorMsg}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.deletePicTip?a("confirm",{attrs:{confirmParams:{ensure:"取消",cancel:"确定",title:"确定删除图片吗？"},showFlag:e.deletePicTip},on:{"update:showFlag":function(t){e.deletePicTip=t},cancelClickEvent:function(t){e.ensureDeletePic()},ensureClickEvent:e.cancelDeletePic}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.leaveConfirm?a("confirm",{attrs:{confirmParams:e.leaveConfirmParams,showFlag:e.leaveConfirm},on:{"update:showFlag":function(t){e.leaveConfirm=t},cancelClickEvent:function(t){e.cancelEvent()},ensureClickEvent:function(t){e.ensureEvent()}}}):e._e()],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"al-uploadNumLimit"},[a("span",[e._v("提示：每一项最多可以上传9张图片")])])}]}},1307:function(e,t,a){function s(e){a(1308)}var n=a(2)(a(1309),a(1310),s,null,null);e.exports=n.exports},1308:function(e,t){},1309:function(e,t,a){"use strict";function s(){var e;e="https:"===window.location.protocol?"https://up-z1.qbox.me":"http://up-z1.qiniu.com",this.detectIEVersion=function(){for(var e=4,t=document.createElement("div"),a=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+e+"]><i></i><![endif]--\x3e",a[0];)e++;return e>4&&e},this.isImage=function(e){var t,a="",s=["png","jpg","jpeg","gif","bmp"],n=/\.([a-zA-Z0-9]+)(\?|\@|$)/;if(!e||!n.test(e))return!1;t=n.exec(e),a=t[1].toLowerCase();for(var o=0,i=s.length;o<i;o++)if(a===s[o])return!0;return!1},this.getFileExtension=function(e){var t=e.split(".");return 1===t.length||""===t[0]&&2===t.length?"":t.pop().toLowerCase()},this.utf8_encode=function(e){if(null===e||void 0===e)return"";var t,a,s=e+"",n="",o=0;t=a=0,o=s.length;for(var i=0;i<o;i++){var r=s.charCodeAt(i),c=null;if(r<128)a++;else if(r>127&&r<2048)c=String.fromCharCode(r>>6|192,63&r|128);else if(63488&r^!0)c=String.fromCharCode(r>>12|224,r>>6&63|128,63&r|128);else{if(64512&r^!0)throw new RangeError("Unmatched trail surrogate at "+i);var l=s.charCodeAt(++i);if(64512&l^!0)throw new RangeError("Unmatched lead surrogate at "+(i-1));r=((1023&r)<<10)+(1023&l)+65536,c=String.fromCharCode(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}null!==c&&(a>t&&(n+=s.slice(t,a)),n+=c,t=a=i+1)}return a>t&&(n+=s.slice(t,o)),n},this.base64_encode=function(e){var t,a,s,n,o,i,r,c,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,d=0,p="",m=[];if(!e)return e;e=this.utf8_encode(e+"");do{t=e.charCodeAt(u++),a=e.charCodeAt(u++),s=e.charCodeAt(u++),c=t<<16|a<<8|s,n=c>>18&63,o=c>>12&63,i=c>>6&63,r=63&c,m[d++]=l.charAt(n)+l.charAt(o)+l.charAt(i)+l.charAt(r)}while(u<e.length);switch(p=m.join(""),e.length%3){case 1:p=p.slice(0,-2)+"==";break;case 2:p=p.slice(0,-1)+"="}return p},this.URLSafeBase64Encode=function(e){return e=this.base64_encode(e),e.replace(/\//g,"_").replace(/\+/g,"-")},this.createAjax=function(e){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},this.parseJSON=function(e){return window.JSON&&window.JSON.parse?window.JSON.parse(e):null===e?e:"string"==typeof e&&(e=this.trim(e))&&/^[\],:{}\s]*$/.test(e.replace(/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,"@").replace(/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?function(){return e}():void 0},this.trim=function(e){return null===e?"":e.replace(/^\s+|\s+$/g,"")};var t=this;this.uploader=function(a){if(!a.domain)throw"uptoken_url or domain is required!";if(!a.browse_button)throw"browse_button is required!";var s={},n=a.init&&a.init.Error,i=a.init&&a.init.FileUploaded;a.init.Error=function(){},a.init.FileUploaded=function(){},t.uptoken_url=a.uptoken_url,t.token="",t.key_handler="function"==typeof a.init.Key?a.init.Key:"",this.domain=a.domain;var r="",c={isResumeUpload:!1,resumeFilesize:0,startTime:"",currentTime:""};!function(){var e,s,n=t.detectIEVersion(),o="Safari"===mOxie.Env.browser&&mOxie.Env.version<=5&&"Windows"===mOxie.Env.os&&"7"===mOxie.Env.osVersion||"Safari"===mOxie.Env.browser&&"iOS"===mOxie.Env.os&&"7"===mOxie.Env.osVersion;n&&n<=9&&a.chunk_size&&a.runtimes.indexOf("flash")>=0?a.chunk_size=0:o?a.chunk_size=0:(e=20,s=4<<e,plupload.parseSize(a.chunk_size)>s&&(a.chunk_size=s))}();var l=function(){if(a.uptoken)t.token=a.uptoken;else{var e=t.createAjax();e.open("GET",t.uptoken_url,!0),e.setRequestHeader("If-Modified-Since","0"),e.onreadystatechange=function(){if(4===e.readyState&&200===e.status){var a=t.parseJSON(e.responseText);t.token=a.responseObject.uptoken,t.key=a.responseObject.key}},e.send()}},d=function(e,s,n){var o="",i=!1;if(!a.save_key)if(i=e.getOption&&e.getOption("unique_names"),i=i||e.settings&&e.settings.unique_names){var r=t.getFileExtension(s.name);o=r?s.id+"."+r:s.id}else o="function"==typeof n?""===n(e,s)?t.key:n(e,s):t.key;return o};plupload.extend(s,a,{url:e,multipart_params:{token:""}});var p=new plupload.Uploader(s);return p.bind("Init",function(e,t){l()}),p.init(),p.bind("FilesAdded",function(e,t){var a=e.getOption&&e.getOption("auto_start");a=a||e.settings&&e.settings.auto_start,a&&plupload.each(t,function(t,a){e.start()}),e.refresh()}),p.bind("BeforeUpload",function(s,n){n.speed=n.speed||0,r="",a.get_new_uptoken&&l();var o=function(s,n,o){c.startTime=(new Date).getTime();var i;i=a.save_key?{token:t.token}:{key:d(s,n,o),token:t.token};var r=a.x_vars;if(void 0!==r&&"object"===(void 0===r?"undefined":u()(r)))for(var l in r)r.hasOwnProperty(l)&&("function"==typeof r[l]?i["x:"+l]=r[l](s,n):"object"!==u()(r[l])&&(i["x:"+l]=r[l]));s.setOption({url:e,multipart:!0,chunk_size:void 0,multipart_params:i})},i=s.getOption&&s.getOption("chunk_size");if(i=i||s.settings&&s.settings.chunk_size,"html5"===p.runtime&&i)if(n.size<i)o(s,n,t.key_handler);else{var m=localStorage.getItem(n.name),g=i;if(m){m=JSON.parse(m);var f=(new Date).getTime(),h=m.time||0;f-h<864e5&&100!==m.percent&&n.size===m.total?(n.percent=m.percent,n.loaded=m.offset,r=m.ctx,c.isResumeUpload=!0,c.resumeFilesize=m.offset,m.offset+g>n.size&&(g=n.size-m.offset)):localStorage.removeItem(n.name)}c.startTime=(new Date).getTime(),s.setOption({url:e+"/mkblk/"+g,multipart:!1,chunk_size:i,required_features:"chunks",headers:{Authorization:"UpToken "+t.token},multipart_params:{}})}else o(s,n,t.key_handler)}),p.bind("UploadProgress",function(e,t){c.currentTime=(new Date).getTime();var a=c.currentTime-c.startTime,s=t.loaded||0;c.isResumeUpload&&(s=t.loaded-c.resumeFilesize),t.speed=(s/a*1e3).toFixed(0)||0}),p.bind("ChunkUploaded",function(a,s,n){var i=t.parseJSON(n.response);r=r?r+","+i.ctx:i.ctx;var c=n.total-n.offset,l=a.getOption&&a.getOption("chunk_size");l=l||a.settings&&a.settings.chunk_size,c<l&&a.setOption({url:e+"/mkblk/"+c}),localStorage.setItem(s.name,o()({ctx:r,percent:s.percent,total:n.total,offset:n.offset,time:(new Date).getTime()}))}),p.bind("Error",function(e){return function(a,s){var n="";if(s.file){switch(s.code){case plupload.FAILED:n="上传失败。请稍后再试。";break;case plupload.FILE_SIZE_ERROR:var o=a.getOption&&a.getOption("max_file_size");o=o||a.settings&&a.settings.max_file_size,n="浏览器最大可上传"+o+"。更大文件请使用命令行工具。";break;case plupload.FILE_EXTENSION_ERROR:n="文件验证失败。请稍后重试。";break;case plupload.HTTP_ERROR:if(""===s.response){n=s.message||"未知网络错误。";break}var i=t.parseJSON(s.response),r=i.error;switch(s.status){case 400:n="请求报文格式错误。";break;case 401:n="客户端认证授权失败。请重试或提交反馈。";break;case 405:n="客户端请求错误。请重试或提交反馈。";break;case 579:n="资源上传成功，但回调失败。";break;case 599:n="网络连接异常。请重试或提交反馈。";break;case 614:n="文件已存在。";try{i=t.parseJSON(i.error),r=i.error||"file exists"}catch(e){r=i.error||"file exists"}break;case 631:n="指定空间不存在。";break;case 701:n="上传数据块校验出错。请重试或提交反馈。";break;default:n="未知错误。"}n=n+"("+s.status+"："+r+")";break;case plupload.SECURITY_ERROR:n="安全配置错误。请联系网站管理员。";break;case plupload.GENERIC_ERROR:case plupload.IO_ERROR:n="上传失败。请稍后再试。";break;case plupload.INIT_ERROR:n="网站配置错误。请联系网站管理员。",p.destroy();break;default:n=s.message+s.details}e&&e(a,s,n)}a.refresh()}}(n)),p.bind("FileUploaded",function(s){return function(n,i,c){var l=function(e,n,i){if(a.downtoken_url){var r=t.createAjax();r.open("POST",a.downtoken_url,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var a;try{a=t.parseJSON(r.responseText)}catch(e){throw"invalid json format"}var c={};plupload.extend(c,t.parseJSON(i),a),s&&s(e,n,o()(c))}else p.trigger("Error",{status:r.status,response:r.responseText,file:n,code:plupload.HTTP_ERROR})},r.send("key="+t.parseJSON(i).key+"&domain="+a.domain)}else s&&s(e,n,i)},m=t.parseJSON(c.response);if(r=r||m.ctx){var g="";a.save_key||(g=d(n,i,t.key_handler),g=g?"/key/"+t.URLSafeBase64Encode(g):"");var f="/fname/"+t.URLSafeBase64Encode(i.name),h=a.x_vars,v="",y="";if(void 0!==h&&"object"===(void 0===h?"undefined":u()(h)))for(var I in h)h.hasOwnProperty(I)&&("function"==typeof h[I]?v=t.URLSafeBase64Encode(h[I](n,i)):"object"!==u()(h[I])&&(v=t.URLSafeBase64Encode(h[I])),y+="/x:"+I+"/"+v);var w=e+"/mkfile/"+i.size+g+f+y,S=t.createAjax();S.open("POST",w,!0),S.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),S.setRequestHeader("Authorization","UpToken "+t.token),S.onreadystatechange=function(){if(4===S.readyState)if(localStorage.removeItem(i.name),200===S.status){var e=S.responseText;l(n,i,e)}else p.trigger("Error",{status:S.status,response:S.responseText,file:i,code:-200})},S.send(r)}else l(n,i,c.response)}}(i)),p},this.getUrl=function(e){if(!e)return!1;e=encodeURI(e);var t=this.domain;return"/"!==t.slice(t.length-1)&&(t+="/"),t+e},this.imageView2=function(e,t){var a=e.mode||"",s=e.w||"",n=e.h||"",o=e.q||"",i=e.format||"";if(!a)return!1;if(!s&&!n)return!1;var r="imageView2/"+a;return r+=s?"/w/"+s:"",r+=n?"/h/"+n:"",r+=o?"/q/"+o:"",r+=i?"/format/"+i:"",t&&(r=this.getUrl(t)+"?"+r),r},this.imageMogr2=function(e,t){var a=e["auto-orient"]||"",s=e.thumbnail||"",n=e.strip||"",o=e.gravity||"",i=e.crop||"",r=e.quality||"",c=e.rotate||"",l=e.format||"",u=e.blur||"",d="imageMogr2";return d+=a?"/auto-orient":"",d+=s?"/thumbnail/"+s:"",d+=n?"/strip":"",d+=o?"/gravity/"+o:"",d+=r?"/quality/"+r:"",d+=i?"/crop/"+i:"",d+=c?"/rotate/"+c:"",d+=l?"/format/"+l:"",d+=u?"/blur/"+u:"",t&&(d=this.getUrl(t)+"?"+d),d},this.watermark=function(e,t){var a=e.mode;if(!a)return!1;var s="watermark/"+a;if(1===a){var n=e.image||"";if(!n)return!1;s+=n?"/image/"+this.URLSafeBase64Encode(n):""}else{if(2!==a)return!1;var o=e.text?e.text:"",i=e.font?e.font:"",r=e.fontsize?e.fontsize:"",c=e.fill?e.fill:"";if(!o)return!1;s+=o?"/text/"+this.URLSafeBase64Encode(o):"",s+=i?"/font/"+this.URLSafeBase64Encode(i):"",s+=r?"/fontsize/"+r:"",s+=c?"/fill/"+this.URLSafeBase64Encode(c):""}var l=e.dissolve||"",u=e.gravity||"",d=e.dx||"",p=e.dy||"";return s+=l?"/dissolve/"+l:"",s+=u?"/gravity/"+u:"",s+=d?"/dx/"+d:"",s+=p?"/dy/"+p:"",t&&(s=this.getUrl(t)+"?"+s),s},this.imageInfo=function(e){if(!e)return!1;var t,a=this.getUrl(e)+"?imageInfo",s=this.createAjax(),n=this;return s.open("GET",a,!1),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(t=n.parseJSON(s.responseText))},s.send(),t},this.exif=function(e){if(!e)return!1;var t,a=this.getUrl(e)+"?exif",s=this.createAjax(),n=this;return s.open("GET",a,!1),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(t=n.parseJSON(s.responseText))},s.send(),t},this.get=function(e,t){return!(!t||!e)&&("exif"===e?this.exif(t):"imageInfo"===e&&this.imageInfo(t))},this.pipeline=function(e,t){var a,s,n="[object Array]"===Object.prototype.toString.call(e),o="";if(n){for(var i=0,r=e.length;i<r;i++){if(a=e[i],!a.fop)return!1;switch(a.fop){case"watermark":o+=this.watermark(a)+"|";break;case"imageView2":o+=this.imageView2(a)+"|";break;case"imageMogr2":o+=this.imageMogr2(a)+"|";break;default:s=!0}if(s)return!1}if(t){o=this.getUrl(t)+"?"+o;var c=o.length;"|"===o.slice(c-1)&&(o=o.slice(0,c-1))}return o}return!1}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(7),o=a.n(n),i=a(317),r=a.n(i),c=a(3),l=(a(18),a(138)),u=a.n(l),d=new s,p=d,m=a(13),g=a.n(m),f=a(20),h=a.n(f),v=a(137),y=a(136),I="";I=navigator.userAgent.toLowerCase().includes("iphone")?"":"camera";var w={imgCreate:"/mcall/customer/patient/case/attachment/v1/create/",imgDelete:"/mcall/customer/patient/case/attachment/v1/update/",saveVideo:"/mcall/qiniu/storage/v1/saveVideoInfo/",resetTime:"/mcall/customer/case/consultation/v1/updateFrequency/",updateCase:"/mcall/customer/patient/case/v1/update/",getToken:"/mcall/qiniu/storage/v1/getToken/"};t.default={data:function(){return{imgLeaveConfirm:!1,imgLeaveConfirmParams:{},videoLeaveConfirm:!1,videoLeaveConfirmParams:{},pageLeaveEnsure:!1,reloadVideoConfirm:!1,baseMessage:{},imageList:[],isIos:navigator.userAgent.toLowerCase().includes("iphone"),filesObj:{},base64Arr:[],uploadIndex:"",loading:!1,uploading:!1,deletePic:{},deletePicTip:!1,videoUploading:!1,videoObj:{},videoSubmitParam:{},upLoadPercent:"",tip:"上传完成",tipShow:!1,cameraType:I,uploadVideo:!1,uploader:{},errorShow:!1,errorMsg:""}},beforeRouteLeave:function(e,t,a){var s=this;"showBigImg"==e.name?a(!0):1==s.baseMessage.type?(s.videoObj.size||s.videoUploading?(s.videoUploading?(s.uploader.stop(),s.videoLeaveConfirmParams={ensure:"离开",cancel:"取消",title:"努力上传中",content:"现在离开，下次还要重新上传哦"}):s.videoLeaveConfirmParams={ensure:"现在提交",cancel:"暂不提交",title:"要提交上传的视频么",content:""},s.videoLeaveConfirm=!0,s.pageLeaveEnsure&&(s.videoLeaveConfirm=!1,s.videoUploading=!1),a(s.pageLeaveEnsure)):a(!0),this.reloadVideoConfirm=!1):s.imageList.length?(s.uploading?s.imgLeaveConfirmParams={ensure:"取消",cancel:"离开",title:"努力上传中",content:"现在离开，下次还要重新上传哦"}:s.imgLeaveConfirmParams={ensure:"现在提交",cancel:"暂不提交",title:"要提交上传的图片么？"},s.imgLeaveConfirm=!0,s.pageLeaveEnsure&&(s.imageList=[],s.imgLeaveConfirm=!1),a(s.pageLeaveEnsure)):a(!0)},watch:{"$store.state.upLoadPercent":function(){this.upLoadPercent=this.$store.state.upLoadPercent}},props:{},methods:{showBigImg:function(e,t){var a={imgBlob:this.imageList,indexNum:t};this.$router.push({name:"showBigImg",params:a})},onFileChange:function(e,t,a){var s=this,n=e.target.files||e.dataTransfer.files,o=this;if(o.filesObj=[],o.base64Arr=[],o.uploadIndex=0,n.length){this.loading=!0;for(var i=0;i<n.length;i++)!function(e){if(n[e].size>10485760)s.errorShow=!0,s.errorMsg="图片不能超过10M",setTimeout(function(){s.errorMsg="",s.errorShow=!1,e==n.length-1&&(s.loading=!1)},3e3);else{o.filesObj.push(n[e]);var i=new FileReader;i.readAsDataURL(n[e]),i.onload=function(i){Object(y.a)({imgSrc:i.target.result,quality:.8,file:n[e]},function(i){o.base64Arr.push(i),e==n.length-1&&s.upLoadPic(o.filesObj[o.uploadIndex],t,a,o.base64Arr[o.uploadIndex])})}}}(i)}},imgDelete:function(e,t,a){this.deletePicTip=!0,this.deletePic.type=a,this.deletePic.index=t},cancelDeletePic:function(){this.deletePic.type="",this.deletePic.index="",this.deletePicTip=!1},ensureDeletePic:function(){var e=this,t=this.deletePic;c.a.ajax({url:w.imgDelete,method:"POST",data:{id:e.deletePic.type,isValid:0},beforeSend:function(){},done:function(){e.imageList.splice(t.index,1),e.uploading=!1,e.deletePicTip=!1}})},upLoadPic:function(e,t,a,s){var n=this;void 0!==a?n.imageList[a]={blob:s,imgId:"",uploading:!0,fail:!1}:n.imageList.push({blob:s,imgId:"",uploading:!0,fail:!1}),c.a.ajax({url:w.imgCreate,method:"POST",data:{fileContent:s.split(",")[1].replace(/\+/g,"%2B").replace(/\n/g,""),fileName:e.name,extName:e.name.split(".")[1],caseId:n.$route.params.caseId,imageType:1,caseCategoryId:""},timeout:3e5,done:function(e){if(e.responseObject.responseStatus){var s=a||n.imageList.length-1;n.$set(n.imageList,s,{blob:e.responseObject.responseData.logoUrl,imgId:e.responseObject.responsePk,uploading:!1,fail:!1,finish:!0}),n.uploadIndex=parseInt(n.uploadIndex)+1;var o=n.imageList.length;"undefined"!==n.filesObj[n.uploadIndex]&&n.uploadIndex<n.filesObj.length&&o<9?n.upLoadPic(n.filesObj[n.uploadIndex],t,a,n.base64Arr[n.uploadIndex]):(n.loading=!1,n.filesObj[n.uploadIndex]&&(n.errorShow=!0,n.errorMsg="图片最多上传9张！",setTimeout(function(){n.errorShow=!1,n.errorMsg=""},3e3)))}else{var i=a||n.imageList.length-1;n.imageList[i].uploading=!1,n.imageList[i].fail=!0,n.imageList[i].finish=!0,n.loading=!1}},fail:function(e){var t=a||n.imageList.length-1;n.imageList[t].uploading=!1,n.imageList[t].fail=!0,n.imageList[t].finish=!0,n.loading=!1}})},videoUpload:function(){var e=this;e.uploader=p.uploader({runtimes:"html5,flash,html4",browse_button:"uploadBtn",multi_selection:!1,uptoken_url:w.getToken,get_new_uptoken:!0,domain:"allinmed",container:this.$refs.upload,max_file_size:"60mb",flash_swf_url:"path/of/plupload/Moxie.swf",dragdrop:!0,drop_element:"container",chunk_size:"4mb",filters:{mime_types:[],prevent_duplicates:!0},auto_start:!0,init:{FilesAdded:function(e,t){plupload.each(t,function(e){})},BeforeUpload:function(t,a){if(!/(mp4)|(mov)|(avi)|(3gp)|(wmv)|(flv)|(quicktime)$/i.test(a.type))return e.errorShow=!0,e.errorMsg="当前仅支持avi、mp4、3gp、wmv、mov、flv格式的视频",setTimeout(function(){e.errorMsg="",e.errorShow=!1},3e3),e.uploader.removeFile(e.uploader.getFile(a.id)),!1;console.log("123")},UploadProgress:function(t,a){e.videoUploading=!0,v.a.commit("upLoadPercentFn",a.percent)},FileUploaded:function(t,a,s){e.videoUploading=!1,e.videoObj=a,e.videoSubmitParam=JSON.parse(s),e.tipShow=!0,setTimeout(function(){e.tipShow=!1},2e3)},Error:function(t,a,s){return/(mp4)|(mov)|(avi)|(3gp)|(wmv)|(flv)|(quicktime)$/i.test(a.file.type)?"-600"==a.code?(e.errorShow=!0,e.errorMsg="视频不能超过60M，请重新上传",setTimeout(function(){e.errorMsg="",e.errorShow=!1},3e3),!1):"-200"==a.code?(e.videoUploading=!1,e.errorShow=!0,e.errorMsg="网络异常，请检查网络连接后重新上传",setTimeout(function(){e.errorMsg="",e.errorShow=!1},3e3),e.uploader.removeFile(e.uploader.getFile(a.file.id)),!1):void 0:(e.errorShow=!0,e.errorMsg="-601"==a.code?"当前仅支持avi、mp4、3gp、wmv、mov、flv格式的视频":"视频不能超过60M，请重新上传",setTimeout(function(){e.errorMsg="",e.errorShow=!1},3e3),!1)},UploadComplete:function(){},Key:function(e,t){return""}}}),setTimeout(function(){e.isIos||($(".moxie-shim-html5 input").attr("capture","camera"),$(".moxie-shim-html5 input").attr("accept","video/*"),$(".moxie-shim-html5 input").attr("multiple",""))},300)},submitImage:function(){var e=this,t="",a=!0,s=!1,n=void 0;try{for(var o,i=r()(e.imageList);!(a=(o=i.next()).done);a=!0){t+=o.value.imgId+","}}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}c.a.ajax({url:w.imgDelete,method:"POST",data:{caseId:c.a.getPara().caseId,idList:t.substring(0,t.length-1)},done:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&(e.pageLeaveEnsure=!0,e.$router.push({path:"/BaseIm",params:{success:1},query:{success:1,queryType:"triage",triageType:"image"}}))}})},submitVideo:function(){var e=this;e.uploadVideo=!0,c.a.ajax({url:w.saveVideo,method:"POST",data:{videoName:this.videoObj.name,key:this.videoSubmitParam.key,persistentId:this.videoSubmitParam.persistentId,caseId:c.a.getPara().caseId,refType:1},beforeSend:function(){},done:function(t){e.uploadVideo=!1,t&&t.responseObject&&t.responseObject.responseStatus?(e.pageLeaveEnsure=!0,e.$router.push({path:"/BaseIm",params:{success:1},query:{success:1,queryType:"triage",triageType:"video"}})):(e.errorMsg="视频保存失败，请稍后再试",e.errorShow=!0,setTimeout(function(){e.errorShow=!1},2e3))}})},cancelEvent:function(){this.videoLeaveConfirm=!1,this.videoUploading?(this.uploader.start(),this.pageLeaveEnsure=!1):(this.pageLeaveEnsure=!0,this.$router.go(-1))},ensureEvent:function(){var e=this;if(e.videoUploading)e.videoLeaveConfirm=!1,e.pageLeaveEnsure=!0,e.$router.go(-1);else{if(e.uploadVideo)return!1;e.submitVideo()}},againUpload:function(){this.reloadVideoConfirm=!0},uploadCancel:function(){this.reloadVideoConfirm=!1},uploadEnsure:function(){this.reloadVideoConfirm=!1,console.log(document.querySelector("#uploadBtn").nextSibling.firstChild),document.querySelector("#uploadBtn").nextSibling.firstChild.click()},imgCancel:function(){var e=this;e.imgLeaveConfirm=!1,e.pageLeaveEnsure=!0,e.$router.go(-1),console.log("取消")},imgEnsure:function(){var e=this;console.log("离开"),e.uploading?(this.imgLeaveConfirm=!1,this.pageLeaveEnsure=!1):this.submitImage()}},mounted:function(){var e=this;e.imageList=[],e.videoObj={},e.videoSubmitParam={},sessionStorage.getItem("triageRoute")||sessionStorage.setItem("triageRoute",o()(this.$route.params)),e.baseMessage=JSON.parse(sessionStorage.getItem("triageRoute")),e.videoUpload(),c.a.forbidShare(),setTimeout(function(){navigator.userAgent.toLowerCase().includes("iphone")&&$(".tc-upLoadInput").removeAttr("capture")},500)},activated:function(){var e=this;e.videoObj={},e.videoSubmitParam={},e.videoLeaveConfirm=!1,e.pageLeaveEnsure=!1,e.videoUploading=!1,sessionStorage.getItem("triageRoute")||sessionStorage.setItem("triageRoute",o()(this.$route.params)),e.baseMessage=JSON.parse(sessionStorage.getItem("triageRoute"))},components:{Toast:g.a,confirm:h.a}}},1310:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"he-videoUpHide ev-videoImgUpHide"},[a("section",{staticClass:"he-videoUpLoadBox"},[a("section",{staticClass:"he-videosMain"},[2==e.baseMessage.type?a("section",{staticClass:"al-uploadNumLimit"},[a("span",[e._v("提示：最多可以上传9张图片")])]):e._e(),e._v(" "),a("p",{staticClass:"he-loadTitle",class:{upLoadPicHasTip:2==e.baseMessage.type}},[e._v(e._s(e.baseMessage.content))]),e._v(" "),2==e.baseMessage.type?a("ul",{staticClass:"he-loadFiles he-videoImageBox docInt"},[e._l(e.imageList,function(t,s){return e.imageList.length>0?a("li",{staticClass:"tc-imageItemList ev-imgList success"},[a("img",{attrs:{src:t.blob,alt:""},on:{click:function(a){e.showBigImg(t,s)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.finish&&!t.fail,expression:"item.finish&&!item.fail"}],staticClass:"tc-upLoadDel",on:{click:function(a){e.imgDelete(t,s,t.imgId)}}}),e._v(" "),t.uploading?a("div",[a("span",{staticClass:"tc-upLoadCover"}),e._v(" "),a("span",{staticClass:"tc-upLoading"}),e._v(" "),a("span",{staticClass:"tc-upLoadAfreshText"},[e._v("等待上传")])]):e._e(),e._v(" "),t.fail?a("figure",{staticClass:"upload-fail"},[a("p",[e._v("重新上传")]),e._v(" "),e.isIos?a("input",{directives:[{name:"show",rawName:"v-show",value:t.finish,expression:"item.finish"}],staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:""},on:{change:function(a){e.onFileChange(a,t,s)}}}):e._e(),e._v(" "),e.isIos?e._e():a("input",{directives:[{name:"show",rawName:"v-show",value:t.finish,expression:"item.finish"}],staticClass:"ev-upLoadInput",attrs:{accept:"image/*",type:"file",multiple:"",capture:"camera"},on:{change:function(a){e.onFileChange(a,t,s)}}})]):e._e()]):e._e()}),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:e.imageList.length<9,expression:"imageList.length<9"}],staticClass:"tc-imageUpLoadAdd"},[a("a",{attrs:{href:"javascript:;"}},[a("span",{staticClass:"tc-upLoadAddMore"}),e._v(" "),e.isIos&&!e.loading&&e.imageList.length<9?a("input",{staticClass:"tc-upLoadInput",attrs:{type:"file",accept:"image/*",multiple:""},on:{change:function(t){e.onFileChange(t)}}}):e._e(),e._v(" "),!e.isIos&&!e.loading&&e.imageList.length<9?a("input",{staticClass:"tc-upLoadInput",attrs:{type:"file",accept:"image/*",multiple:"",capture:"camera"},on:{change:function(t){e.onFileChange(t)}}}):e._e()])])],2):e._e(),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:1==e.baseMessage.type&&!e.videoObj.size,expression:"baseMessage.type==1&&!videoObj.size"}],staticClass:"he-loadFiles"},[a("li",{ref:"upload",staticClass:"he-videoAddFirstBtn"},[a("a",{ref:"uploadBtn",staticClass:"he-videoFirstLoadBtn",attrs:{href:"javascript:;",id:"uploadBtn"}})])]),e._v(" "),a("ul",{directives:[{name:"show",rawName:"v-show",value:1==e.baseMessage.type&&e.videoObj.size,expression:"baseMessage.type==1&&videoObj.size"}],staticClass:"he-loadFiles ev-success",attrs:{issubmit:"0"}},[e._m(0,!1,!1),e._v(" "),a("li",{staticClass:"he-videoAddBtn he-loadSuccessTextBox"},[a("a",{staticClass:"he-reLoadText",attrs:{href:"javascript:;",id:"reloadBtn"},on:{click:function(t){e.againUpload()}}},[e._v("重新上传")])])]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:2==e.baseMessage.type,expression:"baseMessage.type==2"}],staticClass:"he-videosSubmit ev-submitUpData"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.imageList.length&&!e.uploading,expression:"imageList.length && !uploading"}],staticClass:"usable downBtn",staticStyle:{display:"inline-block"},on:{click:e.submitImage}},[e._v("提交\n          ")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.imageList.length||e.uploading,expression:"!imageList.length || uploading"}],staticClass:"unusable"},[e._v("提交")])]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:1==e.baseMessage.type,expression:"baseMessage.type==1"}],staticClass:"he-videosSubmit ev-submitUpData"},[a("button",{directives:[{name:"show",rawName:"v-show",value:e.videoObj.size,expression:"videoObj.size"}],staticClass:"usable downBtn",staticStyle:{display:"inline-block"},attrs:{disabled:e.uploadVideo},on:{click:e.submitVideo}},[e._v("提交\n          ")]),e._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.videoObj.size,expression:"!videoObj.size"}],staticClass:"unusable"},[e._v("提交")])])])]),e._v(" "),e.videoUploading?a("section",{staticClass:"video-upLoad-box"},[a("section",{staticClass:"ev-videoUpLoading"},[e._m(1,!1,!1),e._v(" "),a("p",{staticClass:"tc-videoLoadingText"},[e._v("上传中"+e._s(e.upLoadPercent)+"%...")])])]):e._e(),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("toast",{directives:[{name:"show",rawName:"v-show",value:e.errorShow,expression:"errorShow"}],attrs:{content:e.errorMsg}})],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.deletePicTip?a("confirm",{attrs:{confirmParams:{ensure:"取消",cancel:"确定",title:"确定删除图片吗？"},showFlag:e.deletePicTip},on:{"update:showFlag":function(t){e.deletePicTip=t},cancelClickEvent:function(t){e.ensureDeletePic()},ensureClickEvent:e.cancelDeletePic}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.imgLeaveConfirm?a("confirm",{attrs:{confirmParams:e.imgLeaveConfirmParams,showFlag:e.imgLeaveConfirm},on:{"update:showFlag":function(t){e.imgLeaveConfirm=t},cancelClickEvent:function(t){e.imgCancel()},ensureClickEvent:function(t){e.imgEnsure()}}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.videoLeaveConfirm?a("confirm",{attrs:{confirmParams:e.videoLeaveConfirmParams,showFlag:e.videoLeaveConfirm},on:{"update:showFlag":function(t){e.videoLeaveConfirm=t},cancelClickEvent:function(t){e.cancelEvent()},ensureClickEvent:function(t){e.ensureEvent()}}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fade"}},[e.reloadVideoConfirm?a("confirm",{attrs:{confirmParams:{ensure:"取消",cancel:"替换",title:"重新上传后",content:"原有视频将被替换"},showFlag:e.reloadVideoConfirm},on:{"update:showFlag":function(t){e.reloadVideoConfirm=t},cancelClickEvent:function(t){e.uploadEnsure()},ensureClickEvent:function(t){e.uploadCancel()}}}):e._e()],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"he-loadVideoSuccess"},[a("span",{staticClass:"he-loadVideoSuccessBox"},[a("span",{staticClass:"he-loadSuccessTip"}),e._v(" "),a("span",{staticClass:"he-loadSuccessText"},[e._v("已上传")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tc-videoLoadingImg"},[s("img",{attrs:{src:a(23),alt:""}})])}]}},1311:function(e,t,a){function s(e){a(1312)}var n=a(2)(a(1313),a(1314),s,null,null);e.exports=n.exports},1312:function(e,t){},1313:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(3),n={getTeachingDetail:"/mcall/comm/data/knowledge/content/v1/getMapById/"};t.default={data:function(){return{params:{},knowledgeContent:""}},activated:function(){console.log(this.$route.params),window.scrollTo(0,0),this.params=this.$route.params,this.knowledgeContent="",this.initData()},mounted:function(){s.a.forbidShare()},computed:{},methods:{initData:function(){var e=this;s.a.ajax({url:n.getTeachingDetail,method:"POST",data:{isValid:1,firstResult:0,maxResult:999,knowledgeId:e.$route.params.knowledgeId},beforeSend:function(){},done:function(t){if(t.responseObject.responseData.dataList){var a=t.responseObject.responseData.dataList[0];e.knowledgeContent=a.knowledgeContent}}})}},components:{}}},1314:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tc-articleDetails"},[a("h2",{staticClass:"tc-articlTitle"},[e._v(e._s(e.params.knowledgeName))]),e._v(" "),a("section",{staticClass:"tc-articleMain",domProps:{innerHTML:e._s(e.knowledgeContent)}})])},staticRenderFns:[]}},1315:function(e,t,a){"use strict";(function(e){var s=a(138),n=a.n(s),o={getTimestamp:function(){return(new Date).getTime()},getRandomKey:function(){return"vue-touch-"+(Math.random()+"").replace(/\D/g,"")},getType:function(e,t){var a=null,s=window.devicePixelRatio,n=t.T-e.T,o=(t.X-e.X)/s,i=(t.Y-e.Y)/s;Math.abs(o),Math.abs(i),Math.sqrt(Math.pow(o,2)+Math.pow(i,2));switch(!0){case n<100:a="tap";break;case n>500:a="long"}return a},getEventName:function(){return r?{start:"touchstart",end:"touchend"}:{start:"mousedown",end:"mouseup"}},attachEvent:function(e,t,a){var s=o.getEventName();e.addEventListener(s.start,t.start,a),e.addEventListener(s.end,t.end,a)},detachEvent:function(e,t){var a=o.getEventName();e.removeEventListener(a.start,t.start),e.removeEventListener(a.end,t.end)}},i={},r="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0||/(Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone)/i.test(navigator.userAgent),c=function(e,t,a){return a.stop&&t.stopPropagation(),a.prevent&&t.preventDefault(),!a.self||e===t.target},l=function(e){return{start:function(t){var a=this["vue-touch-id"],s=d[a][e],n=s.method,i=s.modifiers,l=s.start;if(r?(l.X=t.touches[0].pageX,l.Y=t.touches[0].pageY):(l.X=t.screenX,l.Y=t.screenY),l.T=o.getTimestamp(),!c(this,t,i))return!1;s.cycle=1,"long"===e&&(s.timer&&clearTimeout(s.timer),s.timer=setTimeout(function(){s.cycle<3&&n(t),s.timer=0},300))},end:function(t){var a={X:0,Y:0,T:o.getTimestamp()};r?(a.X=t.changedTouches[0].pageX,a.Y=t.changedTouches[0].pageY):(a.X=t.screenX,a.Y=t.screenY);var s=this["vue-touch-id"],n=d[s][e],i=n.method,l=n.modifiers,p=n.start;return n.cycle=3,!(!e||o.getType(p,a)!==e)&&(!!c(this,t,l)&&("long"!==e&&i(t,p,a),l.once&&(o.detachEvent(this,n.handler),delete d[s][e]),void(null!==u&&u(this,e,a))))}}},u=null,d={};i.install=function(e,t){t&&t.afterEvent&&"function"==typeof t.afterEvent&&(u=t.afterEvent),e.directive("touch",{bind:function(e,t){var a=t.arg,s=t.modifiers,n=!!s.capture,i=t.value,r="";if("function"!=typeof t.value||!t.arg)return console.error("[Vue warn]: Invalid parameter, Expected Function.");e.hasOwnProperty("vue-touch-id")?r=e["vue-touch-id"]:(r=e["vue-touch-id"]=o.getRandomKey(),d[r]={});var c=l(a);d[r][a]={method:i,modifiers:s,handler:c,start:{X:0,Y:0,T:0},timer:0,cycle:0},o.attachEvent(e,c,n)},update:function(e,t){var a=t.arg,s=t.value,n=e["vue-touch-id"],o=d[n];o.hasOwnProperty(a)&&(o[a].method=s)},unbind:function(e){var t=e["vue-touch-id"],a=d[t];for(var s in a)a.hasOwnProperty(s)&&s&&o.detachEvent(e,a[s].handler);delete d[t]}})},"object"==("undefined"==typeof exports?"undefined":n()(exports))?e.exports=i:"function"==typeof define&&a(182)?define([],function(){return i}):window.Vue&&(window.vueTouch=i,Vue.use(i)),t.a=i}).call(t,a(318)(e))},136:function(e,t,a){"use strict";function s(e,t,a,s,o,i){var r=null;console.log(a.file),c.a.getData(a.file,function(){switch(c.a.getAllTags(this),r=c.a.getTag(this,"Orientation"),console.log(r),r){case 1:case void 0:e.width=s.width,e.height=s.height,t.drawImage(o,0,0,s.width,s.height);break;case 6:console.log("需要顺时针（向左）90度旋转"),n(s,o,"left",e,t);break;case 8:console.log("需要顺时针（向右）90度旋转"),n(s,o,"right",e,t);break;case 3:console.log("需要180度旋转"),n(s,o,"right",e,t),n(s,o,"right",e,t)}i&&i()})}function n(e,t,a,s,n){if(null!=t){var o=e.height,i=e.width,r=2;null==r&&(r=0),"right"==a?++r>3&&(r=0):--r<0&&(r=3);var c=90*r*Math.PI/180;switch(r){case 0:s.width=i,s.height=o,n.drawImage(t,0,0,i,o);break;case 1:s.width=o,s.height=i,n.rotate(c),n.drawImage(t,0,-o,i,o);break;case 2:s.width=i,s.height=o,n.rotate(c),n.drawImage(t,-i,-o,i,o);break;case 3:s.width=o,s.height=i,n.rotate(c),n.drawImage(t,-i,0,i,o)}}}function o(e,t){var a=new Image;a.src=e.imgSrc,a.onload=function(){var n=document.createElement("canvas"),o=n.getContext("2d"),r="",c=i(a,e);s(n,o,e,c,a,function(){r=n.toDataURL("image/jpeg",.9),t&&t(r)})}}function i(e,t){var a={width:t.width||1920,height:t.height||1440};console.log(a);var s=e.width/e.height,n={width:0,height:0};return s>=1?n=e.width>a.width?{width:a.width,height:a.width/s}:{width:e.width,height:e.height}:s<1&&(n=e.height>a.height?{width:a.height*s,height:a.height}:{width:e.width,height:e.height}),n}var r=a(231),c=a.n(r);t.a=o},137:function(e,t,a){"use strict";var s=a(73),n=a.n(s),o=a(17),i=a(44);o.a.use(i.a);var r=void 0;t.a=new i.a.Store({state:{consultationId:"",logoUrl:"",lastTime:"",upLoadPercent:"",targetDoctor:{nick:"",customerId:"",payType:"pay"},previewSuggestionNum:0,renderSuggestionNum:0,patientName:"",deleteBtnShow:!1},mutations:{setPatientName:function(e,t){e.patientName=t},upLoadPercentFn:function(e,t){e.upLoadPercent=t},setConsultation:function(e,t){e.consultationId=t},setTargetMsg:function(e,t){e.targetDoctor=n()({},e.targetDoctor,t)},setLogoUrl:function(e,t){var s=t.sexName,n=parseInt(t.age),o="";n<=12?o=a(126):n>12&&n<=59?o=a("男"===s?127:128):n>59&&(o=a("男"===s?129:130)),e.logoUrl=o},addPreviewSuggestionNum:function(e){e.previewSuggestionNum++},addRenderSuggestionNum:function(e){e.renderSuggestionNum++},setDeleteBtnShow:function(e,t){e.deleteBtnShow=t},setLastTime:function(e,t){e.lastTime=t},stopLastTimeCount:function(e){clearInterval(r)},lastTimeCount:function(e){clearInterval(r),r=setInterval(function(){e.lastTime<=0?clearInterval(r):e.lastTime=e.lastTime-1e3},1e3)}}})},153:function(e,t,a){function s(e){a(154)}var n=a(2)(a(155),a(156),s,null,null);e.exports=n.exports},154:function(e,t){},155:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(7),n=a.n(s),o=a(3),i=(a(17),a(39)),r=a(20),c=a.n(r),l=a(10),u=a.n(l),d=a(9),p={getVisitDetails:"/mcall/customer/advice/setting/v1/getMapById/",getConsultationId:"/mcall/customer/case/consultation/v1/getConsultationFrequency/",getOrderDetails:"/mcall/cms/pay/order/v1/getMapById/",getCurrentState:"/mcall/customer/advice/setting/v1/getCurrentByCustomerId/"};t.default={data:function(){return{repeatOrderTitle:"图文问诊",repeatOrderId:"",repeatConsultationId:"",repeatOrderAmount:"",repeatOrderType:"",repeatOrderFrequency:"",mOrderAmount:"",mOrderType:"",mOrderFrequency:"",payOrderShow:!1,noWXPayShow:!1,noStateShow:!1,noMoreShow:!1,hasCommunShow:!1,finish:!1,priceMessage:{}}},mounted:function(){var e=this;d.a.weChatJudge(function(){console.log("这是微信呦")},function(){localStorage.setItem("payDate",n()(e.payPopupParams))}),1==localStorage.getItem("payOk")?this.noWXPayShow=!0:(this.noWXPayShow=!1,this.toJudge({type:0}))},methods:{closePopup:function(){localStorage.removeItem("mOrder"),localStorage.removeItem("payOk"),this.$emit("update:payPopupShow",!1)},toJudge:function(e){var t=this;o.a.ajax({url:p.getCurrentState,method:"POST",data:{customerId:t.payPopupParams.docId,caseId:t.payPopupParams.caseId},done:function(a){if(a&&a.responseObject.responseData.dataList){t.finish=!1;var s=a.responseObject.responseData.dataList;0==s.state?t.noStateShow=!0:s.remainNum<=0&&-1!=s.remainNum?t.noMoreShow=!0:1==s.conState&&"imDoctor"!=t.payPopupParams.from?t.hasCommunShow=!0:"free"==t.payPopupParams.payType?t.freeToPay():0==e.type?(t.payOrderShow=!0,t.getPrice()):t.noOrder(e)}},fail:function(){t.finish=!1}})},getDocName:function(){return this.payPopupParams.docName.length>6?this.payPopupParams.docName.substring(0,6)+"...":this.payPopupParams.docName},getPrice:function(){var e=this;o.a.ajax({url:p.getVisitDetails,method:"POST",data:{customerId:e.payPopupParams.docId},done:function(t){if(t.responseObject.responseData.dataList){var a=t.responseObject.responseData.dataList[0];e.priceMessage=a}}})},goToPay:function(e){var t=this,a=0;if(0==a){a=1,t.repeatOrderFrequency=e.orderFrequency;var s=parseFloat(e.orderAmount).toFixed(2);o.a.ajax({url:p.getConsultationId,method:"post",data:{caseId:t.payPopupParams.caseId,customerId:t.payPopupParams.docId,isCreate:1,isValid:1,consultationType:1,firstResult:0,maxResult:999},beforeSend:function(){t.finish=!0},done:function(n){if(t.finish=!1,n.responseObject.responseData.dataList){var o=n.responseObject.responseData.dataList.consultationId;sessionStorage.setItem("orderSourceId",o),t.toJudge({consultationId:o,orderSourceType:e.type,orderSourceTitle:"图文问诊",orderAmount:s,orderFrequency:e.orderFrequency}),a=0}},fail:function(){t.finish=!1}})}},isHasOrder:function(e){var t=this;o.a.ajax({url:p.getOrderDetails,method:"POST",data:{patientId:t.payPopupParams.patientId,doctorId:t.payPopupParams.docId,orderType:1,orderSourceId:e.consultationId,status:1,sortType:1,firstResult:0,maxResult:1},done:function(a){if(a.responseObject.responseData.dataList){var s=a.responseObject.responseData.dataList[0];s.orderSourceId&&0!=s.orderSourceId&&e.orderSourceType==s.orderSourceType?(t.closePopup(),t.repeatOrderId=s.orderId,t.repeatConsultationId=s.orderSourceId,t.repeatOrderAmount=s.orderAmount,t.repeatOrderType=s.orderSourceType):t.noOrder({cId:e.consultationId,oType:e.orderSourceType,oTitle:e.orderSourceTitle,orderAmount:e.orderAmount,orderFrequency:e.orderFrequency})}else t.noOrder({cId:e.consultationId,oType:e.orderSourceType,oTitle:e.orderSourceTitle,orderAmount:e.orderAmount,orderFrequency:e.orderFrequency})}})},noOrder:function(e){var t=this;localStorage.setItem("docId",t.payPopupParams.docId),localStorage.setItem("mOrder",n()({mOrderType:e.orderSourceType,mOrderAmount:e.orderAmount,mOrderFrequency:e.orderFrequency})),i.a.wxCreateOrder({isTest:0,data:{caseId:t.payPopupParams.caseId,patientCustomerId:t.payPopupParams.patientCustomerId,patientId:t.payPopupParams.patientId,doctorId:t.payPopupParams.docId,orderType:1,orderSourceId:e.consultationId,orderSourceType:e.orderSourceType,orderAmount:e.orderAmount,status:"1",body:"图文问诊",isCharge:"true"},backCreateSuccess:function(e){},backCreateError:function(e){},wxPaySuccess:function(a){t.$emit("paySuccess",{orderType:e.orderSourceType,orderAmount:e.orderAmount,orderFrequency:e.orderFrequency}),t.closePopup()},wxPayError:function(e){window.location.reload()}})},cancelEvent:function(e){this.noStateShow=!1,this.noMoreShow=!1,this.hasCommunShow=!1,this.closePopup(),"docMain"==this.payPopupParams.from&&this.$emit("docCallBack",e)},ensureEvent:function(){var e=this;i.a.wxPay({isTest:0,orderId:e.repeatOrderId,orderType:1,orderSourceId:e.repeatConsultationId,total_fee:e.repeatOrderAmount,body:e.repeatOrderTitle,callBack:function(t){"true"==t.responseStatus&&(e.$emit("paySuccess",{orderType:e.repeatOrderType,orderAmount:e.repeatOrderAmount,orderFrequency:e.repeatOrderFrequency}),e.closePopup())}})},ensureCommunEvent:function(){window.location.href="/dist/imSceneDoctor.html?caseId="+this.payPopupParams.caseId+"&doctorCustomerId="+this.payPopupParams.docId+"&patientCustomerId="+this.payPopupParams.patientCustomerId+"&patientId="+this.payPopupParams.patientId},freeToPay:function(){var e=this;o.a.ajax({url:p.getConsultationId,method:"post",data:{caseId:e.payPopupParams.caseId,customerId:e.payPopupParams.docId,isCreate:1,isValid:1,consultationType:1,firstResult:0,maxResult:999},done:function(t){if(t.responseObject.responseData.dataList){var a=t.responseObject.responseData.dataList.consultationId;localStorage.setItem("docId",e.payPopupParams.docId),sessionStorage.setItem("orderSourceId",a),i.a.wxCreateOrder({isTest:0,data:{caseId:e.payPopupParams.caseId,patientCustomerId:e.payPopupParams.patientCustomerId,patientId:e.payPopupParams.patientId,doctorId:e.payPopupParams.docId,orderType:1,orderSourceId:a,orderSourceType:0,orderAmount:0,status:"2",body:"免费问诊",isCharge:"false"},backCreateSuccess:function(t){e.creatInquiryId(t)},backCreateError:function(e){},wxPaySuccess:function(e){},wxPayError:function(e){window.location.reload()}})}}})},creatInquiryId:function(e){var t=this;o.a.ajax({url:"/mcall/customer/case/consultation/v1/getMapById/",method:"POST",data:{caseId:t.payPopupParams.caseId,customerId:t.payPopupParams.docId,consultationType:1,siteId:17},done:function(a){"NO DATA"==a.responseObject.responseMessage?o.a.ajax({url:"/mcall/customer/case/consultation/v1/create/",method:"POST",data:{caseId:t.payPopupParams.caseId,customerId:t.payPopupParams.docId,patientCustomerId:t.payPopupParams.patientCustomerId,patientId:t.payPopupParams.patientId,consultationType:1,consultationState:-1,consultationLevel:0,siteId:17,caseType:0},done:function(a){if(a.responseObject.responseStatus){var s=a.responseObject.responsePk;localStorage.removeItem("docId"),sessionStorage.setItem("orderSourceId",s),i.a.wxUpOrder({operationType:"2",orderId:e,orderType:"1",orderSourceId:s,outTradeNo:"",status:"2",payTime:"1",callBack:function(e){t.$emit("paySuccess",{orderType:0,orderAmount:0,orderFrequency:3})}})}}}):t.$emit("paySuccess",{orderType:0,orderAmount:0,orderFrequency:3})}})},viewPayResult:function(){var e=this;i.a.PayResult({outTradeNo:localStorage.getItem("orderNumber")}).then(function(t){console.log("查看回调",t);var a=JSON.parse(localStorage.getItem("payDate")),s=JSON.parse(localStorage.getItem("mOrder"));alert(localStorage.getItem("payDate")),alert(localStorage.getItem("mOrder")),"SUCCESS"==t.resultCode?o.a.ajax({url:"/mcall/customer/case/consultation/v1/getMapById/",method:"POST",data:{caseId:a.caseId,customerId:a.docId,consultationType:1,siteId:17},done:function(t){"NO DATA"==t.responseObject.responseMessage?o.a.ajax({url:"/mcall/customer/case/consultation/v1/create/",method:"POST",data:{caseId:a.caseId,customerId:a.docId,patientCustomerId:a.patientCustomerId,patientId:a.patientId,consultationType:1,consultationState:-1,consultationLevel:1,siteId:17,caseType:0},done:function(t){t.responseObject.responseStatus&&(alert(t.responseObject.responsePk),sessionStorage.setItem("orderSourceId",t.responseObject.responsePk),e.$emit("paySuccess",{orderType:s.mOrderType,orderAmount:s.mOrderAmount,orderFrequency:s.mOrderFrequency}),e.closePopup())}}):(e.$emit("paySuccess",{orderType:s.mOrderType,orderAmount:s.mOrderAmount,orderFrequency:s.mOrderFrequency}),e.closePopup())}}):console.log("未支付成功")}).catch(function(e){console.log(e)})}},props:{payPopupShow:{type:Boolean},payPopupParams:{type:Object}},components:{confirm:c.a,loading:u.a}}},156:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.payPopupShow?a("section",[a("transition",{attrs:{name:"fadeIn"}},[e.payOrderShow?a("div",{staticClass:"mask_layer"},[a("div",{attrs:{"data-alcode-mod":"721"}},[a("div",{staticClass:"onlineVisit_mask"},[a("section",{staticClass:"docNameBox"},[a("span",{staticClass:"docName"},[e._v(e._s(e.getDocName()))]),e._v("提供的服务"),a("i",{staticClass:"icon_close_mask",on:{click:e.closePopup}})]),e._v(" "),a("section",{staticClass:"inquiryTypeBox"},[a("h2",{staticClass:"imgInquiry"},[a("span",[e._v("图文问诊")]),e._v(" "),a("span",{staticClass:"inquiryMoney"},[e._v(e._s(e.priceMessage.generalPrice)+"元")])]),e._v(" "),a("dl",{staticClass:"docAdvantage"},[a("dt",[e._v("服务保障")]),e._v(" "),a("dd",[e._v("本人回复")]),e._v(" "),a("dd",[e._v("超时退款")]),e._v(" "),a("dd",[e._v("权威认证医生")])]),e._v(" "),a("ul",{staticClass:"doxCando"},[a("li",[e._v("可获得"+e._s(e.priceMessage.generalTimes)+"次医生答复")]),e._v(" "),a("li",[e._v("医生48小时内未接诊全额退款")]),e._v(" "),a("li",[e._v("问诊5天有效")])]),e._v(" "),a("a",{staticClass:"goPayment",attrs:{"data-alcode":"e135"},on:{click:function(t){e.goToPay({type:1,orderAmount:e.priceMessage.generalPrice,orderFrequency:e.priceMessage.generalTimes})}}},[e._v("购买")])])])])]):e._e()]),e._v(" "),a("transition",{attrs:{name:"fadeIn"}},[e.noStateShow?a("confirm",{attrs:{confirmParams:{ensure:"确定",cancel:"取消",content:"医生关闭了今天的问诊服务，暂不能为您提供帮助",title:"今日暂不接诊"}},on:{cancelClickEvent:function(t){e.cancelEvent(1)},ensureClickEvent:function(t){e.cancelEvent(1)}}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fadeIn"}},[e.noMoreShow?a("confirm",{attrs:{confirmParams:{ensure:"确定",cancel:"取消",title:"抱歉，该医生今天已经没有问诊名额了"}},on:{cancelClickEvent:function(t){e.cancelEvent(2)},ensureClickEvent:function(t){e.cancelEvent(2)}}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fadeIn"}},[e.hasCommunShow?a("confirm",{attrs:{confirmParams:{ensure:"去沟通",cancel:"取消",title:"您与该医生有正在进行中的问诊服务，现在去继续沟通吗？"}},on:{cancelClickEvent:e.cancelEvent,ensureClickEvent:e.ensureCommunEvent}}):e._e()],1),e._v(" "),a("transition",{attrs:{name:"fadeIn"}},[e.noWXPayShow?a("confirm",{attrs:{confirmParams:{ensure:"支付成功",cancel:"支付失败",title:"请确认微信支付是否已经完成"}},on:{cancelClickEvent:function(t){e.closePopup()},ensureClickEvent:function(t){e.viewPayResult()}}}):e._e()],1),e._v(" "),e.finish?a("loading"):e._e()],1):e._e()},staticRenderFns:[]}},180:function(e,t,a){var s=a(2)(a(118),a(119),null,null,null);e.exports=s.exports},181:function(e,t,a){var s=a(2)(a(120),a(121),null,null,null);e.exports=s.exports},20:function(e,t,a){function s(e){a(31)}var n=a(2)(a(32),a(33),s,null,null);e.exports=n.exports},21:function(e,t){},23:function(e,t,a){e.exports=a.p+"static/img/symptom_photo_loading@2x.9d469f9.png"},233:function(e,t){e.exports="data:image/png;base64,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"},24:function(e,t){},25:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{show:{type:Boolean}}}},26:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement;e._self._c;return e._m(0,!1,!1)},staticRenderFns:[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"middle-tip-box ev-loading"},[s("section",{staticClass:"middle-tip-modal"},[s("figure",{staticClass:"middle-tip-box-text"},[s("img",{attrs:{src:a(23),alt:"loading..."}})])])])}]}},3:function(e,t,a){"use strict";function s(){var e={isValid:1,firstResult:0,maxResult:99999,customerId:0};if(void 0!==m.a.getPara().patientCustomerId)e.customerId=0===m.a.getPara().patientCustomerId.length?0:m.a.getPara().patientCustomerId;else{if(void 0===m.a.getPara().customerId)return void(e.customerId=0);e.customerId=0===m.a.getPara().customerId.length?0:m.a.getPara().customerId}Object(p.a)({url:"/mcall/patient/customer/unite/v1/getMapById/",method:"POST",data:e,beforeSend:function(){},timeout:2e3,done:function(t){if(localStorage.setItem("customerBaseInfo_one",v()(t)),t&&t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.dataList){var a=t.responseObject.responseData.dataList[0].mobile;if(a&&a.length>0)return sessionStorage.removeItem("isReLoading"),!0;if(sessionStorage.getItem("isReLoading")&&"1"==sessionStorage.getItem("isReLoading"))return;sessionStorage.setItem("loginBack",window.location.href),window.location.href="/dist/login.html?customerId="+e.customerId}else{if(sessionStorage.getItem("isReLoading")&&"1"==sessionStorage.getItem("isReLoading"))return;sessionStorage.setItem("loginBack",window.location.href),window.location.href="/dist/login.html?customerId="+e.customerId}}})}var n=a(41),o=a.n(n),i=a(42),r=a.n(i),c=a(0),l=a.n(c),u=a(1),d=a.n(u),p=a(6),m=a(5),g=function(){function e(){l()(this,e)}return d()(e,[{key:"checkOpenId",value:function(){if("other"===this.isWXBrowse())return!0;if(window.location.href.indexOf("m9.allinmed.cn")>0||window.location.href.indexOf("m.allinmed.cn")>0){var e=localStorage.getItem("openId"),t="";return null!=e?t=!0:(t=!1,sessionStorage.getItem("count")&&sessionStorage.getItem("count").length>0&&sessionStorage.removeItem("count")),t}return!0}},{key:"isWXBrowse",value:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)&&e.indexOf("iphone")>0?"iphoneWX":"micromessenger"==e.match(/MicroMessenger/i)&&e.indexOf("android")>0?"androidWX":"other"}},{key:"wxGetOpenId",value:function(){var e="",t="",a=window.location.origin+window.location.pathname+window.location.search,s=encodeURIComponent(a),n="";if(window.location.origin.includes("localhost"))return!1;n=window.location.hostname.includes("m9")?2:1,1==n?(e="wxe8384f7b06c169ef",t="http://m.allinmed.cn/mcall/wx/tocure/interact/v1/view/"):2==n&&(e="wxaa5288ad7f627608",t="http://m9.allinmed.cn/mcall/wx/tocure/interact/v1/view/");var o="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+s+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";if(m.a.getPara().code)-1===window.location.href.indexOf("openId")&&(window.location.href=t+"?ref="+(window.location.origin+window.location.pathname)+"&response_type=code&scope=snsapi_base&state=pay&code="+m.a.getPara().code+"#wechat_redirect");else if(-1!==window.location.href.indexOf("openId")){var i=sessionStorage.getItem("count");i||(sessionStorage.setItem("count",1),localStorage.getItem("currentUrl")&&-1!=localStorage.getItem("currentUrl").indexOf("?")?(window.location.href=localStorage.getItem("currentUrl")+"&openId="+m.a.getPara().openId,localStorage.removeItem("isReLoading")):(window.location.href=localStorage.getItem("currentUrl")+"?openId="+m.a.getPara().openId,localStorage.removeItem("isReLoading")),localStorage.setItem("openId",m.a.getPara().openId))}else localStorage.setItem("currentUrl",a),localStorage.setItem("isReLoading","1"),window.location.href=o}}]),e}(),f=new g,h=a(7),v=a.n(h),y=function(){function e(){l()(this,e)}return d()(e,[{key:"wxforbidShare",value:function(){var e=document.createElement("script");e.type="text/javascript",e.src="/static/js/third-party/jweixin-1.0.0.js",document.getElementsByTagName("body")[0].appendChild(e),Object(p.a)({url:"/mcall/wx/api/v1/getJSConfig/",method:"POST",data:{url:encodeURIComponent(window.location.href.split("#")[0])},headers:{"Content-Type":"application/x-www-form-urlencoded"},done:function(e){if(e.responseObject.responseData&&e.responseObject.responseStatus){var t=e.responseObject.responseData;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["onMenuShareTimeline","hideOptionMenu","showOptionMenu","getNetworkType","getLocation","openLocation","chooseImage","previewImage","uploadImage","getLocalImgData","scanQRCode","hideMenuItems"]}),wx.ready(function(){console.log("成功了"),wx.hideOptionMenu()}),wx.error(function(e){console.log(e)})}},fail:function(e){document.querySelector(".ev-loading").style.display="none"}})}}]),e}(),I=new y,w=a(9),S=(a(8),function(){function e(){l()(this,e),this.removeByValue=function(e,t){for(var a=0;a<this.length;a++)if(e[a]==val){e.splice(a,1);break}return e}}return d()(e,[{key:"forbidShare",value:function(){w.a.weChatJudge(function(){window.location.href.includes("m9")||window.location.href.includes("10.1")||window.location.href.includes("localhost")||I.wxforbidShare()},function(){console.log("不需要禁止")})}},{key:"banZoom",value:function(){document.addEventListener("touchstart",function(e){e.touches.length>1&&e.preventDefault()});var e=0;document.addEventListener("touchend",function(t){var a=(new Date).getTime();a-e<=300&&t.preventDefault(),e=a},!1)}},{key:"ajax",value:function(e){Object(p.a)(e)}},{key:"getPara",value:function(e){var t=window.location.origin+window.location.pathname+window.location.search,a={},s=void 0,n=void 0;if(t.lastIndexOf(e||"?")>0){s=t.substring(t.lastIndexOf(e||"?")+1,t.length);for(var o=s.split("&"),i=0;i<o.length;i++)n=o[i].split("="),a[n[0]]=decodeURIComponent(n[1])}return a}},{key:"getCookie",value:function(e){var t=void 0,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?decodeURIComponent(t[2]):null}},{key:"removeDub",value:function(e){return[].concat(r()(new o.a(e)))}},{key:"isWXBrowse",value:function(){return f.isWXBrowse()}},{key:"getSiteId",value:function(){return"other"==f.isWXBrowse()?21:17}},{key:"getByteLen",value:function(e){for(var t=0,a=0;a<e.length;a++)null!==e[a].match(/[^\x00-\xff]/gi)?t+=2:t+=1;return t}},{key:"getStrByteLen",value:function(e,t){for(var a="",s=0,n=0;n<e.length&&(e.charCodeAt(n)>128?s+=2:s++,s<=t);n++)a=a.concat(e[n]);return s>t&&(a+=""),a}},{key:"getConnectType",value:function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{tyep:"unknown"},t=["unknown","ethernet","wifi","2g","3g","4g","none"],a=this.isWXBrowse(),s=navigator.userAgent,n="";return"number"==typeof e.type?e.type_text=t[e.type]:"androidWX"===a?"WIFI"!==e.type||"wifi"!==e.type?s.indexOf("WIFI")>0?e.type_text="wifi":e.type_text="other":e.type_text=e.type:"iphoneWX"===a?s.indexOf("WIFI")>0?e.type_text="wifi":e.type_text="other":"undefined"!==e.type?e.type_text=e.type:e.type_text="other","number"==typeof e.bandwidth&&(e.bandwidth>10?e.type="wifi":e.bandwidth>2?e.type="3g":e.bandwidth>0?e.type="2g":0==e.bandwidth?e.type="none":e.type="unknown"),"wifi"==e.type_text?n=1:w.a.weChatJudge(function(){n=0},function(){n=1}),n}},{key:"checkOpenId",value:function(){return f.checkOpenId()}},{key:"wxGetOpenId",value:function(){f.wxGetOpenId()}},{key:"mobileCheck",value:function(){s()}},{key:"timeFormate",value:function(e){var t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],a=e.time.substring(0,10).replace(/\-/g,"/"),s=new Date(a).getDay(),n="",o="",i=t[s],r=e.time.substring(11,16);switch(parseInt(e.type)){case 1:n=e.time.substring(0,4)+"年"+e.time.substring(5,7)+"月"+e.time.substring(8,10)+"日",o=e.time.substring(5,7)+"月"+e.time.substring(8,10)+"日";break;case 2:n=e.time.substring(0,4)+"."+e.time.substring(5,7)+"."+e.time.substring(8,10),o=e.time.substring(5,7)+"."+e.time.substring(8,10)}return{year:n,years:o,week:i,hour:r}}},{key:"MillisecondToDate",value:function(e){var t=parseInt(parseInt(e)/1e3);return null!=t&&""!=t?t>60&&t<3600?t=parseInt(t/60)+"分钟":t>=3600&&t<=86400?t=parseInt(t/3600)+"小时"+parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))+"分钟":t>=86400&&(t=Math.round(parseInt(t/86400))+"天"):t="0 时 0 分0 秒",t}},{key:"MillisecondToDateNew",value:function(e){var t=parseFloat(e)/1e3;return t=null!=t&&""!=t?t>60&&t<3600?parseInt(t/60)+"分钟":t>=3600&&t<=86400?parseInt(t/3600)+"小时":parseInt(t)+"秒":"0 时 0 分0 秒"}}]),e}()),b=new S;!function(){Array.prototype.removeByValue=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}}}();t.a=b},31:function(e,t){},32:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},methods:{cancelClickEvent:function(){this.$emit("cancelClickEvent")},ensureClickEvent:function(){this.$emit("ensureClickEvent")}},mounted:function(){},props:{confirmParams:{type:Object}}}},33:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"maskers confirmBox-tips show"},[a("section",{staticClass:"confirmBox-inner"},[a("article",{staticClass:"confirmBox-content"},[a("article",[e.confirmParams.title?a("h2",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.confirmParams.title))]):e._e(),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.confirmParams.content,expression:"confirmParams.content"}]},[e._v(e._s(e.confirmParams.content))])])]),e._v(" "),a("footer",{staticClass:"confirmBox-btns"},[a("button",{staticClass:"confirmBox-cancelBtn",on:{click:e.cancelClickEvent}},[e._v(e._s(e.confirmParams.cancel))]),e._v(" "),a("button",{staticClass:"confirmBox-ensureBtn",on:{click:e.ensureClickEvent}},[e._v(e._s(e.confirmParams.ensure))])])])])},staticRenderFns:[]}},34:function(e,t){},35:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{}},mounted:function(){console.log()},props:{content:{type:String},imgUrl:{type:String}}}},36:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"middle-tip-modal popup-tips show"},[e.imgUrl?a("figure",{staticClass:"middle-tips-box-img"},[a("img",{attrs:{src:e.imgUrl,alt:""}})]):e._e(),e._v(" "),a("figure",{staticClass:"middle-tip-box-text"},[a("p",{staticClass:"tipText"},[e._v(e._s(e.content))])])])},staticRenderFns:[]}},38:function(e,t){},39:function(e,t,a){"use strict";function s(e){var t={upOrderStatusUrl:"/mcall/cms/pay/order/v1/update/"},a={orderId:e.orderId};new(function(){function s(){l()(this,s),this.init()}return d()(s,[{key:"init",value:function(){switch(e.outTradeNo=1==parseInt(e.isTest)?"":e.outTradeNo,parseInt(e.operationType)){case 1:a.outTradeNo=e.outTradeNo;break;case 2:a.status=e.status,a.payTime=e.payTime,a.outTradeNo=e.outTradeNo,a.orderType=e.orderType,a.orderSourceId=e.orderSourceId;break;case 3:a.status=e.status,a.outTradeNo=e.outTradeNo,a.orderType=e.orderType,a.orderSourceId=e.orderSourceId;break;case 4:a.status=e.status,a.orderType=e.orderType,a.orderSourceId=e.orderSourceId,e.charge&&"true"==e.charge&&(a.outTradeNo=e.outTradeNo,a.refundReason=e.refundReason,a.refundReasonDesc=e.refundReasonDesc);break;case 5:a.status=e.status,a.outRefundNo=e.outRefundNo,a.refundAmount=e.refundAmount,a.refundTime=e.refundTime;break;case 6:a.status=e.status}2==e.orderType&&(a.reservationStatus=e.reservationStatus),p.a.ajax({url:t.upOrderStatusUrl,method:"POST",data:a,done:function(t){e.callBack(t)},fail:function(t){e.errorCallBack()}})}}]),s}())(e)}function n(e){var t={wxBasePath:"",prepayPth:"/mcall/base/pay/external/v1/createPrepaidOrder/",operationOrderPth:"/mcall/customer/operation/order/v1/update/"},a={};new(function(){function n(){l()(this,n),this.init(),console.log(e)}return d()(n,[{key:"init",value:function(){console.log("微信支付");var t=this;1==parseInt(e.isTest)?t.paySuccess():t.wxReady()}},{key:"wxReady",value:function(){var e=this;h.wxGetToken({callBack:function(t){t.data.responseStatus&&(a.token=t.data.responseData.token,a.nonceStr=t.nonceStr,a.ipAddr=t.data.responseData.ipAddr,console.log("-------------token数据--------------"),console.log(t),e.prepaidOrder({token:a.token,nonceStr:a.nonceStr,ipAddr:a.ipAddr}))}})}},{key:"prepaidOrder",value:function(n){var o=this,i={total_fee:100*e.total_fee,body:"唯医骨科-"+e.body,trade_type:"JSAPI",scene:1,siteId:1,roleId:"2",openid:localStorage.getItem("openId"),nonceStr:n.nonceStr,token:n.token,ipAddr:n.ipAddr};console.log("-------------预支付参数--------------"),console.log(i),p.a.ajax({url:t.prepayPth,method:"POST",data:i,done:function(t){console.log(t),t&&"OK"==t.return_msg&&(console.log(t),a.dataL1=t,localStorage.setItem("orderNumber",t.out_trade_no),s({operationType:"1",orderId:e.orderId,outTradeNo:t.out_trade_no,callBack:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&o.checkWxPay()},errorCallBack:function(){}}))}})}},{key:"checkWxPay",value:function(){var e=this;"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e.onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e.onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",e.onBridgeReady)):e.onBridgeReady()}},{key:"onBridgeReady",value:function(){var t=this,s=a.dataL1;Math.round((new Date).getTime()/1e3);console.log("-----pay-----"),WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:s.appid,timeStamp:s.timeStamp,nonceStr:s.nonceStr,package:"prepay_id="+s.prepay_id,signType:"MD5",paySign:s.sign},function(a){"get_brand_wcpay_request:ok"==a.err_msg?1==e.orderType&&0==e.orderSourceId?"shuntDoctor"==e.doctorType?t.creatShuntInquiryId({queryCallBack:function(a){e.orderSourceId=a,t.paySuccess()}}):t.creatInquiryId({queryCallBack:function(a){e.orderSourceId=a,t.paySuccess()}}):t.paySuccess():t.payError()})}},{key:"paySuccess",value:function(){s({operationType:"2",orderId:e.orderId,orderType:e.orderType,reservationStatus:2==e.orderType?e.reservationStatus:"",orderSourceId:e.orderSourceId,outTradeNo:1==parseInt(e.isTest)?h.mathRandomNum({numberValue:10}):localStorage.getItem("orderNumber"),status:"2",payTime:"1",callBack:function(t){t&&t.responseObject&&t.responseObject.responseStatus?e.callBack({responseStatus:"true",out_trade_no:localStorage.getItem("orderNumber")}):common.popup({text:"更新订单失败"})},errorCallBack:function(){common.popup({text:"更新订单失败"})}})}},{key:"payError",value:function(){s({operationType:"3",orderId:e.orderId,orderType:e.orderType,reservationStatus:2==e.orderType?e.reservationStatus:"",orderSourceId:e.orderSourceId,outTradeNo:localStorage.getItem("orderNumber"),status:"1",payTime:"",callBack:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&e.callBack({responseStatus:"false"})},errorCallBack:function(){}})}},{key:"creatInquiryId",value:function(e){p.a.ajax({url:"/mcall/customer/case/consultation/v1/getMapById/",method:"POST",data:{caseId:p.a.getPara().caseId,customerId:p.a.getPara().doctorCustomerId||localStorage.getItem("docId"),consultationType:1,siteId:17},done:function(t){"NO DATA"==t.responseObject.responseMessage&&p.a.ajax({url:"/mcall/customer/case/consultation/v1/create/",method:"POST",data:{caseId:p.a.getPara().caseId,customerId:p.a.getPara().doctorCustomerId||localStorage.getItem("docId"),patientCustomerId:p.a.getPara().patientCustomerId,patientId:p.a.getPara().patientId,consultationType:1,consultationState:-1,consultationLevel:localStorage.getItem("orderPayType"),siteId:17,caseType:0},done:function(t){t.responseObject.responseStatus&&(localStorage.removeItem("docId"),sessionStorage.setItem("orderSourceId",t.responseObject.responsePk),e.queryCallBack(t.responseObject.responsePk))}})}})}},{key:"creatShuntInquiryId",value:function(t){p.a.ajax({url:"/mcall/customer/case/consultation/v1/getMapById/",method:"POST",data:{caseId:e.caseId,customerId:0,consultationType:0,siteId:17},done:function(a){"NO DATA"==a.responseObject.responseMessage&&p.a.ajax({url:"/mcall/customer/case/consultation/v1/create/",method:"POST",data:{caseId:e.caseId,customerId:0,patientCustomerId:e.patientCustomerId,patientId:e.patientId,consultationType:0,consultationState:4,siteId:17,caseType:0},done:function(e){e.responseObject.responseStatus&&t.queryCallBack(e.responseObject.responsePk)}})}})}}]),n}())(e)}function o(e){var t={wxBasePath:"",prepayPth:"/mcall/base/pay/external/v1/createPrepaidOrder/",operationOrderPth:"/mcall/customer/operation/order/v1/update/"},a={};new(function(){function s(){l()(this,s),this.init()}return d()(s,[{key:"init",value:function(){console.log("H5支付");var t=this;1==parseInt(e.isTest)?t.paySuccess():t.wxReady()}},{key:"wxReady",value:function(){var e=this;h.wxGetTokenPlus().then(function(t){t.data.responseStatus&&(a.token=t.data.responseData.token,a.nonceStr=t.nonceStr,a.ipAddr=t.data.responseData.ipAddr,e.prepaidOrder({token:a.token,nonceStr:a.nonceStr,ipAddr:a.ipAddr}))}).catch(function(e){console.log("h5,支付接口错误")})}},{key:"prepaidOrder",value:function(s){var n=this,o={total_fee:100*e.total_fee,body:"唯医骨科-"+e.body,trade_type:"MWEB",scene:1,siteId:1,roleId:"2",nonceStr:s.nonceStr,token:s.token,ipAddr:s.ipAddr};console.log(o),p.a.ajax({url:t.prepayPth,method:"POST",data:o,done:function(e){e&&"OK"==e.return_msg&&(console.log(e),a.dataL1=e,localStorage.setItem("orderNumber",e.out_trade_no),n.h5AskPay(e))}})}},{key:"h5AskPay",value:function(){var e=a.dataL1;console.log("-----pay-----"),localStorage.setItem("payOk",1),console.log(e.mweb_url),window.location.href=e.mweb_url+"&redirect_url="+encodeURIComponent(window.location.href)}}]),s}())(e)}function i(e){var t={outTradeNo:e.outTradeNo,scene:1,roleId:2,nonceStr:localStorage.getItem("nonceStr"),siteId:1,token:localStorage.getItem("token"),ipAddr:localStorage.getItem("ipAddr")};return console.log(t),new g.a(function(e,a){p.a.ajax({url:v.payResultUrl,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,done:function(t){t&&t.responseData&&t.responseData.dataList?e(t.responseData.dataList):a(new Error("望天，接口出错了"))}})})}function r(e){var t={createOrder:"/mcall/cms/pay/order/v1/create/",updateOrder:"/mcall/cms/pay/order/v1/update/"};new(function(){function a(){l()(this,a),this.init()}return d()(a,[{key:"init",value:function(){this.firstLoad(),console.log(e)}},{key:"firstLoad",value:function(){var a=this;this.createOrderData={caseId:e.data.caseId,patientCustomerId:e.data.patientCustomerId,patientId:e.data.patientId,doctorId:e.data.doctorId,orderType:e.data.orderType,orderSourceId:e.data.orderSourceId,orderSourceType:e.data.orderSourceType,visitSiteId:"17"},"true"==e.data.isCharge?(this.createOrderData.orderAmount=e.data.orderAmount,this.createOrderData.status="1"):this.createOrderData.status="2",p.a.ajax({url:t.createOrder,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.createOrderData,done:function(t){t&&t.responseObject&&t.responseObject.responsePk?(a.orderId=t.responseObject.responsePk,a.orderSuccess({orderId:t.responseObject.responsePk})):e.backCreateError()},fail:function(e){}})}},{key:"orderSuccess",value:function(){var t=this;switch(parseInt(e.data.orderType)){case 1:case 3:"true"===e.data.isCharge?y.a.weChatJudge(function(e){t.goWxPay(e)},function(e){t.goH5Pay(e)}):e.backCreateSuccess(this.orderId);break;case 2:e.backCreateSuccess(this.orderId)}}},{key:"goWxPay",value:function(){n({isTest:0,orderId:this.orderId,orderType:e.data.orderType,orderSourceId:e.data.orderSourceId,total_fee:e.data.orderAmount,body:e.data.body,doctorType:e.data.doctorType,caseId:e.data.caseId,patientCustomerId:e.data.patientCustomerId,patientId:e.data.patientId,callBack:function(t){"true"===t.responseStatus?e.wxPaySuccess():e.wxPayError()}})}},{key:"goH5Pay",value:function(){o({isTest:0,orderId:this.orderId,orderType:e.data.orderType,orderSourceId:e.data.orderSourceId,total_fee:e.data.orderAmount,body:e.data.body,callBack:function(e){}})}}]),a}())(e)}var c=a(0),l=a.n(c),u=a(1),d=a.n(u),p=a(3),m=a(15),g=a.n(m),f=(a(8),function(){function e(t){l()(this,e)}return d()(e,[{key:"mathRandomNum",value:function(e){for(var t="",a=e.numberValue,s=[0,1,2,3,4,5,6,7,8,9],n=0;n<a;n++){t+=s[Math.floor(10*Math.random())]}return t}},{key:"mathRandom",value:function(e){for(var t="",a=e.numberValue,s=[0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0;n<a;n++){t+=s[Math.floor(36*Math.random())]}return t.toLowerCase()}},{key:"wxGetTokenPlus",value:function(){var e=this.mathRandom({numberValue:32});return new g.a(function(t,a){p.a.ajax({url:"/mcall/base/pay/external/v1/getToken/",method:"POST",data:{roleId:2,nonceStr:e,siteId:1},done:function(s){localStorage.setItem("validityTime",Math.round((new Date).getTime()/1e3)),localStorage.setItem("token",s.responseData.token),localStorage.setItem("ipAddr",s.responseData.ipAddr),localStorage.setItem("nonceStr",e),s&&s.responseStatus?t({data:s,nonceStr:e}):a(err)}})})}},{key:"wxGetToken",value:function(e){var t=this.mathRandom({numberValue:32});p.a.ajax({url:"/mcall/base/pay/external/v1/getToken/",method:"POST",data:{roleId:2,nonceStr:t,siteId:1},done:function(a){localStorage.setItem("validityTime",Math.round((new Date).getTime()/1e3)),localStorage.setItem("token",a.responseData.token),localStorage.setItem("nonceStr",t),a&&a.responseData&&a.responseData.token&&a.responseData.token.length>0&&e.callBack({data:a,nonceStr:t})}})}},{key:"checkToken",value:function(){var e=Math.round((new Date).getTime()/1e3),t=localStorage.getItem("validityTime");return null!=t&&e-t<7200}},{key:"checkOpenId",value:function(){var e=localStorage.getItem("openId"),t="";return null!=e?t=!0:(t=!1,sessionStorage.getItem("count")&&sessionStorage.getItem("count").length>0&&sessionStorage.removeItem("count")),t}},{key:"wxGetOpenId",value:function(){var e=window.location.href,t=encodeURIComponent(e),a="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxaa5288ad7f627608&redirect_uri="+t+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";if(common.getpara().code)-1===window.location.href.indexOf("openId")&&(window.location.href="http://m.allinmed.cn/mcall/wx/tocure/interact/v1/view/?ref="+localStorage.getItem("currentUrl")+"&response_type=code&scope=snsapi_base&state=pay&code="+common.getpara().code+"#wechat_redirect");else if(-1!==window.location.href.indexOf("openId")){var s=sessionStorage.getItem("count");s||(sessionStorage.setItem("count",1),localStorage.getItem("currentUrl")&&-1!=localStorage.getItem("currentUrl").indexOf("?")?window.location.href=localStorage.getItem("currentUrl")+"&openId="+common.getpara().openId:window.location.href=localStorage.getItem("currentUrl")+"?openId="+common.getpara().openId,localStorage.setItem("openId",common.getpara().openId))}else localStorage.setItem("currentUrl",e),window.location.href=a}}]),e}()),h=new f,v=(a(89),{payResultUrl:"/mcall/base/pay/external/v1/getResultBack/"}),y=a(9),I=function(){function e(t){l()(this,e)}return d()(e,[{key:"wxCloseOrder",value:function(){}},{key:"wxCreateOrder",value:function(e){r(e)}},{key:"wxUpOrder",value:function(e){s(e)}},{key:"wxPay",value:function(e){n(e)}},{key:"H5Pay",value:function(e){o(e)}},{key:"PayResult",value:function(e){return i(e)}}]),e}();t.a=new I},5:function(e,t,a){"use strict";var s=a(0),n=a.n(s),o=a(1),i=a.n(o),r=function(){function e(){n()(this,e)}return i()(e,[{key:"getPara",value:function(e){var t=window.location.origin+window.location.pathname+window.location.search,a={},s=void 0,n=void 0;if(t.lastIndexOf(e||"?")>0){s=t.substring(t.lastIndexOf(e||"?")+1,t.length);for(var o=s.split("&"),i=0;i<o.length;i++)n=o[i].split("="),a[n[0]]=decodeURIComponent(n[1])}return a}},{key:"browser",value:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"==e.match(/\sQQ/i)}}}]),e}();t.a=new r},6:function(e,t,a){"use strict";function s(e){r.a.interceptors.request.use(function(t){return document.querySelector(".ev-loading")&&(document.querySelector(".ev-loading").style.display="block"),e.beforeSend&&e.beforeSend(t),t}),r()({url:e.url,method:e.method,data:e.data,transformRequest:[function(e){return"paramJson="+o()(e)}],headers:{"X-Requested-With":"XMLHttpRequest"},timeout:3e4}).then(function(t){e.done(t.data),document.querySelector(".ev-loading")&&(document.querySelector(".ev-loading").style.display="none")}).catch(function(t){e.fail&&e.fail(t)})}t.a=s;var n=a(7),o=a.n(n),i=a(18),r=a.n(i)},9:function(e,t,a){"use strict";var s=a(0),n=a.n(s),o=a(1),i=a.n(o),r=a(8),c=(a.n(r),function(){function e(){n()(this,e)}return i()(e,[{key:"weChatJudge",value:function(e,t){var a=window.navigator.userAgent.toLowerCase();a.includes("micromessenger")?e(a):t(a)}}]),e}());t.a=new c}},[1231]);