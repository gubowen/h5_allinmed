webpackJsonp([10],{11:function(e,t){!function(e,t){function o(){var t=a.getBoundingClientRect().width;t/s>540&&(t=540*s);var o=t/10;a.style.fontSize=o+"px",u.rem=e.rem=o}var r,n=e.document,a=n.documentElement,i=n.querySelector('meta[name="viewport"]'),c=n.querySelector('meta[name="flexible"]'),s=0,d=0,u=t.flexible||(t.flexible={});if(i){console.warn("将根据已有的meta标签来设置缩放比例");var l=i.getAttribute("content").match(/initial\-scale=([\d\.]+)/);l&&(d=parseFloat(l[1]),s=parseInt(1/d))}else if(c){var p=c.getAttribute("content");if(p){var m=p.match(/initial\-dpr=([\d\.]+)/),f=p.match(/maximum\-dpr=([\d\.]+)/);m&&(s=parseFloat(m[1]),d=parseFloat((1/s).toFixed(2))),f&&(s=parseFloat(f[1]),d=parseFloat((1/s).toFixed(2)))}}if(!s&&!d){var y=(e.navigator.appVersion.match(/android/gi),e.navigator.appVersion.match(/iphone/gi)),g=e.devicePixelRatio;s=y?g>=3&&(!s||s>=3)?3:g>=2&&(!s||s>=2)?2:1:1,d=1/s}if(a.setAttribute("data-dpr",s),!i)if(i=n.createElement("meta"),i.setAttribute("name","viewport"),i.setAttribute("content","initial-scale="+d+", maximum-scale="+d+", minimum-scale="+d+", user-scalable=no"),a.firstElementChild)a.firstElementChild.appendChild(i);else{var I=n.createElement("div");I.appendChild(i),n.write(I.innerHTML)}e.addEventListener("resize",function(){clearTimeout(r),r=setTimeout(o,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(r),r=setTimeout(o,300))},!1),"complete"===n.readyState?n.body.style.fontSize=12*s+"px":n.addEventListener("DOMContentLoaded",function(e){n.body.style.fontSize=12*s+"px"},!1),o(),u.dpr=e.dpr=s,u.refreshRem=o,u.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},u.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}))},1423:function(e,t,o){o(35),e.exports=o(1424)},1424:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(1),n=o.n(r),a=o(2),i=o.n(a),c=o(14),s=o(1425),d=o.n(s),u=o(67),l=o(56),p=o.n(l),m=o(19),f=(o.n(m),o(24),o(52));o.n(f);p.a.attach(document.body),new(function(){function e(){n()(this,e),this.init()}return i()(e,[{key:"init",value:function(){c.a.use(u.a);new c.a({render:function(e){return e(d.a)}}).$mount("#test")}}]),e}())},1425:function(e,t,o){function r(e){o(1426)}var n=o(3)(o(1427),o(1428),r,null,null);e.exports=n.exports},1426:function(e,t){},1427:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(11),n=(o.n(r),o(24));t.default={data:function(){return{payShow:!1}},mounted:function(){1==localStorage.getItem("askPay")&&(this.payShow=!0,this.viewResultH5Pay())},methods:{askH5Pay:function(){console.log("============H5支付啊===========");var e={caseId:"1509972059074",patientCustomerId:"1489998682602",patientId:"1491471348694",doctorId:"1234567890123",orderType:"1",orderSourceId:"1493697450391",orderSourceType:"1",orderAmount:.01,status:"1",body:"Test支付",isCharge:"true"};n.a.wxCreateOrder({data:e,backCreateSuccess:function(e){},backCreateError:function(e){},wxPaySuccess:function(e){},wxPayError:function(e){}})},viewResultH5Pay:function(){console.log("H5支付结果查看"),n.a.PayResult({out_trade_no:localStorage.getItem("orderNumber")}).then(function(e){console.log("查看回调"),console.log(e)}).catch(function(e){console.log("望天，接口错误")})},payHide:function(){localStorage.removeItem("askPay"),this.payShow=!1}}}},1428:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("p",{staticClass:"H-pay",on:{click:function(t){e.askH5Pay()}}},[e._v("H5支付")]),e._v(" "),e.payShow?o("p",{staticClass:"H-viewPay",on:{click:e.payHide}},[e._v("支付成功")]):e._e()])},staticRenderFns:[]}},19:function(e,t){},24:function(e,t,o){"use strict";function r(e){var t={upOrderStatusUrl:"/mcall/cms/pay/order/v1/update/"},o={orderId:e.orderId};new(function(){function r(){d()(this,r),this.init()}return l()(r,[{key:"init",value:function(){switch(e.outTradeNo=1==parseInt(e.isTest)?"":e.outTradeNo,parseInt(e.operationType)){case 1:o.outTradeNo=e.outTradeNo;break;case 2:o.status=e.status,o.payTime=e.payTime,o.outTradeNo=e.outTradeNo,o.orderType=e.orderType,o.orderSourceId=e.orderSourceId;break;case 3:o.status=e.status,o.outTradeNo=e.outTradeNo,o.orderType=e.orderType,o.orderSourceId=e.orderSourceId;break;case 4:o.status=e.status,o.orderType=e.orderType,o.orderSourceId=e.orderSourceId,e.charge&&"true"==e.charge&&(o.outTradeNo=e.outTradeNo,o.refundReason=e.refundReason,o.refundReasonDesc=e.refundReasonDesc);break;case 5:o.status=e.status,o.outRefundNo=e.outRefundNo,o.refundAmount=e.refundAmount,o.refundTime=e.refundTime;break;case 6:o.status=e.status}2==e.orderType&&(o.reservationStatus=e.reservationStatus),p.a.ajax({url:t.upOrderStatusUrl,method:"POST",data:o,done:function(t){e.callBack(t)},fail:function(t){e.errorCallBack()}})}}]),r}())(e)}function n(e){var t={wxBasePath:"",prepayPth:"/mcall/base/pay/external/v1/createPrepaidOrder/",operationOrderPth:"/mcall/customer/operation/order/v1/update/"},o={};new(function(){function n(){d()(this,n),this.init()}return l()(n,[{key:"init",value:function(){console.log("微信支付");var t=this;1==parseInt(e.isTest)?t.paySuccess():t.wxReady()}},{key:"wxReady",value:function(){var e=this;f.wxGetToken({callBack:function(t){t.data.responseStatus&&(o.token=t.data.responseData.token,o.nonceStr=t.nonceStr,e.prepaidOrder({token:o.token,nonceStr:o.nonceStr}))}})}},{key:"prepaidOrder",value:function(n){var a=this,i={total_fee:100*e.total_fee,body:"唯医骨科-"+e.body,trade_type:"JSAPI",scene:1,siteId:1,roleId:"2",openid:localStorage.getItem("openId"),nonceStr:n.nonceStr,token:n.token};p.a.ajax({url:t.prepayPth,method:"POST",data:i,done:function(t){console.log(t),t&&"OK"==t.return_msg&&(console.log(t),o.dataL1=t,localStorage.setItem("orderNumber",t.out_trade_no),r({operationType:"1",orderId:e.orderId,outTradeNo:t.out_trade_no,callBack:function(e){e&&e.responseObject&&e.responseObject.responseStatus&&a.checkWxPay()},errorCallBack:function(){}}))}})}},{key:"checkWxPay",value:function(){var e=this;"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e.onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e.onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",e.onBridgeReady)):e.onBridgeReady()}},{key:"onBridgeReady",value:function(){var t=this,r=o.dataL1;Math.round((new Date).getTime()/1e3);console.log("-----pay-----"),WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:r.appid,timeStamp:r.timeStamp,nonceStr:r.nonceStr,package:"prepay_id="+r.prepay_id,signType:"MD5",paySign:r.sign},function(o){"get_brand_wcpay_request:ok"==o.err_msg?1==e.orderType&&0==e.orderSourceId?t.creatInquiryId({queryCallBack:function(o){e.orderSourceId=o,t.paySuccess()}}):t.paySuccess():t.payError()})}},{key:"paySuccess",value:function(){r({operationType:"2",orderId:e.orderId,orderType:e.orderType,reservationStatus:2==e.orderType?e.reservationStatus:"",orderSourceId:e.orderSourceId,outTradeNo:1==parseInt(e.isTest)?f.mathRandomNum({numberValue:10}):localStorage.getItem("orderNumber"),status:"2",payTime:"1",callBack:function(t){t&&t.responseObject&&t.responseObject.responseStatus?e.callBack({responseStatus:"true",out_trade_no:localStorage.getItem("orderNumber")}):common.popup({text:"更新订单失败"})},errorCallBack:function(){common.popup({text:"更新订单失败"})}})}},{key:"payError",value:function(){r({operationType:"3",orderId:e.orderId,orderType:e.orderType,reservationStatus:2==e.orderType?e.reservationStatus:"",orderSourceId:e.orderSourceId,outTradeNo:localStorage.getItem("orderNumber"),status:"1",payTime:"",callBack:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&e.callBack({responseStatus:"false"})},errorCallBack:function(){}})}},{key:"creatInquiryId",value:function(e){p.a.ajax({url:"/mcall/customer/case/consultation/v1/getMapById/",method:"POST",data:{caseId:p.a.getPara().caseId,customerId:p.a.getPara().doctorCustomerId||localStorage.getItem("docId"),consultationType:1,siteId:17},done:function(t){"NO DATA"==t.responseObject.responseMessage&&p.a.ajax({url:"/mcall/customer/case/consultation/v1/create/",method:"POST",data:{caseId:p.a.getPara().caseId,customerId:p.a.getPara().doctorCustomerId||localStorage.getItem("docId"),patientCustomerId:p.a.getPara().patientCustomerId,patientId:p.a.getPara().patientId,consultationType:1,consultationState:-1,consultationLevel:localStorage.getItem("orderPayType"),siteId:17,caseType:0},done:function(t){t.responseObject.responseStatus&&(localStorage.removeItem("docId"),sessionStorage.setItem("orderSourceId",t.responseObject.responsePk),e.queryCallBack(t.responseObject.responsePk))}})}})}}]),n}())(e)}function a(e){var t={wxBasePath:"",prepayPth:"/mcall/base/pay/external/v1/createPrepaidOrder/",operationOrderPth:"/mcall/customer/operation/order/v1/update/"},o={};new(function(){function n(){d()(this,n),this.init()}return l()(n,[{key:"init",value:function(){console.log("H5支付");var t=this;1==parseInt(e.isTest)?t.paySuccess():t.wxReady()}},{key:"wxReady",value:function(){var e=this;f.wxGetToken({callBack:function(t){t.data.responseStatus&&(o.token=t.data.responseData.token,o.nonceStr=t.nonceStr,e.prepaidOrder({token:o.token,nonceStr:o.nonceStr}))}})}},{key:"prepaidOrder",value:function(r){var n=this,a={total_fee:100*e.total_fee,body:"唯医骨科-"+e.body,trade_type:"MWEB",scene:1,siteId:1,roleId:"2",nonceStr:r.nonceStr,token:r.token};p.a.ajax({url:t.prepayPth,method:"POST",data:a,done:function(e){console.log(e),e&&"OK"==e.return_msg&&(console.log(e),o.dataL1=e,localStorage.setItem("orderNumber",e.out_trade_no),n.h5AskPay(e))}})}},{key:"h5AskPay",value:function(){var e=o.dataL1;Math.round((new Date).getTime()/1e3);console.log("-----pay-----"),localStorage.setItem("askPay",1),window.location.href=e.mweb_url}},{key:"paySuccess",value:function(){r({operationType:"2",orderId:e.orderId,orderType:e.orderType,reservationStatus:2==e.orderType?e.reservationStatus:"",orderSourceId:e.orderSourceId,outTradeNo:1==parseInt(e.isTest)?f.mathRandomNum({numberValue:10}):localStorage.getItem("orderNumber"),status:"2",payTime:"1",callBack:function(t){t&&t.responseObject&&t.responseObject.responseStatus?e.callBack({responseStatus:"true",out_trade_no:localStorage.getItem("orderNumber")}):common.popup({text:"更新订单失败"})},errorCallBack:function(){common.popup({text:"更新订单失败"})}})}},{key:"payError",value:function(){r({operationType:"3",orderId:e.orderId,orderType:e.orderType,reservationStatus:2==e.orderType?e.reservationStatus:"",orderSourceId:e.orderSourceId,outTradeNo:localStorage.getItem("orderNumber"),status:"1",payTime:"",callBack:function(t){t&&t.responseObject&&t.responseObject.responseStatus&&e.callBack({responseStatus:"false"})},errorCallBack:function(){}})}},{key:"creatInquiryId",value:function(e){p.a.ajax({url:"/mcall/customer/case/consultation/v1/getMapById/",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{caseId:p.a.getPara().caseId,customerId:p.a.getPara().doctorCustomerId||localStorage.getItem("docId"),consultationType:1,siteId:17},done:function(t){"NO DATA"==t.responseObject.responseMessage&&p.a.ajax({url:"/mcall/customer/case/consultation/v1/create/",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:{caseId:p.a.getPara().caseId,customerId:p.a.getPara().doctorCustomerId||localStorage.getItem("docId"),patientCustomerId:p.a.getPara().patientCustomerId,patientId:p.a.getPara().patientId,consultationType:1,consultationState:-1,consultationLevel:localStorage.getItem("orderPayType"),siteId:17,caseType:0},done:function(t){t.responseObject.responseStatus&&(localStorage.removeItem("docId"),sessionStorage.setItem("orderSourceId",t.responseObject.responsePk),e.queryCallBack(t.responseObject.responsePk))}})}})}}]),n}())(e)}function i(e){var t={out_trade_no:e.out_trade_no,scene:1,roleId:2,nonceStr:localStorage.getItem("nonceStr"),siteId:1,token:localStorage.getItem("token")};return console.log(t),new g.a(function(e,o){p.a.ajax({url:I.payResultUrl,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t,done:function(t){console.log(t),e(t)},fail:function(e){o(e)}})})}function c(e){var t={createOrder:"/mcall/cms/pay/order/v1/create/",updateOrder:"/mcall/cms/pay/order/v1/update/"};new(function(){function o(){d()(this,o),this.init()}return l()(o,[{key:"init",value:function(){this.firstLoad(),console.log(e)}},{key:"firstLoad",value:function(){var o=this;this.createOrderData={caseId:e.data.caseId,patientCustomerId:e.data.patientCustomerId,patientId:e.data.patientId,doctorId:e.data.doctorId,orderType:e.data.orderType,orderSourceId:e.data.orderSourceId,orderSourceType:e.data.orderSourceType,visitSiteId:"17"},"true"==e.data.isCharge?(this.createOrderData.orderAmount=e.data.orderAmount,this.createOrderData.status="1"):this.createOrderData.status="2",p.a.ajax({url:t.createOrder,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:this.createOrderData,done:function(t){t&&t.responseObject&&t.responseObject.responsePk?(o.orderId=t.responseObject.responsePk,o.orderSuccess({orderId:t.responseObject.responsePk})):e.backCreateError()},fail:function(e){}})}},{key:"orderSuccess",value:function(){var t=this;switch(parseInt(e.data.orderType)){case 1:case 3:"true"===e.data.isCharge?h.a.weChatJudge(function(e){t.goWxPay(e)},function(e){t.goH5Pay(e)}):e.backCreateSuccess(this.orderId);break;case 2:e.backCreateSuccess(this.orderId)}}},{key:"goWxPay",value:function(){n({isTest:0,orderId:this.orderId,orderType:e.data.orderType,orderSourceId:e.data.orderSourceId,total_fee:e.data.orderAmount,body:e.data.body,callBack:function(t){"true"===t.responseStatus?e.wxPaySuccess():e.wxPayError()}})}},{key:"goH5Pay",value:function(){a({isTest:0,orderId:this.orderId,orderType:e.data.orderType,orderSourceId:e.data.orderSourceId,total_fee:e.data.orderAmount,body:e.data.body,callBack:function(e){}})}}]),o}())(e)}var s=o(1),d=o.n(s),u=o(2),l=o.n(u),p=o(4),m=function(){function e(t){d()(this,e)}return l()(e,[{key:"mathRandomNum",value:function(e){for(var t="",o=e.numberValue,r=[0,1,2,3,4,5,6,7,8,9],n=0;n<o;n++){t+=r[Math.floor(10*Math.random())]}return t}},{key:"mathRandom",value:function(e){for(var t="",o=e.numberValue,r=[0,1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n=0;n<o;n++){t+=r[Math.floor(36*Math.random())]}return t.toLowerCase()}},{key:"wxGetToken",value:function(e){var t=this.mathRandom({numberValue:32});p.a.ajax({url:"/mcall/base/pay/external/v1/getToken/",method:"POST",data:{roleId:2,nonceStr:t,siteId:1},done:function(o){localStorage.setItem("validityTime",Math.round((new Date).getTime()/1e3)),localStorage.setItem("token",o.responseData.token),localStorage.setItem("nonceStr",t),e.callBack({data:o,nonceStr:t})}})}},{key:"checkToken",value:function(){var e=Math.round((new Date).getTime()/1e3),t=localStorage.getItem("validityTime");return null!=t&&e-t<7200}},{key:"checkOpenId",value:function(){var e=localStorage.getItem("openId"),t="";return null!=e?t=!0:(t=!1,sessionStorage.getItem("count")&&sessionStorage.getItem("count").length>0&&sessionStorage.removeItem("count")),t}},{key:"wxGetOpenId",value:function(){var e=window.location.href,t=encodeURIComponent(e),o="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxaa5288ad7f627608&redirect_uri="+t+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";if(common.getpara().code)-1===window.location.href.indexOf("openId")&&(window.location.href="http://m.allinmed.cn/mcall/wx/tocure/interact/v1/view/?ref="+localStorage.getItem("currentUrl")+"&response_type=code&scope=snsapi_base&state=pay&code="+common.getpara().code+"#wechat_redirect");else if(-1!==window.location.href.indexOf("openId")){var r=sessionStorage.getItem("count");r||(sessionStorage.setItem("count",1),localStorage.getItem("currentUrl")&&-1!=localStorage.getItem("currentUrl").indexOf("?")?window.location.href=localStorage.getItem("currentUrl")+"&openId="+common.getpara().openId:window.location.href=localStorage.getItem("currentUrl")+"?openId="+common.getpara().openId,localStorage.setItem("openId",common.getpara().openId))}else localStorage.setItem("currentUrl",e),window.location.href=o}}]),e}(),f=new m,y=o(100),g=o.n(y),I={payResultUrl:"/mcall/base/pay/external/v1/getResultBack/"},h=o(39),v=function(){function e(t){d()(this,e)}return l()(e,[{key:"wxCloseOrder",value:function(){}},{key:"wxCreateOrder",value:function(e){c(e)}},{key:"wxUpOrder",value:function(e){r(e)}},{key:"wxPay",value:function(e){n(e)}},{key:"H5Pay",value:function(e){a(e)}},{key:"PayResult",value:function(e){i(e)}}]),e}();t.a=new v},39:function(e,t,o){"use strict";var r=o(1),n=o.n(r),a=o(2),i=o.n(a),c=o(52),s=(o.n(c),function(){function e(){n()(this,e)}return i()(e,[{key:"weChatJudge",value:function(e,t){var o=window.navigator.userAgent.toLowerCase();o.includes("micromessenger")?e(o):t(o)}}]),e}());t.a=new s},4:function(e,t,o){"use strict";function r(e){g.a.interceptors.request.use(function(t){return document.querySelector(".ev-loading")&&(document.querySelector(".ev-loading").style.display="block"),e.beforeSend&&e.beforeSend(t),t}),g()({url:e.url,method:e.method,data:e.data,transformRequest:[function(e){return"paramJson="+f()(e)}],headers:{"X-Requested-With":"XMLHttpRequest"},timeout:3e4}).then(function(t){e.done(t.data),document.querySelector(".ev-loading")&&(document.querySelector(".ev-loading").style.display="none")},function(t){e.fail&&e.fail(t)})}function n(){var e={isValid:1,firstResult:0,maxResult:99999,customerId:0};if(void 0!==h.getPara().patientCustomerId?e.customerId=0===h.getPara().patientCustomerId.length?0:h.getPara().patientCustomerId:void 0!==h.getPara().customerId?e.customerId=0===h.getPara().customerId.length?0:h.getPara().customerId:e.customerId=0,parseInt(e.customerId)>0)return!0;r({url:"/mcall/patient/customer/unite/v1/getById/",method:"POST",data:e,beforeSend:function(){},timeOut:2e3,done:function(t){if(localStorage.setItem("customerBaseInfo_one",f()(t)),t&&t.responseObject&&t.responseObject.responseData&&t.responseObject.responseData.dataList){var o=t.responseObject.responseData.dataList.patientCustomerUnite.mobile;if(o&&o.length>0)return!0;sessionStorage.setItem("loginBack",window.location.href),window.location.href="/dist/login.html?customerId="+e.customerId}}})}var a=o(45),i=o.n(a),c=o(46),s=o.n(c),d=o(1),u=o.n(d),l=o(2),p=o.n(l),m=o(5),f=o.n(m),y=o(20),g=o.n(y),I=function(){function e(){u()(this,e)}return p()(e,[{key:"getPara",value:function(e){var t=window.location.origin+window.location.pathname+window.location.search,o={},r=void 0,n=void 0;if(t.lastIndexOf(e||"?")>0){r=t.substring(t.lastIndexOf(e||"?")+1,t.length);for(var a=r.split("&"),i=0;i<a.length;i++)n=a[i].split("="),o[n[0]]=decodeURIComponent(n[1])}return o}}]),e}(),h=new I,v=function(){function e(){u()(this,e)}return p()(e,[{key:"checkOpenId",value:function(){if("other"===this.isWXBrowse())return!0;var e=localStorage.getItem("openId"),t="";return null!=e?t=!0:(t=!1,sessionStorage.getItem("count")&&sessionStorage.getItem("count").length>0&&sessionStorage.removeItem("count")),t}},{key:"isWXBrowse",value:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)&&e.indexOf("iphone")>0?"iphoneWX":"micromessenger"==e.match(/MicroMessenger/i)&&e.indexOf("android")>0?"androidWX":"other"}},{key:"wxGetOpenId",value:function(){var e="",t="",o=window.location.origin+window.location.pathname+window.location.search,r=encodeURIComponent(o),n="";if(window.location.origin.includes("localhost"))return!1;n=window.location.hostname.includes("m9")?2:1,1==n?(e="wxe8384f7b06c169ef",t="http://m.allinmed.cn/mcall/wx/tocure/interact/v1/view/"):2==n&&(e="wxaa5288ad7f627608",t="http://m9.allinmed.cn/mcall/wx/tocure/interact/v1/view/");var a="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+e+"&redirect_uri="+r+"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect";if(h.getPara().code)-1===window.location.href.indexOf("openId")&&(window.location.href=t+"?ref="+localStorage.getItem("currentUrl")+"&response_type=code&scope=snsapi_base&state=pay&code="+h.getPara().code+"#wechat_redirect");else if(-1!==window.location.href.indexOf("openId")){var i=sessionStorage.getItem("count");i||(sessionStorage.setItem("count",1),localStorage.getItem("currentUrl")&&-1!=localStorage.getItem("currentUrl").indexOf("?")?window.location.href=localStorage.getItem("currentUrl")+"&openId="+h.getPara().openId:window.location.href=localStorage.getItem("currentUrl")+"?openId="+h.getPara().openId,localStorage.setItem("openId",h.getPara().openId))}else localStorage.setItem("currentUrl",o),window.location.href=a}}]),e}(),S=new v,w=function(){function e(){u()(this,e)}return p()(e,[{key:"wxforbidShare",value:function(){var e=document.createElement("script");e.type="text/javascript",e.src="/static/js/third-party/jweixin-1.0.0.js",document.getElementsByTagName("body")[0].appendChild(e),r({url:"/mcall/wx/api/v1/getJSConfig/",method:"POST",data:{url:encodeURIComponent(window.location.href.split("#")[0])},headers:{"Content-Type":"application/x-www-form-urlencoded"},done:function(e){if(e.responseObject.responseData&&e.responseObject.responseStatus){var t=e.responseObject.responseData;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.noncestr,signature:t.signature,jsApiList:["onMenuShareTimeline","hideOptionMenu","showOptionMenu","getNetworkType","getLocation","openLocation","chooseImage","previewImage","uploadImage","getLocalImgData","scanQRCode","hideMenuItems"]}),wx.ready(function(){console.log("成功了"),wx.hideOptionMenu()}),wx.error(function(e){console.log(e)})}},fail:function(e){document.querySelector(".ev-loading").style.display="none"}})}}]),e}(),k=new w,b=function(){function e(){u()(this,e),this.removeByValue=function(e,t){for(var o=0;o<this.length;o++)if(e[o]==val){e.splice(o,1);break}return e}}return p()(e,[{key:"forbidShare",value:function(){h.getPara().isShare||k.wxforbidShare()}},{key:"banZoom",value:function(){document.addEventListener("touchstart",function(e){e.touches.length>1&&e.preventDefault()});var e=0;document.addEventListener("touchend",function(t){var o=(new Date).getTime();o-e<=300&&t.preventDefault(),e=o},!1)}},{key:"ajax",value:function(e){r(e)}},{key:"getPara",value:function(e){var t=window.location.origin+window.location.pathname+window.location.search,o={},r=void 0,n=void 0;if(t.lastIndexOf(e||"?")>0){r=t.substring(t.lastIndexOf(e||"?")+1,t.length);for(var a=r.split("&"),i=0;i<a.length;i++)n=a[i].split("="),o[n[0]]=decodeURIComponent(n[1])}return o}},{key:"getCookie",value:function(e){var t=void 0,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(o))?decodeURIComponent(t[2]):null}},{key:"removeDub",value:function(e){return[].concat(s()(new i.a(e)))}},{key:"isWXBrowse",value:function(){return S.isWXBrowse()}},{key:"getByteLen",value:function(e){for(var t=0,o=0;o<e.length;o++)null!==e[o].match(/[^\x00-\xff]/gi)?t+=2:t+=1;return t}},{key:"getStrByteLen",value:function(e,t){for(var o="",r=0,n=0;n<e.length&&(e.charCodeAt(n)>128?r+=2:r++,r<=t);n++)o=o.concat(e[n]);return r>t&&(o+=""),o}},{key:"getConnectType",value:function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{tyep:"unknown"},t=["unknown","ethernet","wifi","2g","3g","4g","none"],o=this.isWXBrowse(),r=navigator.userAgent;return"number"==typeof e.type?e.type_text=t[e.type]:"androidWX"===o?"WIFI"!==e.type||"wifi"!==e.type?r.indexOf("WIFI")>0?e.type_text="wifi":e.type_text="other":e.type_text=e.type:"iphoneWX"===o?r.indexOf("WIFI")>0?e.type_text="wifi":e.type_text="other":"undefined"!==e.type?e.type_text=e.type:e.type_text="other","number"==typeof e.bandwidth&&(e.bandwidth>10?e.type="wifi":e.bandwidth>2?e.type="3g":e.bandwidth>0?e.type="2g":0==e.bandwidth?e.type="none":e.type="unknown"),"wifi"==e.type_text?1:0}},{key:"checkOpenId",value:function(){return S.checkOpenId()}},{key:"wxGetOpenId",value:function(){S.wxGetOpenId()}},{key:"mobileCheck",value:function(){n()}},{key:"timeFormate",value:function(e){var t=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],o=e.time.substring(0,10).replace(/\-/g,"/"),r=new Date(o).getDay(),n="",a="",i=t[r],c=e.time.substring(11,16);switch(parseInt(e.type)){case 1:n=e.time.substring(0,4)+"年"+e.time.substring(5,7)+"月"+e.time.substring(8,10)+"日",a=e.time.substring(5,7)+"月"+e.time.substring(8,10)+"日";break;case 2:n=e.time.substring(0,4)+"."+e.time.substring(5,7)+"."+e.time.substring(8,10),a=e.time.substring(5,7)+"."+e.time.substring(8,10)}return{year:n,years:a,week:i,hour:c}}},{key:"MillisecondToDate",value:function(e){var t=parseFloat(e)/1e3;return null!=t&&""!=t?t>60&&t<3600?t=parseInt(t/60)+"分钟":t>=3600&&t<86400?t=parseInt(t/3600)+"小时"+parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))+"分钟":t>=86400&&(t=Math.round(parseInt(t/86400))+"天"):t="0 时 0 分0 秒",t}},{key:"MillisecondToDateNew",value:function(e){var t=parseFloat(e)/1e3;return t=null!=t&&""!=t?t>60&&t<3600?parseInt(t/60)+"分钟":t>=3600&&t<86400?parseInt(t/3600)+"小时":parseInt(t)+"秒":"0 时 0 分0 秒"}}]),e}(),T=new b;!function(){Array.prototype.removeByValue=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}}}();t.a=T}},[1423]);